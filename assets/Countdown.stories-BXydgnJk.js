import{j as l}from"./jsx-runtime-BhBAkL08.js";import{c as j}from"./cn-C-5SdYIA.js";import{F as H}from"./clock-DdwMB1Jq.js";import{r as g}from"./index-caxmlYbZ.js";import{a as b}from"./addDays-DUX3p28w.js";import{t as a,c as D}from"./constructFrom-rJN6zrQ_.js";import{d as A,m as E,a as O}from"./differenceInCalendarDays-Do9CeC6b.js";import{T as R}from"./Text-D-wIA97j.js";import{I as $}from"./Icon-7BdkfswG.js";import"./index-D09aQd82.js";import"./styles-BNEhTmYy.js";import"./index-Bb4qSo10.js";function q(t,n){const e=a(t);if(isNaN(n))return D(t,NaN);if(!n)return e;const s=e.getDate(),o=D(t,e.getTime());o.setMonth(e.getMonth()+n+1,0);const r=o.getDate();return s>=r?o:(e.setFullYear(o.getFullYear(),o.getMonth(),s),e)}function h(t,n){const{years:e=0,months:s=0,weeks:o=0,days:r=0,hours:i=0,minutes:c=0,seconds:u=0}=n,d=a(t),f=s||e?q(d,s+e*12):d,m=r||o?b(f,r+o*7):f,M=c+i*60,x=(u+M*60)*1e3;return D(t,m.getTime()+x)}function p(t,n){const e=a(t),s=a(n),o=e.getTime()-s.getTime();return o<0?-1:o>0?1:o}function L(t,n){const e=a(t),s=a(n),o=e.getFullYear()-s.getFullYear(),r=e.getMonth()-s.getMonth();return o*12+r}function V(t,n){const e=a(t),s=a(n);return e.getFullYear()-s.getFullYear()}function W(t,n){const e=a(t),s=a(n),o=C(e,s),r=Math.abs(A(e,s));e.setDate(e.getDate()-o*r);const i=+(C(e,s)===-o),c=o*(r-i);return c===0?0:c}function C(t,n){const e=t.getFullYear()-n.getFullYear()||t.getMonth()-n.getMonth()||t.getDate()-n.getDate()||t.getHours()-n.getHours()||t.getMinutes()-n.getMinutes()||t.getSeconds()-n.getSeconds()||t.getMilliseconds()-n.getMilliseconds();return e<0?-1:e>0?1:e}function _(t){return n=>{const s=(t?Math[t]:Math.trunc)(n);return s===0?0:s}}function T(t,n){return+a(t)-+a(n)}function k(t,n,e){const s=T(t,n)/E;return _(e==null?void 0:e.roundingMethod)(s)}function P(t,n,e){const s=T(t,n)/O;return _(e==null?void 0:e.roundingMethod)(s)}function B(t){const n=a(t);return n.setHours(23,59,59,999),n}function U(t){const n=a(t),e=n.getMonth();return n.setFullYear(n.getFullYear(),e+1,0),n.setHours(23,59,59,999),n}function X(t){const n=a(t);return+B(n)==+U(n)}function z(t,n){const e=a(t),s=a(n),o=p(e,s),r=Math.abs(L(e,s));let i;if(r<1)i=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-o*r);let c=p(e,s)===-o;X(a(t))&&r===1&&p(t,s)===1&&(c=!1),i=o*(r-Number(c))}return i===0?0:i}function G(t,n,e){const s=T(t,n)/1e3;return _(e==null?void 0:e.roundingMethod)(s)}function J(t,n){const e=a(t),s=a(n),o=p(e,s),r=Math.abs(V(e,s));e.setFullYear(1584),s.setFullYear(1584);const i=p(e,s)===-o,c=o*(r-+i);return c===0?0:c}function K(t){const n=a(t.start),e=a(t.end),s={},o=J(e,n);o&&(s.years=o);const r=h(n,{years:s.years}),i=z(e,r);i&&(s.months=i);const c=h(r,{months:s.months}),u=W(e,c);u&&(s.days=u);const d=h(c,{days:s.days}),f=k(e,d);f&&(s.hours=f);const m=h(d,{hours:s.hours}),M=P(e,m);M&&(s.minutes=M);const F=h(m,{minutes:s.minutes}),x=G(e,F);return x&&(s.seconds=x),s}const w=g.createContext({}),I=({initialDuration:t=1e4,step:n=1e3,onCountdownEnd:e=()=>{},children:s})=>{const o=g.useRef(),[r,i]=g.useState(t),c=()=>{i(0),o.current&&clearInterval(o.current),o.current=null},u=()=>{o.current&&clearInterval(o.current),o.current=setInterval(()=>{if(r<=0){c(),e();return}i(m=>m-n)},n)},d=()=>{c(),i(t),u()};g.useEffect(()=>(d(),()=>{c()}),[t]),g.useEffect(()=>{r<=0&&c()},[r]);const f=K({start:0,end:r});return l.jsx(w.Provider,{value:{hours:f.hours||0,minutes:f.minutes||0,seconds:f.seconds||0},children:s})},S=({className:t,icon:n=l.jsx($,{className:"text-text-warning",icon:l.jsx(H,{})}),...e})=>{const{hours:s,minutes:o,seconds:r}=g.useContext(w),i=String(s).padStart(2,"0"),c=String(o).padStart(2,"0"),u=String(r).padStart(2,"0"),d=s>0?`${i}:${c}:${u}`:`${c}:${u}`;return l.jsxs("div",{...e,className:j("text-text-warning flex items-center gap-1",t),children:[l.jsx("span",{className:"relative top-[2px]",children:n}),l.jsx(R,{variant:"semiBold",children:d})]})};I.__docgenInfo={description:"",methods:[],displayName:"Countdown",props:{initialDuration:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10000",computed:!1}},onCountdownEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1000",computed:!1}}},composes:["PropsWithChildren"]};S.__docgenInfo={description:"",methods:[],displayName:"CountdownText",props:{icon:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:'<Icon className="text-text-warning" icon={<ClockIcon />} />',computed:!1}}},composes:["HTMLAttributes"]};const fe={title:"Xenith UI/Components/Countdown",component:I,tags:["autodocs"],args:{initialDuration:3*60*60*1e3,step:1e3,onCountdownEnd:()=>{}},render:t=>l.jsx(I,{...t,children:l.jsx(S,{})})},y={};var N,v,Y;y.parameters={...y.parameters,docs:{...(N=y.parameters)==null?void 0:N.docs,source:{originalSource:"{}",...(Y=(v=y.parameters)==null?void 0:v.docs)==null?void 0:Y.source}}};const le=["Default"];export{y as Default,le as __namedExportsOrder,fe as default};
