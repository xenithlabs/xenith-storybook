import{j as N}from"./jsx-runtime-DR9Q75dM.js";import{r as o}from"./index-DRjF_FHU.js";import{_ as g,c as U,d as Y,a as H,b as X,e as y,f as Z}from"./index-DuXoWBk8.js";import{a as J,$ as Q}from"./index-DdILnG7L.js";import{$ as W}from"./index-qtGI3euC.js";import{$ as S,a as ee,b as te,c as oe}from"./index-CxZrjbHI.js";import{$ as V}from"./index-BhXpUKZt.js";import{$ as ne}from"./index-BXQDTo2X.js";import{c as j}from"./cn-8RyR4BqC.js";import{t as re}from"./styles-CmMnSVhX.js";const ae=o.forwardRef((t,n)=>{const{children:e,...r}=t,a=o.Children.toArray(e),c=a.find(ce);if(c){const s=c.props.children,u=a.map(l=>l===c?o.Children.count(s)>1?o.Children.only(null):o.isValidElement(s)?s.props.children:null:l);return o.createElement(D,g({},r,{ref:n}),o.isValidElement(s)?o.cloneElement(s,void 0,u):null)}return o.createElement(D,g({},r,{ref:n}),e)});ae.displayName="Slot";const D=o.forwardRef((t,n)=>{const{children:e,...r}=t;return o.isValidElement(e)?o.cloneElement(e,{...se(r,e.props),ref:n?U(n,e.ref):e.ref}):o.Children.count(e)>1?o.Children.only(null):null});D.displayName="SlotClone";const G=({children:t})=>o.createElement(o.Fragment,null,t);function ce(t){return o.isValidElement(t)&&t.type===G}function se(t,n){const e={...n};for(const r in n){const a=t[r],c=n[r];/^on[A-Z]/.test(r)?a&&c?e[r]=(...u)=>{c(...u),a(...u)}:a&&(e[r]=a):r==="style"?e[r]={...a,...c}:r==="className"&&(e[r]=[a,c].filter(Boolean).join(" "))}return{...t,...e}}const[_,Ve]=Y("Tooltip",[S]),O=S(),le="TooltipProvider",ie=700,R="tooltip.open",[ue,k]=_(le),fe=t=>{const{__scopeTooltip:n,delayDuration:e=ie,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:c}=t,[s,u]=o.useState(!0),l=o.useRef(!1),f=o.useRef(0);return o.useEffect(()=>{const i=f.current;return()=>window.clearTimeout(i)},[]),o.createElement(ue,{scope:n,isOpenDelayed:s,delayDuration:e,onOpen:o.useCallback(()=>{window.clearTimeout(f.current),u(!1)},[]),onClose:o.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:o.useCallback(i=>{l.current=i},[]),disableHoverableContent:a},c)},L="Tooltip",[de,P]=_(L),pe=t=>{const{__scopeTooltip:n,children:e,open:r,defaultOpen:a=!1,onOpenChange:c,disableHoverableContent:s,delayDuration:u}=t,l=k(L,t.__scopeTooltip),f=O(n),[i,d]=o.useState(null),m=W(),p=o.useRef(0),$=s??l.disableHoverableContent,v=u??l.delayDuration,b=o.useRef(!1),[h=!1,x]=Z({prop:r,defaultProp:a,onChange:I=>{I?(l.onOpen(),document.dispatchEvent(new CustomEvent(R))):l.onClose(),c==null||c(I)}}),T=o.useMemo(()=>h?b.current?"delayed-open":"instant-open":"closed",[h]),C=o.useCallback(()=>{window.clearTimeout(p.current),b.current=!1,x(!0)},[x]),E=o.useCallback(()=>{window.clearTimeout(p.current),x(!1)},[x]),A=o.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,x(!0)},v)},[v,x]);return o.useEffect(()=>()=>window.clearTimeout(p.current),[]),o.createElement(te,f,o.createElement(de,{scope:n,contentId:m,open:h,stateAttribute:T,trigger:i,onTriggerChange:d,onTriggerEnter:o.useCallback(()=>{l.isOpenDelayed?A():C()},[l.isOpenDelayed,A,C]),onTriggerLeave:o.useCallback(()=>{$?E():window.clearTimeout(p.current)},[E,$]),onOpen:C,onClose:E,disableHoverableContent:$},e))},M="TooltipTrigger",$e=o.forwardRef((t,n)=>{const{__scopeTooltip:e,...r}=t,a=P(M,e),c=k(M,e),s=O(e),u=o.useRef(null),l=H(n,u,a.onTriggerChange),f=o.useRef(!1),i=o.useRef(!1),d=o.useCallback(()=>f.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),o.createElement(ee,g({asChild:!0},s),o.createElement(X.button,g({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},r,{ref:l,onPointerMove:y(t.onPointerMove,m=>{m.pointerType!=="touch"&&!i.current&&!c.isPointerInTransitRef.current&&(a.onTriggerEnter(),i.current=!0)}),onPointerLeave:y(t.onPointerLeave,()=>{a.onTriggerLeave(),i.current=!1}),onPointerDown:y(t.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:y(t.onFocus,()=>{f.current||a.onOpen()}),onBlur:y(t.onBlur,a.onClose),onClick:y(t.onClick,a.onClose)})))}),F="TooltipPortal",[me,be]=_(F,{forceMount:void 0}),je=t=>{const{__scopeTooltip:n,forceMount:e,children:r,container:a}=t,c=P(F,n);return o.createElement(me,{scope:n,forceMount:e},o.createElement(V,{present:e||c.open},o.createElement(J,{asChild:!0,container:a},r)))},w="TooltipContent",ve=o.forwardRef((t,n)=>{const e=be(w,t.__scopeTooltip),{forceMount:r=e.forceMount,side:a="top",...c}=t,s=P(w,t.__scopeTooltip);return o.createElement(V,{present:r||s.open},s.disableHoverableContent?o.createElement(B,g({side:a},c,{ref:n})):o.createElement(xe,g({side:a},c,{ref:n})))}),xe=o.forwardRef((t,n)=>{const e=P(w,t.__scopeTooltip),r=k(w,t.__scopeTooltip),a=o.useRef(null),c=H(n,a),[s,u]=o.useState(null),{trigger:l,onClose:f}=e,i=a.current,{onPointerInTransitChange:d}=r,m=o.useCallback(()=>{u(null),d(!1)},[d]),p=o.useCallback(($,v)=>{const b=$.currentTarget,h={x:$.clientX,y:$.clientY},x=ge(h,b.getBoundingClientRect()),T=ye(h,x),C=Te(v.getBoundingClientRect()),E=Ee([...T,...C]);u(E),d(!0)},[d]);return o.useEffect(()=>()=>m(),[m]),o.useEffect(()=>{if(l&&i){const $=b=>p(b,i),v=b=>p(b,l);return l.addEventListener("pointerleave",$),i.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",$),i.removeEventListener("pointerleave",v)}}},[l,i,p,m]),o.useEffect(()=>{if(s){const $=v=>{const b=v.target,h={x:v.clientX,y:v.clientY},x=(l==null?void 0:l.contains(b))||(i==null?void 0:i.contains(b)),T=!Ce(h,s);x?m():T&&(m(),f())};return document.addEventListener("pointermove",$),()=>document.removeEventListener("pointermove",$)}},[l,i,s,f,m]),o.createElement(B,g({},t,{ref:c}))}),[he,Ge]=_(L,{isInside:!1}),B=o.forwardRef((t,n)=>{const{__scopeTooltip:e,children:r,"aria-label":a,onEscapeKeyDown:c,onPointerDownOutside:s,...u}=t,l=P(w,e),f=O(e),{onClose:i}=l;return o.useEffect(()=>(document.addEventListener(R,i),()=>document.removeEventListener(R,i)),[i]),o.useEffect(()=>{if(l.trigger){const d=m=>{const p=m.target;p!=null&&p.contains(l.trigger)&&i()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,i]),o.createElement(Q,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:i},o.createElement(oe,g({"data-state":l.stateAttribute},f,u,{ref:n,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),o.createElement(G,null,r),o.createElement(he,{scope:e,isInside:!0},o.createElement(ne,{id:l.contentId,role:"tooltip"},a||r))))});function ge(t,n){const e=Math.abs(n.top-t.y),r=Math.abs(n.bottom-t.y),a=Math.abs(n.right-t.x),c=Math.abs(n.left-t.x);switch(Math.min(e,r,a,c)){case c:return"left";case a:return"right";case e:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ye(t,n,e=5){const r=[];switch(n){case"top":r.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":r.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":r.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":r.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return r}function Te(t){const{top:n,right:e,bottom:r,left:a}=t;return[{x:a,y:n},{x:e,y:n},{x:e,y:r},{x:a,y:r}]}function Ce(t,n){const{x:e,y:r}=t;let a=!1;for(let c=0,s=n.length-1;c<n.length;s=c++){const u=n[c].x,l=n[c].y,f=n[s].x,i=n[s].y;l>r!=i>r&&e<(f-u)*(r-l)/(i-l)+u&&(a=!a)}return a}function Ee(t){const n=t.slice();return n.sort((e,r)=>e.x<r.x?-1:e.x>r.x?1:e.y<r.y?-1:e.y>r.y?1:0),we(n)}function we(t){if(t.length<=1)return t.slice();const n=[];for(let r=0;r<t.length;r++){const a=t[r];for(;n.length>=2;){const c=n[n.length-1],s=n[n.length-2];if((c.x-s.x)*(a.y-s.y)>=(c.y-s.y)*(a.x-s.x))n.pop();else break}n.push(a)}n.pop();const e=[];for(let r=t.length-1;r>=0;r--){const a=t[r];for(;e.length>=2;){const c=e[e.length-1],s=e[e.length-2];if((c.x-s.x)*(a.y-s.y)>=(c.y-s.y)*(a.x-s.x))e.pop();else break}e.push(a)}return e.pop(),n.length===1&&e.length===1&&n[0].x===e[0].x&&n[0].y===e[0].y?n:n.concat(e)}const Pe=fe,_e=pe,De=$e,q=ve,Fe=Pe,Be=_e,z=o.forwardRef(({className:t,...n},e)=>N.jsx(De,{type:"button",...n,ref:e,className:j("inline-flex items-center text-left cursor-default",t)}));z.displayName="TooltipTrigger";const K=o.forwardRef(({className:t,sideOffset:n=4,children:e,...r},a)=>N.jsx(q,{ref:a,sideOffset:n,className:j("z-50 overflow-hidden rounded-md bg-bg-inverse px-3 py-1.5 left-0 text-text-inverse animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",re({variant:"tooltip"}),t),...r,children:e}));K.displayName=q.displayName;z.__docgenInfo={description:"",methods:[],displayName:"TooltipTrigger"};K.__docgenInfo={description:"",methods:[],props:{sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};export{$e as $,Fe as T,Be as a,z as b,K as c,je as d};
