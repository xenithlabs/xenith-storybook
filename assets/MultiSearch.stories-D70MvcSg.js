import{j as e}from"./jsx-runtime-DR9Q75dM.js";import{r as o}from"./index-DRjF_FHU.js";import{D as pe,a as he,b as fe,f as W}from"./DropdownMenu-XER5NlNu.js";import{c as C}from"./cn-8RyR4BqC.js";import{t as ee}from"./stringCase-DaZl3p-i.js";import{T as M,a as R}from"./Tag-ilI0NFZm.js";import{F as xe}from"./close-D2djoYoT.js";import{P as Se,a as ge,b as je}from"./Popover-A4hNnO1p.js";import{d as ve,I as te,b as Ce}from"./useClickOutside-BWfn5bIc.js";import{T as A}from"./Truncate-D_UV0hIS.js";import{B as F}from"./Button-BfTE6Gaa.js";import{I as b}from"./Icon-CTnhpE1d.js";import{T as S}from"./Text-C8HBwI4b.js";import{B as D}from"./Badge-CQf0SPqP.js";import{F as $}from"./search-5X7N_xNn.js";import{S as z}from"./search-ai-H4BYauaj.js";import"./index-DuXoWBk8.js";import"./index-CxRLcT2J.js";import"./index-CYnergnF.js";import"./index-ab-r6Yn4.js";import"./index-qtGI3euC.js";import"./index-DdILnG7L.js";import"./index-Bq6ilrdN.js";import"./index-CxZrjbHI.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";import"./chevron-right-D4FvqfWr.js";import"./check-C0C6JGvp.js";import"./styles-x1yxmyQd.js";import"./index-Bb4qSo10.js";import"./mini-FlV67GHA.js";import"./spinner-ojW7ALd7.js";import"./chevron-down-CyV3wpL8.js";import"./clock-DRhx3Wks.js";import"./index-CAHntWCK.js";import"./index-HZDBD2ik.js";import"./Heading-DjlBwQyS.js";import"./Checkbox-LSeb53hr.js";import"./index-Bu1UD4WD.js";import"./Tooltip-D2ba4dcD.js";import"./index-BXQDTo2X.js";import"./CopyButton-_NYvsG3t.js";import"./copy-De8jvVXM.js";function J(a,s){let n;const r=function(...i){clearTimeout(n),n=setTimeout(()=>{a.apply(this,i),n=void 0},s)};return r.cancel=function(){clearTimeout(n),n=void 0},r.flush=function(...i){r.cancel(),a.apply(this,i)},r.pending=function(){return n!==void 0},r}function we(a){const s=o.useRef(a);s.current=a,o.useEffect(()=>()=>{s.current()},[])}function ye(a,s=500){const n=o.useRef();we(()=>{n.current&&n.current.cancel()});const r=o.useMemo(()=>{const i=J(a,s),l=(...u)=>i(...u);return l.cancel=()=>{i.cancel()},l.isPending=()=>!!n.current,l.flush=()=>i.flush(),l},[a,s]);return o.useEffect(()=>{n.current=J(a,s)},[a,s]),r}const Ne=()=>typeof window>"u"?!1:navigator.userAgent.toLowerCase().includes("mac"),v={Shift:"Shift",Ctrl:"Ctrl",Alt:"Alt",Cmd:"Cmd"},Te=a=>Object.values(v).includes(a);function Me(a,s){const n=o.useCallback(r=>{const i=Array.isArray(a)?a:[a],l=Ne();i.map(m=>m.split("+").map(d=>d.trim()).filter(Boolean)).some(m=>m.every(d=>{if(Te(d)){if(!r.getModifierState)return!1;switch(d){case v.Cmd:return l&&r.getModifierState("Meta")||!l&&r.getModifierState("Control");case v.Ctrl:return r.getModifierState("Control");case v.Alt:return r.getModifierState("Alt");case v.Shift:return r.getModifierState("Shift");default:return!1}}return r.key===d}))&&s()},[a,s]);o.useEffect(()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}),[n])}const P=o.forwardRef(({className:a,value:s,onChange:n,columnOptions:r,column:i,defaultColumn:l,onColumnChange:u,leftComponent:p,inputProps:m,...d},w)=>{const y=o.useRef(null),O=o.useRef(null),[B,_]=o.useState(""),[c,q]=o.useState(s||[]),[ae,E]=o.useState(i||l),[g,V]=o.useState(!1),se=t=>{requestAnimationFrame(()=>{!t&&document.activeElement!==y.current&&V(!1)})},ne=o.useMemo(()=>r&&typeof r[0]=="string"?r.map(t=>({value:t,label:t&&ee(t)})):r,[r]),ie=()=>{var t,h;(h=O.current)==null||h.scrollTo({left:(t=O.current)==null?void 0:t.scrollWidth})},j=t=>{q(t),n==null||n(t)},oe=t=>{j([...c,t]),_("")},K=t=>{j(c.filter((h,x)=>x!==t))},L=()=>{j([])},le=t=>{t.key==="Enter"&&B.trim()!==""&&oe(B.trim())},ce=t=>{var x;const h=(x=t.clipboardData)==null?void 0:x.getData("text/plain");if(console.log(h),h){const me=/\r\n|\r|\n/,de=h.split(me).map(k=>k.trim()).filter(k=>k!=="");j([...c,...de])}t.preventDefault()},ue=t=>{E(t),u==null||u(t)};return o.useEffect(()=>{q(s||[])},[s]),o.useEffect(()=>{E(i!==void 0?i:l)},[i,l]),o.useEffect(()=>{g&&ie()},[c,g]),Me("Escape",()=>{var t;V(!1),(t=y.current)==null||t.blur()}),e.jsxs(Se,{open:g,onOpenChange:se,children:[e.jsxs("div",{ref:w,className:C("flex h-10 border divide-x w-[620px] bg-bg-default border-border-default divide-border-default rounded-radius-md",a),...d,children:[p&&e.jsx("div",{className:"w-[44px] shrink-0 flex items-center justify-center ",children:p}),e.jsx(ve,{className:"w-40 shrink-0",options:ne,value:ae,isOptionSearchable:!1,onChange:ue,placeholder:"Select Column",noBorder:!0,noBorderHeightAdjusted:!0}),e.jsxs("div",{className:"flex overflow-hidden flex-1 gap-1 items-center pr-3",children:[e.jsxs("div",{ref:O,onClick:()=>{var t;(t=y.current)==null||t.focus()},className:"flex overflow-auto flex-1 gap-2 px-2 cursor-text",children:[c&&c.length>0&&e.jsx(e.Fragment,{children:g?e.jsx("div",{className:"flex gap-2 items-center",children:c==null?void 0:c.map((t,h)=>e.jsx(M,{className:"max-w-[106px]",rightComponent:e.jsx(R,{onClose:()=>{K(h)}}),children:e.jsx(A,{fluid:!0,maxWidth:74,middleTruncate:!0,withTooltip:!0,middleTruncateEndLength:6,children:t})},`${t}-${h}`))}):e.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[c==null?void 0:c.slice(0,3).map((t,h)=>e.jsx(M,{className:"max-w-[88px]",rightComponent:e.jsx(R,{onClose:x=>{x.stopPropagation(),x.preventDefault(),K(h)}}),children:e.jsx(A,{fluid:!0,maxWidth:56,middleTruncate:!0,withTooltip:!0,middleTruncateEndLength:4,children:t})},`${t}-${h}`)),(c==null?void 0:c.length)>3&&e.jsxs(M,{className:"whitespace-nowrap",children:["+",c.length-3," more"]})]})}),e.jsx(te,{ref:y,placeholder:c.length>0?" ":"Multi Search",...m,containerClassName:C(m==null?void 0:m.containerClassName,"border-none h-[38px] px-0",{"min-w-[160px]":g}),value:B,onChange:t=>{_(t.target.value)},onClear:()=>{L()},onKeyDown:le,onFocus:()=>{V(!0)},onPaste:ce})]}),c.length>0&&e.jsx(F,{variant:"nude",theme:"neutral",size:"xs",icon:e.jsx(b,{icon:e.jsx(xe,{}),size:"lg",className:"text-text-weaker"}),iconOnly:!0,onClick:L})]})]}),e.jsx(ge,{className:"w-0 h-0",tabIndex:-1}),e.jsx(be,{value:c,onValueChange:j})]})});P.displayName="MultiSearchInput";const be=({value:a,onValueChange:s})=>{const n=i=>{s(a.filter((l,u)=>u!==i))},r=()=>{s([])};return e.jsxs(je,{side:"bottom",align:"start",sideOffset:-6,className:"px-1 py-3 space-y-2 w-[620px]",onOpenAutoFocus:i=>{i.preventDefault()},children:[e.jsxs("div",{className:"px-2 h-[23px] flex justify-between items-center",children:[e.jsx(S,{variant:"semiBold",className:"uppercase text-text-weaker",children:"Searching For"}),e.jsx(F,{variant:"link",size:"xs",className:"max-w-[47px]",onClick:r,children:"Clear all"})]}),e.jsx("div",{className:"max-h-[256px] overflow-auto flex flex-wrap gap-2",children:a.map((i,l)=>e.jsx(M,{rightComponent:e.jsx(R,{onClose:()=>n(l)}),className:"max-w-full",children:e.jsx(A,{fluid:!0,maxWidth:"max-w-full",children:i})},l))}),e.jsxs("div",{className:"flex justify-between pt-2 pr-3 pl-2 border-t border-border-default",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(D,{theme:"neutral",variant:"outline",children:"Esc"}),e.jsx(S,{className:"text-text-weaker",children:"to close"})]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(S,{children:"Press"}),e.jsx(D,{theme:"neutral",variant:"outline",children:"Shift ⇧"}),e.jsx(S,{children:"+"}),e.jsx(D,{theme:"neutral",variant:"outline",children:"Enter ↵"}),e.jsx(S,{className:"text-text-weaker",children:"to add new search parameter"})]})]})]})};P.__docgenInfo={description:"",methods:[],displayName:"MultiSearchInput"};const f={Basic:"basic",Multi:"multi"},I=({className:a,containerClassName:s,basicSearchProps:n,multiSearchProps:r,searchType:i=f.Basic,onSearchTypeChange:l})=>{const[u,p]=o.useState(i||f.Basic),m=w=>{p(w),l==null||l(w)};o.useEffect(()=>{p==null||p(i)},[i]);const d=()=>{switch(u){case f.Basic:return e.jsx(re,{...n,className:C(a,n==null?void 0:n.className),leftComponent:e.jsx(Ce,{className:"border-r-0 px-2.5",children:e.jsx(U,{value:u,onChange:m})})});case f.Multi:return e.jsx(P,{...r,leftComponent:e.jsx(U,{value:u,onChange:m})});default:return null}};return e.jsx("div",{className:C("h-10",s),children:d()})},U=({value:a,onChange:s})=>e.jsxs(pe,{children:[e.jsx(he,{asChild:!0,children:e.jsx(F,{variant:"outline",theme:"neutral",size:"xs",className:"gap-0 px-0 h-6 min-w-6",icon:e.jsx(b,{icon:a===f.Basic?e.jsx($,{}):e.jsx(z,{}),className:"text-text-accent"})})}),e.jsxs(fe,{className:"w-[176px]",side:"bottom",align:"start",alignOffset:-11,sideOffset:14,children:[e.jsxs(W,{onSelect:()=>{s(f.Basic)},className:"flex gap-2 text-text-weak",children:[e.jsx(b,{icon:e.jsx($,{})}),e.jsx(S,{variant:"medium",children:"Basic Search"})]}),e.jsxs(W,{onSelect:()=>{s(f.Multi)},className:"flex gap-2 text-text-weak",children:[e.jsx(b,{icon:e.jsx(z,{})}),e.jsx(S,{variant:"medium",children:"Multi Search"})]})]})]}),re=o.forwardRef(({delay:a=500,value:s,onChange:n,...r},i)=>{const[l,u]=o.useState(s),p=ye(n||(()=>{}),a),m=d=>{u(d.target.value),p(d)};return o.useEffect(()=>{u(s)},[s]),e.jsx(te,{ref:i,type:"text",clearable:!0,...r,value:l,onChange:m,containerClassName:C("w-[620px]",r.containerClassName),placeholder:r.placeholder?r.rawPlaceholder?r.placeholder:ee(r.placeholder):"Search"})});re.displayName="BasicSearchInput";I.__docgenInfo={description:"",methods:[],displayName:"MultiSearch",props:{className:{required:!1,tsType:{name:"string"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},basicSearchProps:{required:!1,tsType:{name:"Omit",elements:[{name:"BasicSearchProps"},{name:"literal",value:'"leftComponent"'}],raw:'Omit<BasicSearchProps, "leftComponent">'},description:""},multiSearchProps:{required:!1,tsType:{name:"Omit",elements:[{name:"MultiSearchInputProps"},{name:"literal",value:'"leftComponent"'}],raw:'Omit<MultiSearchInputProps, "leftComponent">'},description:""},searchType:{required:!1,tsType:{name:"SearchType"},description:"",defaultValue:{value:'"basic"',computed:!1}},onSearchTypeChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(searchType: SearchType) => void",signature:{arguments:[{type:{name:"SearchType"},name:"searchType"}],return:{name:"void"}}},description:""}}};const gt={title:"Xenith UI/Components/MultiSearch",component:I,tags:["autodocs"]},N={args:{multiSearchProps:{columnOptions:["id","name","email"],defaultColumn:"id"}},render:a=>e.jsx("div",{className:"w-[800px] h-[400px]",children:e.jsx(I,{...a})})},T={args:{multiSearchProps:{columnOptions:["id","name","email"],defaultColumn:"id"}},render:a=>{const[s,n]=o.useState(""),[r,i]=o.useState([]),[l,u]=o.useState(""),[p,m]=o.useState(f.Basic);return e.jsxs("div",{className:"w-[800px] h-[400px]",children:[e.jsx(I,{...a,basicSearchProps:{value:s,onChange:d=>n(d.target.value),onClear:()=>n(""),...a.basicSearchProps},multiSearchProps:{value:r,onChange:i,column:l,onColumnChange:u,...a.multiSearchProps},searchType:p,onSearchTypeChange:m}),e.jsx("pre",{children:JSON.stringify({search:s,multiSearchValue:r,multiSearchColumn:l,searchType:p},null,2)})]})}};var H,X,G;N.parameters={...N.parameters,docs:{...(H=N.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    multiSearchProps: {
      columnOptions: ["id", "name", "email"],
      defaultColumn: "id"
    }
  },
  render: args => <div className="w-[800px] h-[400px]">
      <MultiSearch {...args} />
    </div>
}`,...(G=(X=N.parameters)==null?void 0:X.docs)==null?void 0:G.source}}};var Q,Y,Z;T.parameters={...T.parameters,docs:{...(Q=T.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {
    multiSearchProps: {
      columnOptions: ["id", "name", "email"],
      defaultColumn: "id"
    }
  },
  render: args => {
    const [search, setSearch] = useState<string>("");
    const [multiSearchValue, setMultiSearchValue] = useState<string[]>([]);
    const [multiSearchColumn, setMultiSearchColumn] = useState<string>("");
    const [searchType, setSearchType] = useState<SearchType>(SearchType.Basic);
    return <div className="w-[800px] h-[400px]">
        <MultiSearch {...args} basicSearchProps={{
        value: search,
        onChange: e => setSearch(e.target.value),
        onClear: () => setSearch(""),
        ...args.basicSearchProps
      }} multiSearchProps={{
        value: multiSearchValue,
        onChange: setMultiSearchValue,
        column: multiSearchColumn,
        onColumnChange: setMultiSearchColumn,
        ...args.multiSearchProps
      }} searchType={searchType} onSearchTypeChange={setSearchType} />

        <pre>
          {JSON.stringify({
          search,
          multiSearchValue,
          multiSearchColumn,
          searchType
        }, null, 2)}
        </pre>
      </div>;
  }
}`,...(Z=(Y=T.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};const jt=["Default","WithControlledValue"];export{N as Default,T as WithControlledValue,jt as __namedExportsOrder,gt as default};
