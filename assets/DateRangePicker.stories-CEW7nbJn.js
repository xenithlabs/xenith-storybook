import{j as s}from"./jsx-runtime-DR9Q75dM.js";import{r as l}from"./index-DRjF_FHU.js";import{g as te,s as P,a as E,f as u}from"./format-C_zMm074.js";import{t as h}from"./constructFrom-rJN6zrQ_.js";import{e as z,a as se}from"./endOfMonth-BsYXtoie.js";import{c as w}from"./cn-C-5SdYIA.js";import{I as x}from"./Icon-Bs9G1Rwk.js";import{a as ne}from"./spinner-fxOeMmbK.js";import{F as re}from"./chevron-right-BqZwpdvf.js";import{F as q}from"./calendar-lcr2z1-P.js";import{F as ae}from"./check-rKbD1QKS.js";import{B as f}from"./Button-X8fnom3X.js";import{T as y}from"./Text-BYjIVLkz.js";import{D as T}from"./Divider-CVEwzqm3.js";import{s as oe}from"./differenceInCalendarDays-akuTVAtC.js";import{P as C,a as F,b as _}from"./Popover-jvvk1f8v.js";import{C as ie}from"./Calendar-DA_L1uDo.js";import"./index-Bb4qSo10.js";import"./index-HZDBD2ik.js";import"./styles-BNEhTmYy.js";import"./chevron-down-DqISSPB-.js";import"./index-DuXoWBk8.js";import"./index-CxRLcT2J.js";import"./index-DdILnG7L.js";import"./index-CWbDPhO_.js";import"./index-qtGI3euC.js";import"./index-CxZrjbHI.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";import"./chevron-left-rLDlePxE.js";function H(t){const e=h(t),n=e.getMonth(),o=n-n%3;return e.setMonth(o,1),e.setHours(0,0,0,0),e}function A(t){const e=h(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Q(t){const e=h(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function W(t,e){var j,g;const n=te(),o=n.weekStartsOn??((g=(j=n.locale)==null?void 0:j.options)==null?void 0:g.weekStartsOn)??0,i=h(t),p=i.getDay(),m=(p<o?-7:0)+6-(p-o);return i.setDate(i.getDate()+m),i.setHours(23,59,59,999),i}function $(t){const e=h(t),n=e.getMonth(),o=n-n%3+3;return e.setMonth(o,0),e.setHours(23,59,59,999),e}const ce={"This week":me,"This month":le,"This quarter":de,"This year":fe,"Last week":ue,"Last month":pe,"Last quarter":ge,"Last year":xe};function me(){const t=new Date,e=P(t),n=W(t);return{from:e,to:n}}function le(){const t=new Date,e=A(t),n=z(t);return{from:e,to:n}}function de(){const t=new Date,e=H(t),n=$(t);return{from:e,to:n}}function fe(){const t=new Date,e=E(t),n=Q(t);return{from:e,to:n}}function ue(){const t=new Date,e=P(t),n=W(t);return e.setDate(e.getDate()-7),n.setDate(n.getDate()-7),{from:e,to:n}}function pe(){const t=new Date,e=A(t),n=z(t);return e.setMonth(e.getMonth()-1),n.setMonth(n.getMonth()-1),{from:e,to:n}}function ge(){const t=new Date,e=H(t),n=$(t);return e.setMonth(e.getMonth()-3),n.setMonth(n.getMonth()-3),{from:e,to:n}}function xe(){const t=new Date,e=E(t),n=Q(t);return e.setFullYear(e.getFullYear()-1),n.setFullYear(n.getFullYear()-1),{from:e,to:n}}const B=({label:t,startDate:e,endDate:n,startDateFormat:o="dd MMM",endDateFormat:i="dd MMM yyyy",selected:p,onClick:m})=>s.jsxs(f,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",onClick:()=>m&&m({from:e,to:n}),children:[s.jsx(y,{variant:"regular",children:t}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(y,{variant:"regular",className:"text-text-weak",children:[u(e,o)," - ",u(n,i)]}),p?s.jsx(x,{icon:s.jsx(ae,{}),className:"text-text-accent"}):s.jsx("div",{className:"w-4 h-4"})]})]});B.__docgenInfo={description:"",methods:[],displayName:"DateRangeTemplate",props:{label:{required:!0,tsType:{name:"string"},description:""},startDate:{required:!0,tsType:{name:"Date"},description:""},endDate:{required:!0,tsType:{name:"Date"},description:""},startDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM"',computed:!1}},endDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM yyyy"',computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dateRange: DateRange) => void",signature:{arguments:[{type:{name:"DateRange"},name:"dateRange"}],return:{name:"void"}}},description:""}}};const v=()=>({from:new Date,to:new Date}),V=({value:t,onChange:e,required:n,fromDate:o,toDate:i,error:p,dateFormat:m,...j})=>{const[g,S]=l.useState(!1),[c,O]=l.useState(t),[G,k]=l.useState(!1),[r,N]=l.useState(v()),U=l.useMemo(()=>{if(o&&i)return{before:o,after:i};if(o)return{before:o};if(i)return{after:i}},[o,i]),X=l.useMemo(()=>Object.entries(ce).map(([a,d])=>({label:a,range:d()})),[]),J=a=>!(c!=null&&c.from)||!(c!=null&&c.to)?!1:u(c.from,"yyyy-MM-dd")===u(a.from,"yyyy-MM-dd")&&u(c.to,"yyyy-MM-dd")===u(a.to,"yyyy-MM-dd"),K=a=>m?Array.isArray(m)?m[a==="from"?0:1]:m:"dd MMM yyyy",M=(a,d)=>a?u(a,K(d)):"",Z=a=>{O(a),e==null||e(a),N(v())},ee=a=>{O(a),e==null||e(a),k(!1),S(!1)},b=a=>{k(a),a||N(v())};return l.useEffect(()=>{O(t)},[t]),s.jsxs(C,{open:g,onOpenChange:S,children:[s.jsx(F,{asChild:!0,children:s.jsx(f,{variant:"outline",theme:"neutral",className:w("justify-start text-left font-normal items-center px-3 gap-5",!c&&"text-muted-foreground",{"border-border-critical":p}),icon:s.jsx(x,{icon:s.jsx(ne,{}),size:"lg",className:w("text-text-weak",{"rotate-180":!g})}),iconPosition:"right",children:c?s.jsxs(s.Fragment,{children:[M(c.from,"from")," -"," ",M(c.to,"to")]}):"Select Date Range"})}),s.jsx(_,{className:"p-1",align:"start",style:{width:"320px"},children:s.jsxs("div",{className:"flex flex-col",children:[X.map(({label:a,range:d},R)=>s.jsxs(l.Fragment,{children:[s.jsx(B,{label:a,startDate:d.from,endDate:d.to,onClick:Z,selected:J(d)}),R===3&&s.jsx(T,{className:"my-1"})]},R)),s.jsx(T,{className:"my-1"}),s.jsxs(C,{open:G,onOpenChange:b,children:[s.jsx(F,{asChild:!0,children:s.jsxs(f,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",children:[s.jsx(y,{variant:"regular",children:"Custom Range"}),s.jsx(x,{icon:s.jsx(re,{}),className:"text-text-weak"})]})}),s.jsxs(_,{side:"right",sideOffset:8,className:"p-0",children:[s.jsxs("div",{className:"p-3 mb-1 space-y-1",children:[s.jsx(y,{variant:"medium",children:"Custom range"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(f,{variant:"outline",theme:"neutral",className:w("justify-start text-left font-normal items-center flex-1",{"text-text-weaker":!(r!=null&&r.from)}),icon:s.jsx(x,{icon:s.jsx(q,{}),className:"text-text-weak"}),children:r!=null&&r.from?M(r.from,"from"):"Start Date"}),s.jsx(y,{variant:"medium",children:"-"}),s.jsx(f,{variant:"outline",theme:"neutral",className:w("justify-start text-left font-normal items-center flex-1",{"text-text-weaker":!(r!=null&&r.to)}),icon:s.jsx(x,{icon:s.jsx(q,{}),className:"text-text-weak"}),children:r!=null&&r.to?M(r.to,"to"):"End Date"})]})]}),s.jsx(ie,{autoFocus:!0,mode:"range",selected:r,onSelect:N,required:n,disabled:U,startMonth:o,endMonth:i,numberOfMonths:2,className:"border-0 shadow-none",...j}),s.jsx(T,{className:"my-1"}),s.jsxs("div",{className:"flex justify-end gap-4 p-3",children:[s.jsx(f,{variant:"outline",theme:"neutral",size:"sm",className:"w-[70px]",onClick:()=>{b(!1)},children:"Cancel"}),s.jsx(f,{size:"sm",className:"w-[70px]",disabled:!(r!=null&&r.from)||!(r!=null&&r.to),onClick:()=>{const a=r&&{from:r.from&&oe(new Date(r.from)),to:r.to&&se(new Date(r.to))};ee(a)},children:"Save"})]})]})]})]})})]})};V.__docgenInfo={description:"",methods:[],displayName:"DateRangePicker",props:{value:{required:!1,tsType:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: DateRange | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},error:{required:!1,tsType:{name:"boolean"},description:""},dateFormat:{required:!1,tsType:{name:"union",raw:"string | [string, string]",elements:[{name:"string"},{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]}]},description:""}}};const Ge={title:"Xenith UI/Components/Date Range Picker",component:V,decorators:t=>s.jsx("div",{className:"py-10 w-[600px] h-[400px]  pb-40",children:s.jsx(t,{})}),tags:["autodocs"]},D={args:{onChange:t=>{var e,n;console.log("value",t),console.log("ISO string",{from:(e=t==null?void 0:t.from)==null?void 0:e.toISOString(),to:(n=t==null?void 0:t.to)==null?void 0:n.toISOString()})}}};var I,Y,L;D.parameters={...D.parameters,docs:{...(I=D.parameters)==null?void 0:I.docs,source:{originalSource:`{
  args: {
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(L=(Y=D.parameters)==null?void 0:Y.docs)==null?void 0:L.source}}};const Ue=["Default"];export{D as Default,Ue as __namedExportsOrder,Ge as default};
