import{j as t}from"./jsx-runtime-DR9Q75dM.js";import{r as s}from"./index-DRjF_FHU.js";import{D as E,a as I,b as L,$ as B}from"./DropdownMenu-XER5NlNu.js";import{I as w}from"./Icon-CTnhpE1d.js";import{c as b}from"./cn-8RyR4BqC.js";import{F as A}from"./chevron-right-D4FvqfWr.js";import{F as V}from"./check-C0C6JGvp.js";import{F as U}from"./clock-DRhx3Wks.js";import{u as _,g as x,S as q}from"./useClickOutside-6UMK1lT4.js";import{T as p}from"./Text-C8HBwI4b.js";import{B as G}from"./Button-BymKk-hE.js";import{D as H}from"./Divider-CIm89-oy.js";const J=(n,a,o)=>{if(!a)return!0;const c=a.toLowerCase();return o.some(r=>{const f=n[r];return typeof f=="string"?f.toLowerCase().includes(c):!1})},O=s.forwardRef(({value:n,onChange:a,contentProps:o,className:c,placeholder:r,...f})=>{const[h,g]=s.useState(!1),[R,T]=s.useState(n),[M,N]=s.useState(),[u,k]=s.useState([]),[d,z]=s.useState(""),C=s.useRef(null),{basicOptions:i,fetchTimezoneOptions:S}=_(),F=e=>{T(x(e)),N(e),a&&a(x(e))},D=s.useCallback(e=>{if(!e)return t.jsx(p,{children:r||"Select timezone"});const l=i.includes(e)?e.name:e.zone,j=e.zone!=="UTC"?e.utc:"";return t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx(w,{icon:t.jsx(U,{})}),t.jsxs(p,{children:[l," ",j]})]})},[i,r]),y=s.useCallback((e,l)=>{const j=i.includes(e)?e.name:e.zone,v=e.zone!=="UTC"?e.utc.replace(/\(|\)/g,""):"";return t.jsxs("div",{className:b("relative flex gap-2 justify-between items-center p-2 pr-8 hover:bg-accent-weak group-hover:bg-accent-weak",{}),children:[t.jsx(p,{className:"text-text-default",children:j}),v&&t.jsx(p,{className:"text-text-weak",children:v}),l&&t.jsx(w,{icon:t.jsx(V,{}),className:"absolute right-2 text-text-accent"})]})},[i]),m=s.useMemo(()=>d?u.filter(e=>J(e,d,["name","zone","utc"])):u,[u,d]),$=s.useMemo(()=>Array.from(m.values()).some(e=>!i.includes(e)),[m,i]);return s.useEffect(()=>{n&&(T(n),N(u.find(e=>x(e)===n)))},[n,u]),s.useEffect(()=>{S().then(e=>{k(e)})},[S]),s.useEffect(()=>{h||z("")},[h]),s.useEffect(()=>{var e;(e=C.current)==null||e.focus()},[C]),t.jsxs(E,{...f,open:h,onOpenChange:g,children:[t.jsx(I,{asChild:!0,children:t.jsx(G,{variant:"nude",theme:"neutral",iconPosition:"right",icon:t.jsx(w,{icon:t.jsx(A,{})}),className:b("px-2 justify-between hover:bg-accent-weak hover:text-text-accent",c),children:D(M)})}),t.jsxs(L,{side:"right",align:"start",...o,className:b("max-h-[350px] w-[320px] p-0 overflow-hidden flex flex-col text-text-default",o==null?void 0:o.className),onCloseAutoFocus:e=>e.preventDefault(),children:[t.jsx(Q,{value:d,onChange:z,onEnterKeyDown:()=>{const e=Array.from(m.values())[0];e&&(F(e),g(!1))}}),t.jsx("div",{className:"flex flex-col overflow-auto py-1",children:m.map((e,l)=>t.jsxs(s.Fragment,{children:[t.jsx(B,{className:"focus:outline-none",onClick:()=>F(e),children:y(e,R===x(e))}),e.isBrowserTimezone&&$&&t.jsx(H,{className:"m-1 w-[calc(100%-8px)]"})]},l))})]})]})}),Q=({value:n,onChange:a,onEnterKeyDown:o})=>{const c=s.useRef(null);return s.useEffect(()=>{var r;(r=c.current)==null||r.focus()},[c]),t.jsx(q,{ref:c,autoFocus:!0,onClear:()=>a(""),value:n,onChange:r=>{a(r.target.value)},onKeyDown:r=>{r.code==="Enter"&&(o==null||o()),r.stopPropagation()},containerClassName:"border-0 rounded-b-none border-b border-border-default focus-within:border-border-default shadow-none"})};O.displayName="TimezoneDropdownMenu";O.__docgenInfo={description:"",methods:[],displayName:"TimezoneDropdownMenu"};export{O as T};
