import{j as l}from"./jsx-runtime-BhBAkL08.js";import{c as j}from"./cn-C-5SdYIA.js";import{F as b}from"./clock-DdwMB1Jq.js";import{r as g}from"./index-caxmlYbZ.js";import{a as A}from"./addDays-DUX3p28w.js";import{t as c,c as D}from"./constructFrom-rJN6zrQ_.js";import{d as E,m as H,a as O}from"./differenceInCalendarDays-akuTVAtC.js";import{a as R,e as $}from"./endOfMonth-BsYXtoie.js";import{T as q}from"./Text-D-wIA97j.js";import{I as L}from"./Icon-7BdkfswG.js";import"./index-D09aQd82.js";import"./styles-BNEhTmYy.js";import"./index-Bb4qSo10.js";function V(n,s){const e=c(n);if(isNaN(s))return D(n,NaN);if(!s)return e;const t=e.getDate(),r=D(n,e.getTime());r.setMonth(e.getMonth()+s+1,0);const o=r.getDate();return t>=o?r:(e.setFullYear(r.getFullYear(),r.getMonth(),t),e)}function h(n,s){const{years:e=0,months:t=0,weeks:r=0,days:o=0,hours:i=0,minutes:a=0,seconds:u=0}=s,d=c(n),f=t||e?V(d,t+e*12):d,m=o||r?A(f,o+r*7):f,M=a+i*60,x=(u+M*60)*1e3;return D(n,m.getTime()+x)}function p(n,s){const e=c(n),t=c(s),r=e.getTime()-t.getTime();return r<0?-1:r>0?1:r}function W(n,s){const e=c(n),t=c(s),r=e.getFullYear()-t.getFullYear(),o=e.getMonth()-t.getMonth();return r*12+o}function k(n,s){const e=c(n),t=c(s);return e.getFullYear()-t.getFullYear()}function P(n,s){const e=c(n),t=c(s),r=F(e,t),o=Math.abs(E(e,t));e.setDate(e.getDate()-r*o);const i=+(F(e,t)===-r),a=r*(o-i);return a===0?0:a}function F(n,s){const e=n.getFullYear()-s.getFullYear()||n.getMonth()-s.getMonth()||n.getDate()-s.getDate()||n.getHours()-s.getHours()||n.getMinutes()-s.getMinutes()||n.getSeconds()-s.getSeconds()||n.getMilliseconds()-s.getMilliseconds();return e<0?-1:e>0?1:e}function T(n){return s=>{const t=(n?Math[n]:Math.trunc)(s);return t===0?0:t}}function _(n,s){return+c(n)-+c(s)}function B(n,s,e){const t=_(n,s)/H;return T(e==null?void 0:e.roundingMethod)(t)}function U(n,s,e){const t=_(n,s)/O;return T(e==null?void 0:e.roundingMethod)(t)}function X(n){const s=c(n);return+R(s)==+$(s)}function z(n,s){const e=c(n),t=c(s),r=p(e,t),o=Math.abs(W(e,t));let i;if(o<1)i=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-r*o);let a=p(e,t)===-r;X(c(n))&&o===1&&p(n,t)===1&&(a=!1),i=r*(o-Number(a))}return i===0?0:i}function G(n,s,e){const t=_(n,s)/1e3;return T(e==null?void 0:e.roundingMethod)(t)}function J(n,s){const e=c(n),t=c(s),r=p(e,t),o=Math.abs(k(e,t));e.setFullYear(1584),t.setFullYear(1584);const i=p(e,t)===-r,a=r*(o-+i);return a===0?0:a}function K(n){const s=c(n.start),e=c(n.end),t={},r=J(e,s);r&&(t.years=r);const o=h(s,{years:t.years}),i=z(e,o);i&&(t.months=i);const a=h(o,{months:t.months}),u=P(e,a);u&&(t.days=u);const d=h(a,{days:t.days}),f=B(e,d);f&&(t.hours=f);const m=h(d,{hours:t.hours}),M=U(e,m);M&&(t.minutes=M);const C=h(m,{minutes:t.minutes}),x=G(e,C);return x&&(t.seconds=x),t}const S=g.createContext({}),I=({initialDuration:n=1e4,step:s=1e3,onCountdownEnd:e=()=>{},children:t})=>{const r=g.useRef(),[o,i]=g.useState(n),a=()=>{i(0),r.current&&clearInterval(r.current),r.current=null},u=()=>{r.current&&clearInterval(r.current),r.current=setInterval(()=>{if(o<=0){a(),e();return}i(m=>m-s)},s)},d=()=>{a(),i(n),u()};g.useEffect(()=>(d(),()=>{a()}),[n]),g.useEffect(()=>{o<=0&&a()},[o]);const f=K({start:0,end:o});return l.jsx(S.Provider,{value:{hours:f.hours||0,minutes:f.minutes||0,seconds:f.seconds||0},children:t})},Y=({className:n,icon:s=l.jsx(L,{className:"text-text-warning",icon:l.jsx(b,{})}),...e})=>{const{hours:t,minutes:r,seconds:o}=g.useContext(S),i=String(t).padStart(2,"0"),a=String(r).padStart(2,"0"),u=String(o).padStart(2,"0"),d=t>0?`${i}:${a}:${u}`:`${a}:${u}`;return l.jsxs("div",{...e,className:j("text-text-warning flex items-center gap-1",n),children:[l.jsx("span",{className:"relative top-[2px]",children:s}),l.jsx(q,{variant:"semiBold",children:d})]})};I.__docgenInfo={description:"",methods:[],displayName:"Countdown",props:{initialDuration:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10000",computed:!1}},onCountdownEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1000",computed:!1}}},composes:["PropsWithChildren"]};Y.__docgenInfo={description:"",methods:[],displayName:"CountdownText",props:{icon:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:'<Icon className="text-text-warning" icon={<ClockIcon />} />',computed:!1}}},composes:["HTMLAttributes"]};const le={title:"Xenith UI/Components/Countdown",component:I,tags:["autodocs"],args:{initialDuration:3*60*60*1e3,step:1e3,onCountdownEnd:()=>{}},render:n=>l.jsx(I,{...n,children:l.jsx(Y,{})})},y={};var N,v,w;y.parameters={...y.parameters,docs:{...(N=y.parameters)==null?void 0:N.docs,source:{originalSource:"{}",...(w=(v=y.parameters)==null?void 0:v.docs)==null?void 0:w.source}}};const me=["Default"];export{y as Default,me as __namedExportsOrder,le as default};
