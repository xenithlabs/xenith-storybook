import{j as n}from"./jsx-runtime-DR9Q75dM.js";import{r as m}from"./index-DRjF_FHU.js";import{e as be}from"./endOfDay-BZ5bvh5Y.js";import{t as ce,s as qe}from"./differenceInCalendarDays-C3EGPyW5.js";import{s as le,a as ue,f as u}from"./format-DeQ6fwDa.js";import{e as de,s as fe,a as pe,i as z,T as Q}from"./Calendar-Cq4tQa1v.js";import{e as ge}from"./endOfMonth-CBUZ-2Pf.js";import{c as S}from"./cn-C-5SdYIA.js";import{a as B}from"./spinner-fxOeMmbK.js";import{F as Ie}from"./chevron-right-BqZwpdvf.js";import{F as We}from"./check-rKbD1QKS.js";import{B as p}from"./Button-iG-w-ZO3.js";import{T as d}from"./Text-BYjIVLkz.js";import{I as k}from"./Icon-Bs9G1Rwk.js";import{D as $}from"./DateTimePicker-Ds9ynDGu.js";import{P as H,a as U,b as Z}from"./Popover-jvvk1f8v.js";import{D as I}from"./Divider-CVEwzqm3.js";import"./styles-BNEhTmYy.js";import"./index-Bb4qSo10.js";import"./chevron-left-rLDlePxE.js";import"./index-HZDBD2ik.js";import"./chevron-down-DqISSPB-.js";import"./calendar-lcr2z1-P.js";import"./clock-C-cyK6yc.js";import"./useClickOutside-BeKAHFKi.js";import"./search-CWRmq9WO.js";import"./close-CAN3cq4E.js";import"./stringCase-DaZl3p-i.js";import"./index-DuXoWBk8.js";import"./index-CxRLcT2J.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-CAHntWCK.js";import"./Heading-BbwmavmP.js";import"./Checkbox-CY4DEde6.js";import"./index-Bu1UD4WD.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";import"./index-DdILnG7L.js";import"./index-CWbDPhO_.js";import"./index-qtGI3euC.js";import"./index-CxZrjbHI.js";function he(e,t){const r=ce(e,t==null?void 0:t.in),c=r.getMonth(),l=c-c%3;return r.setMonth(l,1),r.setHours(0,0,0,0),r}function ye(e,t){const r=ce(e,t==null?void 0:t.in),c=r.getMonth(),l=c-c%3+3;return r.setMonth(l,0),r.setHours(23,59,59,999),r}const Le={Today:Fe,"This week":Ve,"This month":Ee,"This quarter":_e,"This year":Ye,"Last week":Ae,"Last month":ze,"Last quarter":Qe,"Last year":Be};function Fe(){const e=new Date,t=qe(e),r=be(e);return{from:t,to:r}}function Ve(){const e=new Date,t=le(e),r=de(e);return{from:t,to:r}}function Ee(){const e=new Date,t=fe(e),r=ge(e);return{from:t,to:r}}function _e(){const e=new Date,t=he(e),r=ye(e);return{from:t,to:r}}function Ye(){const e=new Date,t=ue(e),r=pe(e);return{from:t,to:r}}function Ae(){const e=new Date,t=le(e),r=de(e);return t.setDate(t.getDate()-7),r.setDate(r.getDate()-7),{from:t,to:r}}function ze(){const e=new Date,t=fe(e),r=ge(e);return t.setMonth(t.getMonth()-1),r.setMonth(r.getMonth()-1),{from:t,to:r}}function Qe(){const e=new Date,t=he(e),r=ye(e);return t.setMonth(t.getMonth()-3),r.setMonth(r.getMonth()-3),{from:t,to:r}}function Be(){const e=new Date,t=ue(e),r=pe(e);return t.setFullYear(t.getFullYear()-1),r.setFullYear(r.getFullYear()-1),{from:t,to:r}}const xe=({label:e,startDate:t,endDate:r,startDateFormat:c="dd MMM yyyy",endDateFormat:l="dd MMM yyyy",selected:g,onClick:x})=>{const T=()=>`${u(t,c)} - ${u(r,l)}`;return n.jsxs(p,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",onClick:()=>x&&x({from:t,to:r}),children:[n.jsx(d,{variant:"regular",children:e}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(d,{variant:"regular",className:"text-text-weak",children:T()}),g?n.jsx(k,{icon:n.jsx(We,{}),className:"text-text-accent"}):n.jsx("div",{className:"w-4 h-4"})]})]})};xe.__docgenInfo={description:"",methods:[],displayName:"DateRangeTemplate",props:{label:{required:!0,tsType:{name:"string"},description:""},startDate:{required:!0,tsType:{name:"Date"},description:""},endDate:{required:!0,tsType:{name:"Date"},description:""},startDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM yyyy"',computed:!1}},endDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM yyyy"',computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dateRange: DateRange) => void",signature:{arguments:[{type:{name:"DateRange"},name:"dateRange"}],return:{name:"void"}}},description:""}}};const G=()=>({from:new Date,to:new Date}),N=({value:e,onChange:t,required:r,fromDate:c,toDate:l,rangeTemplates:g=Le,placeholder:x="Select Date Range",timePickerProps:T={},fromTimePickerProps:Te={},toTimePickerProps:De={},error:W,dateFormat:D,showTemplateInValue:we=!0})=>{const[O,L]=m.useState(!1),[s,b]=m.useState(e),[je,F]=m.useState(!1),[o,V]=m.useState(G()),Me=Math.floor(Object.keys(g).length/2)-1,[q,Se]=m.useState(),[w,h]=m.useState(),j=a=>{a&&w&&z(a,w)&&h(a),Se(a)},E=a=>{if(a!=null&&a.from&&(a!=null&&a.to)&&z(a.from,a.to)){V({from:a.from,to:a.from});return}V(a)},[ve,Re]=m.useState(320),y=m.useRef(),Ce=m.useMemo(()=>Object.entries(g).map(([a,i])=>({label:a,range:i()})),[]),_=a=>!(s!=null&&s.from)||!(s!=null&&s.to)?!1:u(s.from,"yyyy-MM-dd-hh-mm-ss")===u(a.from,"yyyy-MM-dd-hh-mm-ss")&&u(s.to,"yyyy-MM-dd-hh-mm-ss")===u(a.to,"yyyy-MM-dd-hh-mm-ss"),Y=m.useMemo(()=>{const i=Object.entries(g).map(([f,Oe])=>({label:f,range:Oe()})).find(f=>_(f.range));return i?i==null?void 0:i.label:"Custom"},[s]),Pe=a=>D?Array.isArray(D)?D[a==="from"?0:1]:D:Y==="Custom"?"dd MMM yyyy HH:mm:ss":"dd MMM yyyy",M=(a,i)=>a?u(a,Pe(i)):"",ke=a=>{b(a),t==null||t(a),E(G())},Ne=a=>{b(a),t==null||t(a),F(!1),L(!1)},A=a=>{F(a)};return m.useEffect(()=>{b(e),E(e)},[e]),m.useEffect(()=>{j(o==null?void 0:o.from),h(o==null?void 0:o.to)},[o]),m.useLayoutEffect(()=>{var a;if(y){const i=(a=y.current)==null?void 0:a.getBoundingClientRect();Re((i==null?void 0:i.width)||320)}},[y]),n.jsxs(H,{open:O,onOpenChange:L,children:[n.jsx(U,{asChild:!0,children:we?n.jsx(p,{ref:y,variant:"outline",theme:"neutral",innerClassName:"justify-between w-full",className:S("flex text-left font-normal items-center px-3 gap-5 w-full justify-between bg-bg-default",!s&&"text-muted-foreground",{"border-border-critical":W}),icon:n.jsx(k,{icon:n.jsx(B,{}),size:"lg",className:S("text-text-weak",{"rotate-180":!O})}),iconPosition:"right",children:s?n.jsxs(n.Fragment,{children:[n.jsx(d,{variant:"regular",children:Y}),n.jsx("div",{className:"flex items-center gap-2 ml-auto",children:n.jsxs(d,{variant:"regular",className:"text-text-weak",children:[M(s==null?void 0:s.from,"from")," - ",M(s==null?void 0:s.to,"to")]})})]}):x}):n.jsx(p,{ref:y,variant:"outline",theme:"neutral",innerClassName:"w-full",className:S("justify-start text-left font-normal items-center px-3 gap-5 w-full bg-bg-default",!s&&"text-muted-foreground",{"border-border-critical":W}),icon:n.jsx(k,{icon:n.jsx(B,{}),size:"lg",className:S("text-text-weak",{"rotate-180":!O})}),iconPosition:"right",children:s?n.jsxs(n.Fragment,{children:[M(s.from,"from")," -"," ",M(s.to,"to")]}):"Select Date Range"})}),n.jsx(Z,{className:"p-1",align:"start",style:{width:`${ve}px`},children:n.jsxs("div",{className:"flex flex-col w-full",children:[Ce.map(({label:a,range:i},f)=>n.jsxs(m.Fragment,{children:[n.jsx(xe,{label:a,startDate:i.from,endDate:i.to,onClick:ke,selected:_(i)}),f===Me&&n.jsx(I,{className:"my-1"})]},f)),n.jsx(I,{className:"my-1"}),n.jsxs(H,{open:je,onOpenChange:A,children:[n.jsx(U,{asChild:!0,children:n.jsxs(p,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",children:[n.jsx(d,{variant:"regular",children:"Custom Range"}),n.jsx(k,{icon:n.jsx(Ie,{}),className:"text-text-weak"})]})}),n.jsxs(Z,{side:"right",sideOffset:8,className:"p-0",children:[n.jsxs("div",{className:"p-3 flex gap-2",children:[n.jsxs("div",{className:"grid gap-1",children:[n.jsx(d,{variant:"medium",children:"From"}),n.jsx($,{withoutSaveButton:!0,autoFocus:!0,date:q,onDateChange:j,onChange:j,required:r,fromDate:c,toDate:l,className:"border-0 shadow-none",...T,...Te})]}),n.jsx("div",{className:"self-end mb-2",children:"-"}),n.jsxs("div",{className:"grid gap-1",children:[n.jsx(d,{variant:"medium",children:"To"}),n.jsx($,{withoutSaveButton:!0,autoFocus:!0,date:w,onChange:h,onDateChange:h,required:r,fromDate:q,toDate:l,className:"border-0 shadow-none",...T,...De})]})]}),n.jsx(I,{className:"my-1"}),n.jsxs("div",{className:"flex justify-end gap-4 p-3",children:[n.jsx(p,{variant:"outline",theme:"neutral",size:"sm",className:"w-[70px]",onClick:()=>{j(o==null?void 0:o.from),h(o==null?void 0:o.to),A(!1)},children:"Cancel"}),n.jsx(p,{size:"sm",className:"w-[70px]",disabled:!(o!=null&&o.from)||!(o!=null&&o.to),onClick:()=>{Ne(o&&{from:q,to:w})},children:"Apply"})]})]})]})]})})]})};N.__docgenInfo={description:"",methods:[],displayName:"DateRangePicker",props:{value:{required:!1,tsType:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},description:""},showTemplateInValue:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select Date Range"',computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: DateRange | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},rangeTemplates:{required:!1,tsType:{name:"RANGE_TEMPLATES"},description:"",defaultValue:{value:`{
  Today: getTodayRange,
  "This week": getThisWeekRange,
  "This month": getThisMonthRange,
  "This quarter": getThisQuarterRange,
  "This year": getThisYearRange,
  "Last week": getLastWeekRange,
  "Last month": getLastMonthRange,
  "Last quarter": getLastQuarterRange,
  "Last year": getLastYearRange,
}`,computed:!1}},toDate:{required:!1,tsType:{name:"Date"},description:""},timePickerProps:{required:!1,tsType:{name:"Partial",elements:[{name:"ReactComponentPropsWithoutRef",raw:"React.ComponentPropsWithoutRef<typeof DateTimePicker>",elements:[{name:"DateTimePicker"}]}],raw:`Partial<
  React.ComponentPropsWithoutRef<typeof DateTimePicker>
>`},description:"",defaultValue:{value:"{}",computed:!1}},fromTimePickerProps:{required:!1,tsType:{name:"Partial",elements:[{name:"ReactComponentPropsWithoutRef",raw:"React.ComponentPropsWithoutRef<typeof DateTimePicker>",elements:[{name:"DateTimePicker"}]}],raw:`Partial<
  React.ComponentPropsWithoutRef<typeof DateTimePicker>
>`},description:"",defaultValue:{value:"{}",computed:!1}},toTimePickerProps:{required:!1,tsType:{name:"Partial",elements:[{name:"ReactComponentPropsWithoutRef",raw:"React.ComponentPropsWithoutRef<typeof DateTimePicker>",elements:[{name:"DateTimePicker"}]}],raw:`Partial<
  React.ComponentPropsWithoutRef<typeof DateTimePicker>
>`},description:"",defaultValue:{value:"{}",computed:!1}},error:{required:!1,tsType:{name:"boolean"},description:""},dateFormat:{required:!1,tsType:{name:"union",raw:"string | [string, string]",elements:[{name:"string"},{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]}]},description:""}}};const qt={title:"Xenith UI/Components/Date Range Picker",component:N,decorators:e=>n.jsx("div",{className:"py-10 w-[600px] h-[400px]  pb-40",children:n.jsx(e,{})}),tags:["autodocs"]},v={args:{onChange:e=>{var t,r;console.log("value",e),console.log("ISO string",{from:(t=e==null?void 0:e.from)==null?void 0:t.toISOString(),to:(r=e==null?void 0:e.to)==null?void 0:r.toISOString()})}}},R={args:{showTemplateInValue:!0,onChange:e=>{var t,r;console.log("value",e),console.log("ISO string",{from:(t=e==null?void 0:e.from)==null?void 0:t.toISOString(),to:(r=e==null?void 0:e.to)==null?void 0:r.toISOString()})}}},C={render:e=>{const[t,r]=m.useState({from:new Date,to:new Date});return n.jsx(N,{...e,value:t,onChange:c=>r(c)})}},P={render:e=>{const[t,r]=m.useState({from:new Q,to:new Q});return n.jsx(N,{...e,value:t,onChange:c=>r(c)})}};var X,J,K;v.parameters={...v.parameters,docs:{...(X=v.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(K=(J=v.parameters)==null?void 0:J.docs)==null?void 0:K.source}}};var ee,te,re;R.parameters={...R.parameters,docs:{...(ee=R.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    showTemplateInValue: true,
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(re=(te=R.parameters)==null?void 0:te.docs)==null?void 0:re.source}}};var ne,ae,se;C.parameters={...C.parameters,docs:{...(ne=C.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  render: args => {
    const [value, setValue] = useState<DateRange | undefined>({
      from: new Date(),
      to: new Date()
    });
    return <DateRangePicker {...args} value={value} onChange={v => setValue(v)} />;
  }
}`,...(se=(ae=C.parameters)==null?void 0:ae.docs)==null?void 0:se.source}}};var oe,ie,me;P.parameters={...P.parameters,docs:{...(oe=P.parameters)==null?void 0:oe.docs,source:{originalSource:`{
  render: args => {
    const [value, setValue] = useState<DateRange | undefined>({
      from: new TZDate(),
      to: new TZDate()
    });
    return <DateRangePicker {...args} value={value} onChange={v => setValue(v)} />;
  }
}`,...(me=(ie=P.parameters)==null?void 0:ie.docs)==null?void 0:me.source}}};const It=["Default","ShowTemplate","WithState","WithUTCState"];export{v as Default,R as ShowTemplate,C as WithState,P as WithUTCState,It as __namedExportsOrder,qt as default};
