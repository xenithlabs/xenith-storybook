import{j as e}from"./jsx-runtime-DR9Q75dM.js";import{r as o}from"./index-DRjF_FHU.js";import{c as V}from"./cn-C-5SdYIA.js";import{F as z}from"./calendar-lcr2z1-P.js";import{F as B}from"./clock-C-cyK6yc.js";import{D as $}from"./Divider-CVEwzqm3.js";import{P as G,a as J,b as K}from"./Popover-jvvk1f8v.js";import{B as F}from"./Button-iG-w-ZO3.js";import{I as P}from"./Icon-Bs9G1Rwk.js";import{C as Q}from"./Calendar-Cq4tQa1v.js";import{T as j}from"./Text-BYjIVLkz.js";import{I as y}from"./useClickOutside-BeKAHFKi.js";import{f as W}from"./format-DeQ6fwDa.js";const X=m=>{if(m)return m},Y=({date:m,fromDate:c,toDate:u,onChange:l,error:R,timeError:d,onDateChange:N,dateTransformer:r=X,timeMessage:C,withoutSaveButton:M=!1,popoverProps:H,formatFn:L=W,...U})=>{var I,q,w;const[b,T]=o.useState(!1),[a,_]=o.useState(r(m)?r(m):void 0),t=o.useMemo(()=>{if(a)return r(a)},[r,m,a]),p=n=>{N&&N(n),_(n)},[g,k]=o.useState(((I=r(t))==null?void 0:I.getHours().toString())??"00"),[f,A]=o.useState(((q=r(t))==null?void 0:q.getMinutes().toString())??"00"),[x,D]=o.useState(((w=r(t))==null?void 0:w.getSeconds().toString())??"00"),h=n=>{const i=Math.min(Math.max(Number(n),0),23);k(String(i).padStart(2,"0"))},v=n=>{const i=Math.min(Math.max(Number(n),0),59);A(String(i).padStart(2,"0"))},S=n=>{const i=Math.min(Math.max(Number(n),0),59);D(String(i).padStart(2,"0"))},E=o.useMemo(()=>{if(c&&u)return{before:c,after:u};if(c)return{before:c};if(u)return{after:u}},[c,u]);return o.useEffect(()=>{const n=t==null?void 0:t.getTime(),i=a==null?void 0:a.getTime();n!==i&&(p(t??void 0),h((t==null?void 0:t.getHours().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),v((t==null?void 0:t.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),S((t==null?void 0:t.getSeconds().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"))},[t==null?void 0:t.getTime(),b,a]),o.useEffect(()=>{if(!a)return;const n=Math.min(Math.max(Number(g),0),23),i=Math.min(Math.max(Number(f),0),59),O=Math.min(Math.max(Number(x),0),59),s=r(a);s==null||s.setHours(n),s==null||s.setMinutes(i),s==null||s.setSeconds(O),(s==null?void 0:s.getTime())!==a.getTime()&&(h((s==null?void 0:s.getHours().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),v((s==null?void 0:s.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),S((s==null?void 0:s.getSeconds().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),p(s),M&&(l==null||l(s)))},[g,f,x,r,a,t==null?void 0:t.getTime()]),e.jsxs(G,{open:b,onOpenChange:T,children:[e.jsx(J,{asChild:!0,children:e.jsx(F,{variant:"outline",theme:"neutral",className:V("justify-start text-left font-normal items-center",!a&&"text-muted-foreground",{"border-border-critical":R}),icon:e.jsx(P,{icon:e.jsx(z,{})}),children:t?L(t,"dd MMM yyy HH:mm:ss"):e.jsx("div",{className:"text-text-weaker",children:U.placeholder??"Pick a date"})})}),e.jsx(K,{className:"w-auto p-0",...H,children:e.jsxs("div",{className:"grid p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(Q,{mode:"single",disabled:E,startMonth:c,defaultMonth:a,endMonth:u,selected:a,onSelect:p,autoFocus:!0,className:"p-0 pt-1  border-0 shadow-none"}),e.jsxs("div",{className:"grid gap-[6px]",children:[e.jsx(j,{variant:"medium",children:"Time"}),e.jsxs("div",{className:"flex gap-2 shadow-input rounded-md border items-center px-3",children:[e.jsx("div",{children:e.jsx(P,{icon:e.jsx(B,{}),size:"lg",className:"relative top-[2px]"})}),e.jsxs("div",{className:"flex justify-center w-full",children:[e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(y,{type:"number",value:g.padStart(2,"0"),onChange:n=>h(n.target.value),min:0,onFocus:n=>n.target.select(),max:23,containerClassName:" border-0 shadow-none",className:"text-center appearance-none",placeholder:"00",error:d})}),e.jsx(j,{className:"flex items-center h-10",children:":"}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(y,{type:"number",value:f.padStart(2,"0"),onChange:n=>v(n.target.value),onFocus:n=>n.target.select(),min:0,max:59,containerClassName:" border-0 shadow-none",className:"text-center appearance-none",placeholder:"00",error:d})}),e.jsx(j,{className:"flex items-center h-10",children:":"}),e.jsx("div",{className:"flex flex-col items-center gap-1",children:e.jsx(y,{type:"number",value:x.padStart(2,"0"),onChange:n=>S(n.target.value),min:0,onFocus:n=>n.target.select(),max:59,containerClassName:" border-0 shadow-none",className:"text-center appearance-none",placeholder:"00",error:d})})]})]}),C]})]}),!M&&e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mt-6 mb-4"}),e.jsx("div",{className:"flex justify-end gap-4",children:e.jsx(F,{size:"sm",className:"w-[70px]",onClick:()=>{l==null||l(a),T(!1)},children:"Save"})})]})]})})]})};Y.__docgenInfo={description:"",methods:[],displayName:"DateTimePicker",props:{date:{required:!0,tsType:{name:"union",raw:"Date | undefined",elements:[{name:"Date"},{name:"undefined"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(date?: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""},dateTransformer:{required:!1,tsType:{name:"signature",type:"function",raw:"(date?: Date) => Date | undefined",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"union",raw:"Date | undefined",elements:[{name:"Date"},{name:"undefined"}]}}},description:"",defaultValue:{value:`(date?: Date | undefined) => {
  if (!date) {
    return undefined;
  }

  return date;
}`,computed:!1}},formatFn:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: DateArg<Date> | string, format: string) => string",signature:{arguments:[{type:{name:"union",raw:"DateArg<Date> | string",elements:[{name:"DateArg",elements:[{name:"Date"}],raw:"DateArg<Date>"},{name:"string"}]},name:"date"},{type:{name:"string"},name:"format"}],return:{name:"string"}}},description:"",defaultValue:{value:"format",computed:!0}},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},error:{required:!1,tsType:{name:"boolean"},description:""},onDateChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(date?: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:"Sometime you want to listen to the internal date change. use this props"},timeError:{required:!1,tsType:{name:"boolean"},description:""},timeMessage:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},popoverProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof PopoverContent>",elements:[{name:"PopoverContent"}]},description:""},withoutSaveButton:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["Omit"]};export{Y as D};
