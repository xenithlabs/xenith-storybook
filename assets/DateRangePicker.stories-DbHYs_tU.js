import{j as n}from"./jsx-runtime-DR9Q75dM.js";import{r as m}from"./index-DRjF_FHU.js";import{s as B}from"./differenceInCalendarDays-akuTVAtC.js";import{e as G,a as U}from"./endOfMonth-CcewPeqj.js";import{g as xe,s as X,a as J,f as p}from"./format-C_zMm074.js";import{t as S}from"./constructFrom-rJN6zrQ_.js";import{c as j}from"./cn-C-5SdYIA.js";import{I as w}from"./Icon-Bs9G1Rwk.js";import{a as _}from"./spinner-fxOeMmbK.js";import{F as he}from"./chevron-right-BqZwpdvf.js";import{F as L}from"./calendar-lcr2z1-P.js";import{F as ye}from"./check-rKbD1QKS.js";import{B as d}from"./Button-X8fnom3X.js";import{T as g}from"./Text-BYjIVLkz.js";import{D as k}from"./Divider-CVEwzqm3.js";import{P,a as Y,b as E}from"./Popover-jvvk1f8v.js";import{C as je}from"./Calendar-DA_L1uDo.js";import"./index-Bb4qSo10.js";import"./index-HZDBD2ik.js";import"./styles-BNEhTmYy.js";import"./chevron-down-DqISSPB-.js";import"./index-DuXoWBk8.js";import"./index-CxRLcT2J.js";import"./index-DdILnG7L.js";import"./index-CWbDPhO_.js";import"./index-qtGI3euC.js";import"./index-CxZrjbHI.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";import"./chevron-left-rLDlePxE.js";function K(t){const e=S(t),r=e.getMonth(),l=r-r%3;return e.setMonth(l,1),e.setHours(0,0,0,0),e}function Z(t){const e=S(t);return e.setDate(1),e.setHours(0,0,0,0),e}function ee(t){const e=S(t),r=e.getFullYear();return e.setFullYear(r+1,0,0),e.setHours(23,59,59,999),e}function te(t,e){var f,D;const r=xe(),l=r.weekStartsOn??((D=(f=r.locale)==null?void 0:f.options)==null?void 0:D.weekStartsOn)??0,c=S(t),x=c.getDay(),u=(x<l?-7:0)+6-(x-l);return c.setDate(c.getDate()+u),c.setHours(23,59,59,999),c}function ne(t){const e=S(t),r=e.getMonth(),l=r-r%3+3;return e.setMonth(l,0),e.setHours(23,59,59,999),e}const z={Today:we,"This week":Me,"This month":Se,"This quarter":De,"This year":Te,"Last week":Oe,"Last month":Ne,"Last quarter":ve,"Last year":be};function we(){const t=new Date,e=B(t),r=G(t);return{from:e,to:r}}function Me(){const t=new Date,e=X(t),r=te(t);return{from:e,to:r}}function Se(){const t=new Date,e=Z(t),r=U(t);return{from:e,to:r}}function De(){const t=new Date,e=K(t),r=ne(t);return{from:e,to:r}}function Te(){const t=new Date,e=J(t),r=ee(t);return{from:e,to:r}}function Oe(){const t=new Date,e=X(t),r=te(t);return e.setDate(e.getDate()-7),r.setDate(r.getDate()-7),{from:e,to:r}}function Ne(){const t=new Date,e=Z(t),r=U(t);return e.setMonth(e.getMonth()-1),r.setMonth(r.getMonth()-1),{from:e,to:r}}function ve(){const t=new Date,e=K(t),r=ne(t);return e.setMonth(e.getMonth()-3),r.setMonth(r.getMonth()-3),{from:e,to:r}}function be(){const t=new Date,e=J(t),r=ee(t);return e.setFullYear(e.getFullYear()-1),r.setFullYear(r.getFullYear()-1),{from:e,to:r}}const re=({label:t,startDate:e,endDate:r,startDateFormat:l="dd MMM",endDateFormat:c="dd MMM yyyy",selected:x,onClick:u})=>n.jsxs(d,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",onClick:()=>u&&u({from:e,to:r}),children:[n.jsx(g,{variant:"regular",children:t}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(g,{variant:"regular",className:"text-text-weak",children:[p(e,l)," - ",p(r,c)]}),x?n.jsx(w,{icon:n.jsx(ye,{}),className:"text-text-accent"}):n.jsx("div",{className:"w-4 h-4"})]})]});re.__docgenInfo={description:"",methods:[],displayName:"DateRangeTemplate",props:{label:{required:!0,tsType:{name:"string"},description:""},startDate:{required:!0,tsType:{name:"Date"},description:""},endDate:{required:!0,tsType:{name:"Date"},description:""},startDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM"',computed:!1}},endDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM yyyy"',computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dateRange: DateRange) => void",signature:{arguments:[{type:{name:"DateRange"},name:"dateRange"}],return:{name:"void"}}},description:""}}};const R=()=>({from:new Date,to:new Date}),se=({value:t,onChange:e,required:r,fromDate:l,toDate:c,placeholder:x="Select Date Range",error:u,dateFormat:f,showTemplateInValue:D,...ae})=>{const[N,C]=m.useState(!1),[o,v]=m.useState(t),[oe,I]=m.useState(!1),[s,b]=m.useState(R()),[ie,le]=m.useState(320),M=m.useRef(),ce=m.useMemo(()=>{if(l&&c)return{before:l,after:c};if(l)return{before:l};if(c)return{after:c}},[l,c]),me=m.useMemo(()=>Object.entries(z).map(([a,i])=>({label:a,range:i()})),[]),q=a=>!(o!=null&&o.from)||!(o!=null&&o.to)?!1:p(o.from,"yyyy-MM-dd")===p(a.from,"yyyy-MM-dd")&&p(o.to,"yyyy-MM-dd")===p(a.to,"yyyy-MM-dd"),de=m.useMemo(()=>{const i=Object.entries(z).map(([y,ge])=>({label:y,range:ge()})).find(y=>q(y.range));return i?i==null?void 0:i.label:""},[o]),ue=a=>f?Array.isArray(f)?f[a==="from"?0:1]:f:"dd MMM yyyy",h=(a,i)=>a?p(a,ue(i)):"",fe=a=>{v(a),e==null||e(a),b(R())},pe=a=>{v(a),e==null||e(a),I(!1),C(!1)},F=a=>{I(a),a||b(R())};return m.useEffect(()=>{v(t)},[t]),m.useLayoutEffect(()=>{var a;if(M){const i=(a=M.current)==null?void 0:a.getBoundingClientRect();le((i==null?void 0:i.width)||320)}},[M]),n.jsxs(P,{open:N,onOpenChange:C,children:[n.jsx(Y,{asChild:!0,children:D?n.jsx(d,{ref:M,variant:"outline",theme:"neutral",innerClassName:"justify-between w-full",className:j("flex text-left font-normal items-center px-3 gap-5 w-full justify-between",!o&&"text-muted-foreground",{"border-border-critical":u}),icon:n.jsx(w,{icon:n.jsx(_,{}),size:"lg",className:j("text-text-weak",{"rotate-180":!N})}),iconPosition:"right",children:o?n.jsxs(n.Fragment,{children:[n.jsx(g,{variant:"regular",children:de}),n.jsx("div",{className:"flex items-center gap-2 ml-auto",children:n.jsxs(g,{variant:"regular",className:"text-text-weak",children:[h(o==null?void 0:o.from,"from")," - ",h(o==null?void 0:o.to,"to")]})})]}):x}):n.jsx(d,{ref:M,variant:"outline",theme:"neutral",innerClassName:"w-full",className:j("justify-start text-left font-normal items-center px-3 gap-5 w-full",!o&&"text-muted-foreground",{"border-border-critical":u}),icon:n.jsx(w,{icon:n.jsx(_,{}),size:"lg",className:j("text-text-weak",{"rotate-180":!N})}),iconPosition:"right",children:o?n.jsxs(n.Fragment,{children:[h(o.from,"from")," -"," ",h(o.to,"to")]}):"Select Date Range"})}),n.jsx(E,{className:"p-1",align:"start",style:{width:`${ie}px`},children:n.jsxs("div",{className:"flex flex-col w-full",children:[me.map(({label:a,range:i},y)=>n.jsxs(m.Fragment,{children:[n.jsx(re,{label:a,startDate:i.from,endDate:i.to,onClick:fe,selected:q(i)}),y===3&&n.jsx(k,{className:"my-1"})]},y)),n.jsx(k,{className:"my-1"}),n.jsxs(P,{open:oe,onOpenChange:F,children:[n.jsx(Y,{asChild:!0,children:n.jsxs(d,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",children:[n.jsx(g,{variant:"regular",children:"Custom Range"}),n.jsx(w,{icon:n.jsx(he,{}),className:"text-text-weak"})]})}),n.jsxs(E,{side:"right",sideOffset:8,className:"p-0",children:[n.jsxs("div",{className:"p-3 mb-1 space-y-1",children:[n.jsx(g,{variant:"medium",children:"Custom range"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(d,{variant:"outline",theme:"neutral",className:j("justify-start text-left font-normal items-center flex-1",{"text-text-weaker":!(s!=null&&s.from)}),icon:n.jsx(w,{icon:n.jsx(L,{}),className:"text-text-weak"}),children:s!=null&&s.from?h(s.from,"from"):"Start Date"}),n.jsx(g,{variant:"medium",children:"-"}),n.jsx(d,{variant:"outline",theme:"neutral",className:j("justify-start text-left font-normal items-center flex-1",{"text-text-weaker":!(s!=null&&s.to)}),icon:n.jsx(w,{icon:n.jsx(L,{}),className:"text-text-weak"}),children:s!=null&&s.to?h(s.to,"to"):"End Date"})]})]}),n.jsx(je,{autoFocus:!0,mode:"range",selected:s,onSelect:b,required:r,disabled:ce,startMonth:l,endMonth:c,numberOfMonths:2,className:"border-0 shadow-none",...ae}),n.jsx(k,{className:"my-1"}),n.jsxs("div",{className:"flex justify-end gap-4 p-3",children:[n.jsx(d,{variant:"outline",theme:"neutral",size:"sm",className:"w-[70px]",onClick:()=>{F(!1)},children:"Cancel"}),n.jsx(d,{size:"sm",className:"w-[70px]",disabled:!(s!=null&&s.from)||!(s!=null&&s.to),onClick:()=>{const a=s&&{from:s.from&&B(new Date(s.from)),to:s.to&&G(new Date(s.to))};pe(a)},children:"Save"})]})]})]})]})})]})};se.__docgenInfo={description:"",methods:[],displayName:"DateRangePicker",props:{value:{required:!1,tsType:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},description:""},showTemplateInValue:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select Date Range"',computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: DateRange | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},error:{required:!1,tsType:{name:"boolean"},description:""},dateFormat:{required:!1,tsType:{name:"union",raw:"string | [string, string]",elements:[{name:"string"},{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]}]},description:""}}};const ot={title:"Xenith UI/Components/Date Range Picker",component:se,decorators:t=>n.jsx("div",{className:"py-10 w-[600px] h-[400px]  pb-40",children:n.jsx(t,{})}),tags:["autodocs"]},T={args:{onChange:t=>{var e,r;console.log("value",t),console.log("ISO string",{from:(e=t==null?void 0:t.from)==null?void 0:e.toISOString(),to:(r=t==null?void 0:t.to)==null?void 0:r.toISOString()})}}},O={args:{showTemplateInValue:!0,onChange:t=>{var e,r;console.log("value",t),console.log("ISO string",{from:(e=t==null?void 0:t.from)==null?void 0:e.toISOString(),to:(r=t==null?void 0:t.to)==null?void 0:r.toISOString()})}}};var V,W,H;T.parameters={...T.parameters,docs:{...(V=T.parameters)==null?void 0:V.docs,source:{originalSource:`{
  args: {
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(H=(W=T.parameters)==null?void 0:W.docs)==null?void 0:H.source}}};var A,Q,$;O.parameters={...O.parameters,docs:{...(A=O.parameters)==null?void 0:A.docs,source:{originalSource:`{
  args: {
    showTemplateInValue: true,
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...($=(Q=O.parameters)==null?void 0:Q.docs)==null?void 0:$.source}}};const it=["Default","ShowTemplate"];export{T as Default,O as ShowTemplate,it as __namedExportsOrder,ot as default};
