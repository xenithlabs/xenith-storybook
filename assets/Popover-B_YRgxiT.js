import{j as W}from"./jsx-runtime-DR9Q75dM.js";import{r as o,R as ae}from"./index-DRjF_FHU.js";import{a as R,b as k,_ as g,f as y,c as D,h as ie,g as ue,d as de,e as le}from"./index-CxXVImLN.js";import{$ as fe,a as pe}from"./index-yJl9Mbgj.js";import{h as $e,R as be,$ as ve}from"./index-RoT-dC5i.js";import{$ as me}from"./index-D4PmrNqQ.js";import{$ as G,b as Ee,a as he,c as ge}from"./index-BoBYWeOI.js";import{$ as Z}from"./index-nVMawZv2.js";import{c as Pe}from"./cn-C-5SdYIA.js";const L="dismissableLayer.update",Oe="dismissableLayer.pointerDownOutside",Ce="dismissableLayer.focusOutside";let V;const ye=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xe=o.forwardRef((e,n)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:c,onDismiss:u,...b}=e,d=o.useContext(ye),[f,h]=o.useState(null),p=(t=f==null?void 0:f.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,_]=o.useState({}),l=R(n,$=>h($)),P=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),C=P.indexOf(v),m=f?P.indexOf(f):-1,E=d.layersWithOutsidePointerEventsDisabled.size>0,F=m>=C,se=Fe($=>{const w=$.target,K=[...d.branches].some(A=>A.contains(w));!F||K||(a==null||a($),c==null||c($),$.defaultPrevented||u==null||u())},p),U=Te($=>{const w=$.target;[...d.branches].some(A=>A.contains(w))||(i==null||i($),c==null||c($),$.defaultPrevented||u==null||u())},p);return fe($=>{m===d.layers.size-1&&(s==null||s($),!$.defaultPrevented&&u&&($.preventDefault(),u()))},p),o.useEffect(()=>{if(f)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(V=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),B(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=V)}},[f,p,r,d]),o.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),B())},[f,d]),o.useEffect(()=>{const $=()=>_({});return document.addEventListener(L,$),()=>document.removeEventListener(L,$)},[]),o.createElement(k.div,g({},b,{ref:l,style:{pointerEvents:E?F?"auto":"none":void 0,...e.style},onFocusCapture:y(e.onFocusCapture,U.onFocusCapture),onBlurCapture:y(e.onBlurCapture,U.onBlurCapture),onPointerDownCapture:y(e.onPointerDownCapture,se.onPointerDownCapture)}))});function Fe(e,n=globalThis==null?void 0:globalThis.document){const t=D(e),r=o.useRef(!1),s=o.useRef(()=>{});return o.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let b=function(){X(Oe,t,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(n.removeEventListener("click",s.current),s.current=b,n.addEventListener("click",s.current,{once:!0})):b()}else n.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{n.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),n.removeEventListener("pointerdown",a),n.removeEventListener("click",s.current)}},[n,t]),{onPointerDownCapture:()=>r.current=!0}}function Te(e,n=globalThis==null?void 0:globalThis.document){const t=D(e),r=o.useRef(!1);return o.useEffect(()=>{const s=a=>{a.target&&!r.current&&X(Ce,t,{originalEvent:a},{discrete:!1})};return n.addEventListener("focusin",s),()=>n.removeEventListener("focusin",s)},[n,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function B(){const e=new CustomEvent(L);document.dispatchEvent(e)}function X(e,n,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:t});n&&s.addEventListener(e,n,{once:!0}),r?ie(s,a):s.dispatchEvent(a)}const I="focusScope.autoFocusOnMount",N="focusScope.autoFocusOnUnmount",H={bubbles:!1,cancelable:!0},we=o.forwardRef((e,n)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[c,u]=o.useState(null),b=D(s),d=D(a),f=o.useRef(null),h=R(n,l=>u(l)),p=o.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;o.useEffect(()=>{if(r){let l=function(m){if(p.paused||!c)return;const E=m.target;c.contains(E)?f.current=E:O(f.current,{select:!0})},P=function(m){if(p.paused||!c)return;const E=m.relatedTarget;E!==null&&(c.contains(E)||O(f.current,{select:!0}))},v=function(m){if(document.activeElement===document.body)for(const F of m)F.removedNodes.length>0&&O(c)};document.addEventListener("focusin",l),document.addEventListener("focusout",P);const C=new MutationObserver(v);return c&&C.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",P),C.disconnect()}}},[r,c,p.paused]),o.useEffect(()=>{if(c){j.add(p);const l=document.activeElement;if(!c.contains(l)){const v=new CustomEvent(I,H);c.addEventListener(I,b),c.dispatchEvent(v),v.defaultPrevented||(De(Ne(J(c)),{select:!0}),document.activeElement===l&&O(c))}return()=>{c.removeEventListener(I,b),setTimeout(()=>{const v=new CustomEvent(N,H);c.addEventListener(N,d),c.dispatchEvent(v),v.defaultPrevented||O(l??document.body,{select:!0}),c.removeEventListener(N,d),j.remove(p)},0)}}},[c,b,d,p]);const _=o.useCallback(l=>{if(!t&&!r||p.paused)return;const P=l.key==="Tab"&&!l.altKey&&!l.ctrlKey&&!l.metaKey,v=document.activeElement;if(P&&v){const C=l.currentTarget,[m,E]=Re(C);m&&E?!l.shiftKey&&v===E?(l.preventDefault(),t&&O(m,{select:!0})):l.shiftKey&&v===m&&(l.preventDefault(),t&&O(E,{select:!0})):v===C&&l.preventDefault()}},[t,r,p.paused]);return o.createElement(k.div,g({tabIndex:-1},i,{ref:h,onKeyDown:_}))});function De(e,{select:n=!1}={}){const t=document.activeElement;for(const r of e)if(O(r,{select:n}),document.activeElement!==t)return}function Re(e){const n=J(e),t=z(n,e),r=z(n.reverse(),e);return[t,r]}function J(e){const n=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)n.push(t.currentNode);return n}function z(e,n){for(const t of e)if(!_e(t,{upTo:n}))return t}function _e(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ae(e){return e instanceof HTMLInputElement&&"select"in e}function O(e,{select:n=!1}={}){if(e&&e.focus){const t=document.activeElement;e.focus({preventScroll:!0}),e!==t&&Ae(e)&&n&&e.select()}}const j=Ie();function Ie(){let e=[];return{add(n){const t=e[0];n!==t&&(t==null||t.pause()),e=q(e,n),e.unshift(n)},remove(n){var t;e=q(e,n),(t=e[0])===null||t===void 0||t.resume()}}}function q(e,n){const t=[...e],r=t.indexOf(n);return r!==-1&&t.splice(r,1),t}function Ne(e){return e.filter(n=>n.tagName!=="A")}const Q=o.forwardRef((e,n)=>{const{children:t,...r}=e,s=o.Children.toArray(t),a=s.find(Se);if(a){const i=a.props.children,c=s.map(u=>u===a?o.Children.count(i)>1?o.Children.only(null):o.isValidElement(i)?i.props.children:null:u);return o.createElement(S,g({},r,{ref:n}),o.isValidElement(i)?o.cloneElement(i,void 0,c):null)}return o.createElement(S,g({},r,{ref:n}),t)});Q.displayName="Slot";const S=o.forwardRef((e,n)=>{const{children:t,...r}=e;return o.isValidElement(t)?o.cloneElement(t,{...ke(r,t.props),ref:n?ue(n,t.ref):t.ref}):o.Children.count(t)>1?o.Children.only(null):null});S.displayName="SlotClone";const Le=({children:e})=>o.createElement(o.Fragment,null,e);function Se(e){return o.isValidElement(e)&&e.type===Le}function ke(e,n){const t={...n};for(const r in n){const s=e[r],a=n[r];/^on[A-Z]/.test(r)?s&&a?t[r]=(...c)=>{a(...c),s(...c)}:s&&(t[r]=s):r==="style"?t[r]={...s,...a}:r==="className"&&(t[r]=[s,a].filter(Boolean).join(" "))}return{...e,...t}}const Y="Popover",[ee,st]=de(Y,[G]),M=G(),[Me,x]=ee(Y),Ue=e=>{const{__scopePopover:n,children:t,open:r,defaultOpen:s,onOpenChange:a,modal:i=!1}=e,c=M(n),u=o.useRef(null),[b,d]=o.useState(!1),[f=!1,h]=le({prop:r,defaultProp:s,onChange:a});return o.createElement(Ee,c,o.createElement(Me,{scope:n,contentId:me(),triggerRef:u,open:f,onOpenChange:h,onOpenToggle:o.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:b,onCustomAnchorAdd:o.useCallback(()=>d(!0),[]),onCustomAnchorRemove:o.useCallback(()=>d(!1),[]),modal:i},t))},Ke="PopoverTrigger",We=o.forwardRef((e,n)=>{const{__scopePopover:t,...r}=e,s=x(Ke,t),a=M(t),i=R(n,s.triggerRef),c=o.createElement(k.button,g({type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":oe(s.open)},r,{ref:i,onClick:y(e.onClick,s.onOpenToggle)}));return s.hasCustomAnchor?c:o.createElement(he,g({asChild:!0},a),c)}),te="PopoverPortal",[Ve,Be]=ee(te,{forceMount:void 0}),He=e=>{const{__scopePopover:n,forceMount:t,children:r,container:s}=e,a=x(te,n);return o.createElement(Ve,{scope:n,forceMount:t},o.createElement(Z,{present:t||a.open},o.createElement(pe,{asChild:!0,container:s},r)))},T="PopoverContent",ze=o.forwardRef((e,n)=>{const t=Be(T,e.__scopePopover),{forceMount:r=t.forceMount,...s}=e,a=x(T,e.__scopePopover);return o.createElement(Z,{present:r||a.open},a.modal?o.createElement(je,g({},s,{ref:n})):o.createElement(qe,g({},s,{ref:n})))}),je=o.forwardRef((e,n)=>{const t=x(T,e.__scopePopover),r=o.useRef(null),s=R(n,r),a=o.useRef(!1);return o.useEffect(()=>{const i=r.current;if(i)return $e(i)},[]),o.createElement(be,{as:Q,allowPinchZoom:!0},o.createElement(ne,g({},e,{ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:y(e.onCloseAutoFocus,i=>{var c;i.preventDefault(),a.current||(c=t.triggerRef.current)===null||c===void 0||c.focus()}),onPointerDownOutside:y(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,b=c.button===2||u;a.current=b},{checkForDefaultPrevented:!1}),onFocusOutside:y(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})))}),qe=o.forwardRef((e,n)=>{const t=x(T,e.__scopePopover),r=o.useRef(!1),s=o.useRef(!1);return o.createElement(ne,g({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i;if((i=e.onCloseAutoFocus)===null||i===void 0||i.call(e,a),!a.defaultPrevented){var c;r.current||(c=t.triggerRef.current)===null||c===void 0||c.focus(),a.preventDefault()}r.current=!1,s.current=!1},onInteractOutside:a=>{var i,c;(i=e.onInteractOutside)===null||i===void 0||i.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const u=a.target;((c=t.triggerRef.current)===null||c===void 0?void 0:c.contains(u))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}}))}),ne=o.forwardRef((e,n)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:b,onInteractOutside:d,...f}=e,h=x(T,t),p=M(t);return ve(),o.createElement(we,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a},o.createElement(xe,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:b,onDismiss:()=>h.onOpenChange(!1)},o.createElement(ge,g({"data-state":oe(h.open),role:"dialog",id:h.contentId},p,f,{ref:n,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function oe(e){return e?"open":"closed"}const Ge=Ue,Ze=We,Xe=He,re=ze,at=Ge,it=Ze,ce=ae.forwardRef(({className:e,align:n="center",sideOffset:t=4,...r},s)=>W.jsx(Xe,{children:W.jsx(re,{ref:s,align:n,sideOffset:t,className:Pe("z-50 rounded-md border bg-bg-default p-2 text-text-default shadow-dropdown outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));ce.displayName=re.displayName;ce.__docgenInfo={description:"",methods:[],props:{align:{defaultValue:{value:'"center"',computed:!1},required:!1},sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};export{at as P,it as a,ce as b};
