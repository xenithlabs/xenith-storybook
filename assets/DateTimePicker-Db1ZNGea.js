import{j as e}from"./jsx-runtime-DR9Q75dM.js";import{r as o}from"./index-DRjF_FHU.js";import{c as P}from"./cn-C-5SdYIA.js";import{F as A}from"./calendar-lcr2z1-P.js";import{D}from"./Divider-CVEwzqm3.js";import{P as E,a as O,b as V}from"./Popover-jvvk1f8v.js";import{B as k}from"./Button-iG-w-ZO3.js";import{I as B}from"./Icon-Bs9G1Rwk.js";import{C as _}from"./Calendar-Cq4tQa1v.js";import{T as u}from"./Text-BYjIVLkz.js";import{I as N}from"./useClickOutside-BeKAHFKi.js";import{f as z}from"./format-DeQ6fwDa.js";const G=a=>{if(a)return a},J=({date:a,fromDate:m,toDate:c,onChange:l,error:w,timeError:d,dateTransformer:i=G,timeMessage:C,withoutSaveButton:S=!1,popoverProps:H,formatFn:R=z,...L})=>{var b,I,q;const[M,T]=o.useState(!1),[s,p]=o.useState(i(a)?i(a):void 0),[g,x]=o.useState(((b=i(a))==null?void 0:b.getHours().toString())??"00"),[f,h]=o.useState(((I=i(a))==null?void 0:I.getMinutes().toString())??"00"),[v,j]=o.useState(((q=i(a))==null?void 0:q.getSeconds().toString())??"00"),n=o.useMemo(()=>i(a),[i,a]),U=o.useMemo(()=>{if(m&&c)return{before:m,after:c};if(m)return{before:m};if(c)return{after:c}},[m,c]);return o.useEffect(()=>{const r=n==null?void 0:n.getTime(),y=s==null?void 0:s.getTime();r!==y&&(p(n??void 0),x((n==null?void 0:n.getHours().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),h((n==null?void 0:n.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),j((n==null?void 0:n.getSeconds().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"))},[n==null?void 0:n.getTime(),M,s]),o.useEffect(()=>{if(!s)return;const r=Math.min(Math.max(Number(g),0),23),y=Math.min(Math.max(Number(f),0),59),F=Math.min(Math.max(Number(v),0),59),t=i(s);t==null||t.setHours(r),t==null||t.setMinutes(y),t==null||t.setSeconds(F),(t==null?void 0:t.getTime())!==s.getTime()&&(x((t==null?void 0:t.getHours().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),h((t==null?void 0:t.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),j((t==null?void 0:t.getSeconds().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),p(t),S&&(l==null||l(t)))},[g,f,v,i,s]),e.jsxs(E,{open:M,onOpenChange:T,children:[e.jsx(O,{asChild:!0,children:e.jsx(k,{variant:"outline",theme:"neutral",className:P("justify-start text-left font-normal items-center",!s&&"text-muted-foreground",{"border-border-critical":w}),icon:e.jsx(B,{icon:e.jsx(A,{})}),children:a?R(n,"dd MMM yyy HH:mm:ss"):e.jsx("div",{className:"text-text-weaker",children:L.placeholder??"Pick a date"})})}),e.jsx(V,{className:"w-auto p-0",...H,children:e.jsxs("div",{className:"grid p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(_,{mode:"single",disabled:U,startMonth:m,defaultMonth:s,endMonth:c,selected:s,onSelect:p,autoFocus:!0,className:"p-0 pt-1 pr-6 border-0 shadow-none"}),e.jsxs("div",{className:"grid gap-[6px]",children:[e.jsx(u,{variant:"medium",children:"Time"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(N,{type:"number",value:g,onChange:r=>x(r.target.value),min:0,max:23,containerClassName:"w-[57px]",className:"text-center appearance-none",placeholder:"00",error:d}),e.jsx(u,{variant:"tiny",className:"text-text-weak",children:"Hour"})]}),e.jsx(u,{className:"flex items-center h-10",children:":"}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(N,{type:"number",value:f,onChange:r=>h(r.target.value),min:0,max:59,containerClassName:"w-[57px]",className:"text-center appearance-none",placeholder:"00",error:d}),e.jsx(u,{variant:"tiny",className:"text-text-weak",children:"Minute"})]}),e.jsx(u,{className:"flex items-center h-10",children:":"}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(N,{type:"number",value:v,onChange:r=>j(r.target.value),min:0,max:59,containerClassName:"w-[57px]",className:"text-center appearance-none",placeholder:"00",error:d}),e.jsx(u,{variant:"tiny",className:"text-text-weak",children:"Second"})]})]}),C]})]}),!S&&e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mt-6 mb-4"}),e.jsx("div",{className:"flex justify-end gap-4",children:e.jsx(k,{size:"sm",className:"w-[70px]",onClick:()=>{l==null||l(s),T(!1)},children:"Save"})})]})]})})]})};J.__docgenInfo={description:"",methods:[],displayName:"DateTimePicker",props:{date:{required:!0,tsType:{name:"union",raw:"Date | undefined",elements:[{name:"Date"},{name:"undefined"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(date?: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""},dateTransformer:{required:!1,tsType:{name:"signature",type:"function",raw:"(date?: Date) => Date | undefined",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"union",raw:"Date | undefined",elements:[{name:"Date"},{name:"undefined"}]}}},description:"",defaultValue:{value:`(date?: Date | undefined) => {
  if (!date) {
    return undefined;
  }

  return date;
}`,computed:!1}},formatFn:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: DateArg<Date> | string, format: string) => string",signature:{arguments:[{type:{name:"union",raw:"DateArg<Date> | string",elements:[{name:"DateArg",elements:[{name:"Date"}],raw:"DateArg<Date>"},{name:"string"}]},name:"date"},{type:{name:"string"},name:"format"}],return:{name:"string"}}},description:"",defaultValue:{value:"format",computed:!0}},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},error:{required:!1,tsType:{name:"boolean"},description:""},timeError:{required:!1,tsType:{name:"boolean"},description:""},timeMessage:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},popoverProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof PopoverContent>",elements:[{name:"PopoverContent"}]},description:""},withoutSaveButton:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["Omit"]};export{J as D};
