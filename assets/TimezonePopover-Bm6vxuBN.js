import{j as s}from"./jsx-runtime-DR9Q75dM.js";import{r as t}from"./index-DRjF_FHU.js";import{D as y,a as E,b as I,$ as V}from"./DropdownMenu-XER5NlNu.js";import{c as g}from"./cn-8RyR4BqC.js";import{F as A}from"./chevron-right-D4FvqfWr.js";import{F as U}from"./check-C0C6JGvp.js";import{F as _}from"./clock-DRhx3Wks.js";import{u as q,g as h,S as G}from"./useClickOutside-CTb3d7a-.js";import{T as j}from"./Text-C8HBwI4b.js";import{I as N}from"./Icon-CTnhpE1d.js";import{B as H}from"./Button-C-jt4Opy.js";import{D as J}from"./Divider-CIm89-oy.js";const Q=(o,i,n)=>{if(!i)return!0;const c=i.toLowerCase();return n.some(r=>{const m=o[r];return typeof m=="string"?m.toLowerCase().includes(c):!1})},B=t.forwardRef(({value:o,onChange:i,contentProps:n,className:c,placeholder:r,...m})=>{const[b,O]=t.useState(!1),[R,T]=t.useState(o),[k,C]=t.useState(),[u,D]=t.useState([]),[x,S]=t.useState(""),z=t.useRef(null),{basicOptions:a,fetchTimezoneOptions:F}=q(),v=e=>{T(h(e)),C(e),i&&i(h(e))},L=t.useCallback(e=>{if(!e)return s.jsx(j,{children:r||"Select timezone"});const l=a.includes(e)?e.name:e.zone,p=e.zone!=="UTC"?e.utc:"";return s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(N,{icon:s.jsx(_,{})}),s.jsxs(j,{children:[l," ",p]})]})},[a,r]),M=t.useCallback((e,l)=>{const p=a.includes(e)?e.name:e.zone,d=e.zone!=="UTC"?e.utc.replace(/\(|\)/g,""):"";return s.jsxs("div",{className:g("relative flex gap-2 justify-between items-center p-2 pr-8 hover:bg-accent-weak group-hover:bg-accent-weak",{}),children:[s.jsx(j,{className:"text-text-default",children:p}),d&&s.jsx(j,{className:"text-text-weak",children:d}),l&&s.jsx(N,{icon:s.jsx(U,{}),className:"absolute right-2 text-text-accent"})]})},[a]),f=t.useMemo(()=>x?u.filter(e=>Q(e,x,["name","zone","utc"])):u,[u,x]),$=t.useCallback(e=>{if(!a.includes(e)||!f.some(w=>!a.includes(w)))return!1;const d=f.filter(w=>a.includes(w));return d.indexOf(e)===d.length-1},[f,a]);return t.useEffect(()=>{o&&(T(o),C(u.find(e=>h(e)===o)))},[o,u]),t.useEffect(()=>{F().then(e=>{D(e)})},[F]),t.useEffect(()=>{b||S("")},[b]),t.useEffect(()=>{var e;(e=z.current)==null||e.focus()},[z]),s.jsxs(y,{...m,open:b,onOpenChange:O,children:[s.jsx(E,{asChild:!0,children:s.jsx(H,{variant:"nude",theme:"neutral",iconPosition:"right",icon:s.jsx(N,{icon:s.jsx(A,{})}),className:g("px-2 justify-between hover:bg-accent-weak hover:text-text-accent",c),children:L(k)})}),s.jsxs(I,{side:"right",align:"start",...n,className:g("max-h-[350px] w-[320px] p-0 overflow-hidden flex flex-col text-text-default",n==null?void 0:n.className),onCloseAutoFocus:e=>e.preventDefault(),children:[s.jsx(W,{value:x,onChange:S,onEnterKeyDown:()=>{const e=Array.from(f.values())[0];e&&(v(e),O(!1))}}),s.jsx("div",{className:"flex flex-col overflow-auto py-1",children:f.map((e,l)=>s.jsxs(t.Fragment,{children:[s.jsx(V,{className:"focus:outline-none",onClick:()=>v(e),children:M(e,R===h(e))}),$(e)&&s.jsx(J,{className:"m-1 w-[calc(100%-8px)]"})]},l))})]})]})}),W=({value:o,onChange:i,onEnterKeyDown:n})=>{const c=t.useRef(null);return t.useEffect(()=>{var r;(r=c.current)==null||r.focus()},[c]),s.jsx(G,{ref:c,autoFocus:!0,onClear:()=>i(""),value:o,onChange:r=>{i(r.target.value)},onKeyDown:r=>{r.code==="Enter"&&(n==null||n()),r.stopPropagation()},containerClassName:"border-0 rounded-b-none border-b border-border-default focus-within:border-border-default shadow-none"})};B.displayName="TimezoneDropdownMenu";B.__docgenInfo={description:"",methods:[],displayName:"TimezoneDropdownMenu"};export{B as T};
