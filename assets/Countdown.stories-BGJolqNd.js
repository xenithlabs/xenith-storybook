import{j as l}from"./jsx-runtime-BhBAkL08.js";import{c as j}from"./cn-C-5SdYIA.js";import{F as b}from"./clock-DdwMB1Jq.js";import{r as g}from"./index-caxmlYbZ.js";import{a as H}from"./addDays-DUX3p28w.js";import{t as c,c as D}from"./constructFrom-rJN6zrQ_.js";import{d as A,m as E,a as O}from"./differenceInCalendarDays-Do9CeC6b.js";import{e as R}from"./endOfMonth-CoG5-XNs.js";import{T as $}from"./Text-D-wIA97j.js";import{I as q}from"./Icon-7BdkfswG.js";import"./index-D09aQd82.js";import"./styles-BNEhTmYy.js";import"./index-Bb4qSo10.js";function L(t,s){const e=c(t);if(isNaN(s))return D(t,NaN);if(!s)return e;const n=e.getDate(),r=D(t,e.getTime());r.setMonth(e.getMonth()+s+1,0);const o=r.getDate();return n>=o?r:(e.setFullYear(r.getFullYear(),r.getMonth(),n),e)}function h(t,s){const{years:e=0,months:n=0,weeks:r=0,days:o=0,hours:i=0,minutes:a=0,seconds:u=0}=s,d=c(t),f=n||e?L(d,n+e*12):d,m=o||r?H(f,o+r*7):f,M=a+i*60,x=(u+M*60)*1e3;return D(t,m.getTime()+x)}function p(t,s){const e=c(t),n=c(s),r=e.getTime()-n.getTime();return r<0?-1:r>0?1:r}function V(t,s){const e=c(t),n=c(s),r=e.getFullYear()-n.getFullYear(),o=e.getMonth()-n.getMonth();return r*12+o}function W(t,s){const e=c(t),n=c(s);return e.getFullYear()-n.getFullYear()}function k(t,s){const e=c(t),n=c(s),r=F(e,n),o=Math.abs(A(e,n));e.setDate(e.getDate()-r*o);const i=+(F(e,n)===-r),a=r*(o-i);return a===0?0:a}function F(t,s){const e=t.getFullYear()-s.getFullYear()||t.getMonth()-s.getMonth()||t.getDate()-s.getDate()||t.getHours()-s.getHours()||t.getMinutes()-s.getMinutes()||t.getSeconds()-s.getSeconds()||t.getMilliseconds()-s.getMilliseconds();return e<0?-1:e>0?1:e}function _(t){return s=>{const n=(t?Math[t]:Math.trunc)(s);return n===0?0:n}}function T(t,s){return+c(t)-+c(s)}function P(t,s,e){const n=T(t,s)/E;return _(e==null?void 0:e.roundingMethod)(n)}function B(t,s,e){const n=T(t,s)/O;return _(e==null?void 0:e.roundingMethod)(n)}function U(t){const s=c(t);return s.setHours(23,59,59,999),s}function X(t){const s=c(t);return+U(s)==+R(s)}function z(t,s){const e=c(t),n=c(s),r=p(e,n),o=Math.abs(V(e,n));let i;if(o<1)i=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-r*o);let a=p(e,n)===-r;X(c(t))&&o===1&&p(t,n)===1&&(a=!1),i=r*(o-Number(a))}return i===0?0:i}function G(t,s,e){const n=T(t,s)/1e3;return _(e==null?void 0:e.roundingMethod)(n)}function J(t,s){const e=c(t),n=c(s),r=p(e,n),o=Math.abs(W(e,n));e.setFullYear(1584),n.setFullYear(1584);const i=p(e,n)===-r,a=r*(o-+i);return a===0?0:a}function K(t){const s=c(t.start),e=c(t.end),n={},r=J(e,s);r&&(n.years=r);const o=h(s,{years:n.years}),i=z(e,o);i&&(n.months=i);const a=h(o,{months:n.months}),u=k(e,a);u&&(n.days=u);const d=h(a,{days:n.days}),f=P(e,d);f&&(n.hours=f);const m=h(d,{hours:n.hours}),M=B(e,m);M&&(n.minutes=M);const C=h(m,{minutes:n.minutes}),x=G(e,C);return x&&(n.seconds=x),n}const S=g.createContext({}),I=({initialDuration:t=1e4,step:s=1e3,onCountdownEnd:e=()=>{},children:n})=>{const r=g.useRef(),[o,i]=g.useState(t),a=()=>{i(0),r.current&&clearInterval(r.current),r.current=null},u=()=>{r.current&&clearInterval(r.current),r.current=setInterval(()=>{if(o<=0){a(),e();return}i(m=>m-s)},s)},d=()=>{a(),i(t),u()};g.useEffect(()=>(d(),()=>{a()}),[t]),g.useEffect(()=>{o<=0&&a()},[o]);const f=K({start:0,end:o});return l.jsx(S.Provider,{value:{hours:f.hours||0,minutes:f.minutes||0,seconds:f.seconds||0},children:n})},Y=({className:t,icon:s=l.jsx(q,{className:"text-text-warning",icon:l.jsx(b,{})}),...e})=>{const{hours:n,minutes:r,seconds:o}=g.useContext(S),i=String(n).padStart(2,"0"),a=String(r).padStart(2,"0"),u=String(o).padStart(2,"0"),d=n>0?`${i}:${a}:${u}`:`${a}:${u}`;return l.jsxs("div",{...e,className:j("text-text-warning flex items-center gap-1",t),children:[l.jsx("span",{className:"relative top-[2px]",children:s}),l.jsx($,{variant:"semiBold",children:d})]})};I.__docgenInfo={description:"",methods:[],displayName:"Countdown",props:{initialDuration:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10000",computed:!1}},onCountdownEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1000",computed:!1}}},composes:["PropsWithChildren"]};Y.__docgenInfo={description:"",methods:[],displayName:"CountdownText",props:{icon:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:'<Icon className="text-text-warning" icon={<ClockIcon />} />',computed:!1}}},composes:["HTMLAttributes"]};const le={title:"Xenith UI/Components/Countdown",component:I,tags:["autodocs"],args:{initialDuration:3*60*60*1e3,step:1e3,onCountdownEnd:()=>{}},render:t=>l.jsx(I,{...t,children:l.jsx(Y,{})})},y={};var N,v,w;y.parameters={...y.parameters,docs:{...(N=y.parameters)==null?void 0:N.docs,source:{originalSource:"{}",...(w=(v=y.parameters)==null?void 0:v.docs)==null?void 0:w.source}}};const me=["Default"];export{y as Default,me as __namedExportsOrder,le as default};
