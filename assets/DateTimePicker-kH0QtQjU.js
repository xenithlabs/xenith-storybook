import{j as t}from"./jsx-runtime-DR9Q75dM.js";import{r as c}from"./index-DRjF_FHU.js";import{c as I}from"./cn-C-5SdYIA.js";import{F as q}from"./calendar-lcr2z1-P.js";import{t as v}from"./differenceInCalendarDays-C3EGPyW5.js";import{D as k}from"./Divider-CVEwzqm3.js";import{P as C,a as H,b as R}from"./Popover-jvvk1f8v.js";import{B as b}from"./Button-iG-w-ZO3.js";import{I as _}from"./Icon-Bs9G1Rwk.js";import{f as F}from"./format-DeQ6fwDa.js";import{C as E}from"./Calendar-Cq4tQa1v.js";import{T as m}from"./Text-BYjIVLkz.js";import{I as N}from"./useClickOutside-BeKAHFKi.js";function L(e,s,n){const r=v(e,n==null?void 0:n.in);return r.setHours(s),r}function O(e,s,n){const r=v(e,n==null?void 0:n.in);return r.setMinutes(s),r}function U(e,s,n){const r=v(e,n==null?void 0:n.in);return r.setSeconds(s),r}const B=({date:e,fromDate:s,toDate:n,onChange:r,error:S,timeError:p,timeMessage:w,withoutSaveButton:j=!1,popoverProps:T,...M})=>{const[h,y]=c.useState(!1),[a,g]=c.useState(e?new Date(e):void 0),[l,f]=c.useState((e==null?void 0:e.getHours().toString())??"00"),[u,x]=c.useState((e==null?void 0:e.getMinutes().toString())??"00"),[o,d]=c.useState((e==null?void 0:e.getSeconds().toString())??"00"),D=c.useMemo(()=>{if(s&&n)return{before:s,after:n};if(s)return{before:s};if(n)return{after:n}},[s,n]);return c.useEffect(()=>{g(e?new Date(e):void 0),f((e==null?void 0:e.getHours().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),x((e==null?void 0:e.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),d((e==null?void 0:e.getSeconds().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00")},[e==null?void 0:e.getTime(),h]),c.useEffect(()=>{if(!a)return;if(Number(l)<0){f("00");return}if(Number(l)>23){f("23");return}if(Number(u)<0){x("00");return}if(Number(u)>59){x("59");return}if(Number(o)<0){d("00");return}if(Number(o)>59){d("59");return}const i=L(O(U(a,Number(o)),Number(u)),Number(l));g(i),j&&(r==null||r(i))},[l,u,o,a==null?void 0:a.getTime()]),t.jsxs(C,{open:h,onOpenChange:y,children:[t.jsx(H,{asChild:!0,children:t.jsx(b,{variant:"outline",theme:"neutral",className:I("justify-start text-left font-normal items-center",!a&&"text-muted-foreground",{"border-border-critical":S}),icon:t.jsx(_,{icon:t.jsx(q,{})}),children:e?F(e,"dd MMM yyy HH:mm:ss"):t.jsx("div",{className:"text-text-weaker",children:M.placeholder??"Pick a date"})})}),t.jsx(R,{className:"w-auto p-0",...T,children:t.jsxs("div",{className:"grid p-6",children:[t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsx(E,{mode:"single",disabled:D,startMonth:s,defaultMonth:a,endMonth:n,selected:a,onSelect:g,autoFocus:!0,className:"p-0 pt-1 pr-6 border-0 shadow-none"}),t.jsxs("div",{className:"grid gap-[6px]",children:[t.jsx(m,{variant:"medium",children:"Time"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx(N,{type:"number",value:l,onChange:i=>f(i.target.value),min:0,max:23,containerClassName:"w-[57px]",className:"text-center appearance-none",placeholder:"00",error:p}),t.jsx(m,{variant:"tiny",className:"text-text-weak",children:"Hour"})]}),t.jsx(m,{className:"flex items-center h-10",children:":"}),t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx(N,{type:"number",value:u,onChange:i=>x(i.target.value),min:0,max:59,containerClassName:"w-[57px]",className:"text-center appearance-none",placeholder:"00",error:p}),t.jsx(m,{variant:"tiny",className:"text-text-weak",children:"Minute"})]}),t.jsx(m,{className:"flex items-center h-10",children:":"}),t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx(N,{type:"number",value:o,onChange:i=>d(i.target.value),min:0,max:59,containerClassName:"w-[57px]",className:"text-center appearance-none",placeholder:"00",error:p}),t.jsx(m,{variant:"tiny",className:"text-text-weak",children:"Second"})]})]}),w]})]}),!j&&t.jsxs(t.Fragment,{children:[t.jsx(k,{className:"mt-6 mb-4"}),t.jsx("div",{className:"flex justify-end gap-4",children:t.jsx(b,{size:"sm",className:"w-[70px]",onClick:()=>{r==null||r(a),y(!1)},children:"Save"})})]})]})})]})};B.__docgenInfo={description:"",methods:[],displayName:"DateTimePicker",props:{date:{required:!0,tsType:{name:"union",raw:"Date | undefined",elements:[{name:"Date"},{name:"undefined"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(date?: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},error:{required:!1,tsType:{name:"boolean"},description:""},timeError:{required:!1,tsType:{name:"boolean"},description:""},timeMessage:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},popoverProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof PopoverContent>",elements:[{name:"PopoverContent"}]},description:""},withoutSaveButton:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["Omit"]};export{B as D};
