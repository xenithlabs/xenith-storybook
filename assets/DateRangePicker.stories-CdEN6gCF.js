import{j as s}from"./jsx-runtime-DR9Q75dM.js";import{r as m}from"./index-DRjF_FHU.js";import{s as Me}from"./differenceInCalendarDays-akuTVAtC.js";import{e as Se,a as ne}from"./endOfMonth-CcewPeqj.js";import{g as ve,s as se,a as re,f}from"./format-C0ftWeA9.js";import{t as g}from"./constructFrom-rJN6zrQ_.js";import{c as M}from"./cn-C-5SdYIA.js";import{a as W}from"./spinner-fxOeMmbK.js";import{F as Re}from"./chevron-right-BqZwpdvf.js";import{F as Oe}from"./check-rKbD1QKS.js";import{B as x}from"./Button-iG-w-ZO3.js";import{T as p}from"./Text-BYjIVLkz.js";import{I as O}from"./Icon-Bs9G1Rwk.js";import{D as A}from"./DateTimePicker-dfnyE67y.js";import{P as z,a as Q,b as B}from"./Popover-jvvk1f8v.js";import{D as I}from"./Divider-CVEwzqm3.js";import"./index-HZDBD2ik.js";import"./index-Bb4qSo10.js";import"./styles-BNEhTmYy.js";import"./chevron-down-DqISSPB-.js";import"./calendar-lcr2z1-P.js";import"./Calendar-QI3Ntih8.js";import"./chevron-left-rLDlePxE.js";import"./useClickOutside-BeKAHFKi.js";import"./search-CWRmq9WO.js";import"./close-CAN3cq4E.js";import"./stringCase-DaZl3p-i.js";import"./index-DuXoWBk8.js";import"./index-CxRLcT2J.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-CAHntWCK.js";import"./Heading-BbwmavmP.js";import"./Checkbox-CY4DEde6.js";import"./index-Bu1UD4WD.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";import"./index-DdILnG7L.js";import"./index-CWbDPhO_.js";import"./index-qtGI3euC.js";import"./index-CxZrjbHI.js";function ae(e){const t=g(e),n=t.getMonth(),c=n-n%3;return t.setMonth(c,1),t.setHours(0,0,0,0),t}function oe(e){const t=g(e);return t.setDate(1),t.setHours(0,0,0,0),t}function ie(e){const t=g(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function me(e,t){var w,d;const n=ve(),c=n.weekStartsOn??((d=(w=n.locale)==null?void 0:w.options)==null?void 0:d.weekStartsOn)??0,l=g(e),u=l.getDay(),h=(u<c?-7:0)+6-(u-c);return l.setDate(l.getDate()+h),l.setHours(23,59,59,999),l}function ce(e){const t=g(e),n=t.getMonth(),c=n-n%3+3;return t.setMonth(c,0),t.setHours(23,59,59,999),t}function Ne(e,t){const n=g(e),c=g(t);return n.getTime()>c.getTime()}const H={Today:be,"This week":ke,"This month":Ce,"This quarter":qe,"This year":Fe,"Last week":Ie,"Last month":Le,"Last quarter":_e,"Last year":Pe};function be(){const e=new Date,t=Me(e),n=Se(e);return{from:t,to:n}}function ke(){const e=new Date,t=se(e),n=me(e);return{from:t,to:n}}function Ce(){const e=new Date,t=oe(e),n=ne(e);return{from:t,to:n}}function qe(){const e=new Date,t=ae(e),n=ce(e);return{from:t,to:n}}function Fe(){const e=new Date,t=re(e),n=ie(e);return{from:t,to:n}}function Ie(){const e=new Date,t=se(e),n=me(e);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{from:t,to:n}}function Le(){const e=new Date,t=oe(e),n=ne(e);return t.setMonth(t.getMonth()-1),n.setMonth(n.getMonth()-1),{from:t,to:n}}function _e(){const e=new Date,t=ae(e),n=ce(e);return t.setMonth(t.getMonth()-3),n.setMonth(n.getMonth()-3),{from:t,to:n}}function Pe(){const e=new Date,t=re(e),n=ie(e);return t.setFullYear(t.getFullYear()-1),n.setFullYear(n.getFullYear()-1),{from:t,to:n}}const le=({label:e,startDate:t,endDate:n,startDateFormat:c="dd MMM",endDateFormat:l="dd MMM yyyy",selected:u,onClick:h})=>s.jsxs(x,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",onClick:()=>h&&h({from:t,to:n}),children:[s.jsx(p,{variant:"regular",children:e}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(p,{variant:"regular",className:"text-text-weak",children:[f(t,c)," - ",f(n,l)]}),u?s.jsx(O,{icon:s.jsx(Oe,{}),className:"text-text-accent"}):s.jsx("div",{className:"w-4 h-4"})]})]});le.__docgenInfo={description:"",methods:[],displayName:"DateRangeTemplate",props:{label:{required:!0,tsType:{name:"string"},description:""},startDate:{required:!0,tsType:{name:"Date"},description:""},endDate:{required:!0,tsType:{name:"Date"},description:""},startDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM"',computed:!1}},endDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM yyyy"',computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dateRange: DateRange) => void",signature:{arguments:[{type:{name:"DateRange"},name:"dateRange"}],return:{name:"void"}}},description:""}}};const L=()=>({from:new Date,to:new Date}),_=({value:e,onChange:t,required:n,fromDate:c,toDate:l,rangeTemplates:u=H,placeholder:h="Select Date Range",error:w,dateFormat:d,showTemplateInValue:ue=!0})=>{const[N,P]=m.useState(!1),[a,b]=m.useState(e),[de,E]=m.useState(!1),[o,k]=m.useState(L()),fe=Math.floor(Object.keys(u).length/2)-1,[C,pe]=m.useState(),[q,D]=m.useState(),F=r=>{r&&Ne(r,q||new Date)&&D(r),pe(r)},[ge,he]=m.useState(320),T=m.useRef(),ye=m.useMemo(()=>Object.entries(u).map(([r,i])=>({label:r,range:i()})),[]),Y=r=>!(a!=null&&a.from)||!(a!=null&&a.to)?!1:f(a.from,"yyyy-MM-dd-hh-mm-ss")===f(r.from,"yyyy-MM-dd-hh-mm-ss")&&f(a.to,"yyyy-MM-dd-hh-mm-ss")===f(r.to,"yyyy-MM-dd-hh-mm-ss"),xe=m.useMemo(()=>{const i=Object.entries(H).map(([y,je])=>({label:y,range:je()})).find(y=>Y(y.range));return i?i==null?void 0:i.label:"Custom"},[a]),we=r=>d?Array.isArray(d)?d[r==="from"?0:1]:d:"dd MMM yyyy",j=(r,i)=>r?f(r,we(i)):"",Te=r=>{b(r),t==null||t(r),k(L())},De=r=>{b(r),t==null||t(r),E(!1),P(!1)},V=r=>{E(r),r||k(L())};return m.useEffect(()=>{b(e),k(e)},[e]),m.useEffect(()=>{F(o==null?void 0:o.from),D(o==null?void 0:o.to)},[o]),m.useLayoutEffect(()=>{var r;if(T){const i=(r=T.current)==null?void 0:r.getBoundingClientRect();he((i==null?void 0:i.width)||320)}},[T]),s.jsxs(z,{open:N,onOpenChange:P,children:[s.jsx(Q,{asChild:!0,children:ue?s.jsx(x,{ref:T,variant:"outline",theme:"neutral",innerClassName:"justify-between w-full",className:M("flex text-left font-normal items-center px-3 gap-5 w-full justify-between bg-bg-default",!a&&"text-muted-foreground",{"border-border-critical":w}),icon:s.jsx(O,{icon:s.jsx(W,{}),size:"lg",className:M("text-text-weak",{"rotate-180":!N})}),iconPosition:"right",children:a?s.jsxs(s.Fragment,{children:[s.jsx(p,{variant:"regular",children:xe}),s.jsx("div",{className:"flex items-center gap-2 ml-auto",children:s.jsxs(p,{variant:"regular",className:"text-text-weak",children:[j(a==null?void 0:a.from,"from")," - ",j(a==null?void 0:a.to,"to")]})})]}):h}):s.jsx(x,{ref:T,variant:"outline",theme:"neutral",innerClassName:"w-full",className:M("justify-start text-left font-normal items-center px-3 gap-5 w-full bg-bg-default",!a&&"text-muted-foreground",{"border-border-critical":w}),icon:s.jsx(O,{icon:s.jsx(W,{}),size:"lg",className:M("text-text-weak",{"rotate-180":!N})}),iconPosition:"right",children:a?s.jsxs(s.Fragment,{children:[j(a.from,"from")," -"," ",j(a.to,"to")]}):"Select Date Range"})}),s.jsx(B,{className:"p-1",align:"start",style:{width:`${ge}px`},children:s.jsxs("div",{className:"flex flex-col w-full",children:[ye.map(({label:r,range:i},y)=>s.jsxs(m.Fragment,{children:[s.jsx(le,{label:r,startDate:i.from,endDate:i.to,onClick:Te,selected:Y(i)}),y===fe&&s.jsx(I,{className:"my-1"})]},y)),s.jsx(I,{className:"my-1"}),s.jsxs(z,{open:de,onOpenChange:V,children:[s.jsx(Q,{asChild:!0,children:s.jsxs(x,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",children:[s.jsx(p,{variant:"regular",children:"Custom Range"}),s.jsx(O,{icon:s.jsx(Re,{}),className:"text-text-weak"})]})}),s.jsxs(B,{side:"right",sideOffset:8,className:"p-0",children:[s.jsxs("div",{className:"p-3 flex gap-2",children:[s.jsxs("div",{className:"grid gap-1",children:[s.jsx(p,{variant:"medium",children:"From"}),s.jsx(A,{withoutSaveButton:!0,autoFocus:!0,date:C,onChange:F,required:n,fromDate:c,toDate:l,className:"border-0 shadow-none"})]}),s.jsx("div",{className:"self-end mb-2",children:"-"}),s.jsxs("div",{className:"grid gap-1",children:[s.jsx(p,{variant:"medium",children:"To"}),s.jsx(A,{withoutSaveButton:!0,autoFocus:!0,date:q,onChange:D,required:n,fromDate:C,toDate:l,className:"border-0 shadow-none"})]})]}),s.jsx(I,{className:"my-1"}),s.jsxs("div",{className:"flex justify-end gap-4 p-3",children:[s.jsx(x,{variant:"outline",theme:"neutral",size:"sm",className:"w-[70px]",onClick:()=>{F(o==null?void 0:o.from),D(o==null?void 0:o.to),V(!1)},children:"Cancel"}),s.jsx(x,{size:"sm",className:"w-[70px]",disabled:!(o!=null&&o.from)||!(o!=null&&o.to),onClick:()=>{De(o&&{from:C,to:q})},children:"Apply"})]})]})]})]})})]})};_.__docgenInfo={description:"",methods:[],displayName:"DateRangePicker",props:{value:{required:!1,tsType:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},description:""},showTemplateInValue:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select Date Range"',computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: DateRange | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},rangeTemplates:{required:!1,tsType:{name:"RANGE_TEMPLATES"},description:"",defaultValue:{value:`{
  Today: getTodayRange,
  "This week": getThisWeekRange,
  "This month": getThisMonthRange,
  "This quarter": getThisQuarterRange,
  "This year": getThisYearRange,
  "Last week": getLastWeekRange,
  "Last month": getLastMonthRange,
  "Last quarter": getLastQuarterRange,
  "Last year": getLastYearRange,
}`,computed:!1}},toDate:{required:!1,tsType:{name:"Date"},description:""},error:{required:!1,tsType:{name:"boolean"},description:""},dateFormat:{required:!1,tsType:{name:"union",raw:"string | [string, string]",elements:[{name:"string"},{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]}]},description:""}}};const St={title:"Xenith UI/Components/Date Range Picker",component:_,decorators:e=>s.jsx("div",{className:"py-10 w-[600px] h-[400px]  pb-40",children:s.jsx(e,{})}),tags:["autodocs"]},S={args:{onChange:e=>{var t,n;console.log("value",e),console.log("ISO string",{from:(t=e==null?void 0:e.from)==null?void 0:t.toISOString(),to:(n=e==null?void 0:e.to)==null?void 0:n.toISOString()})}}},v={args:{showTemplateInValue:!0,onChange:e=>{var t,n;console.log("value",e),console.log("ISO string",{from:(t=e==null?void 0:e.from)==null?void 0:t.toISOString(),to:(n=e==null?void 0:e.to)==null?void 0:n.toISOString()})}}},R={render:e=>{const[t,n]=m.useState({from:new Date,to:new Date});return s.jsx(_,{...e,value:t,onChange:c=>n(c)})}};var $,G,U;S.parameters={...S.parameters,docs:{...($=S.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(U=(G=S.parameters)==null?void 0:G.docs)==null?void 0:U.source}}};var X,J,K;v.parameters={...v.parameters,docs:{...(X=v.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    showTemplateInValue: true,
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(K=(J=v.parameters)==null?void 0:J.docs)==null?void 0:K.source}}};var Z,ee,te;R.parameters={...R.parameters,docs:{...(Z=R.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  render: args => {
    const [value, setValue] = useState<DateRange | undefined>({
      from: new Date(),
      to: new Date()
    });
    return <DateRangePicker {...args} value={value} onChange={v => setValue(v)} />;
  }
}`,...(te=(ee=R.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};const vt=["Default","ShowTemplate","WithState"];export{S as Default,v as ShowTemplate,R as WithState,vt as __namedExportsOrder,St as default};
