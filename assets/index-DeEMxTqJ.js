import{a as R,b as _,_ as b,f as y,c as F,h as se,g as ae,d as ie,e as de,i as le}from"./index-CxXVImLN.js";import{r as o}from"./index-DRjF_FHU.js";import{$ as A}from"./index-D4PmrNqQ.js";import{$ as ue,a as fe}from"./index-yJl9Mbgj.js";import{$ as W}from"./index-nVMawZv2.js";import{h as $e,$ as pe,R as be}from"./index-RoT-dC5i.js";const M="dismissableLayer.update",ve="dismissableLayer.pointerDownOutside",Ee="dismissableLayer.focusOutside";let H;const me=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ge=o.forwardRef((e,n)=>{var t;const{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...E}=e,u=o.useContext(me),[f,I]=o.useState(null),p=(t=f==null?void 0:f.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,N]=o.useState({}),d=R(n,$=>I($)),D=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),C=D.indexOf(v),m=f?D.indexOf(f):-1,g=u.layersWithOutsidePointerEventsDisabled.size>0,P=m>=C,re=he($=>{const T=$.target,V=[...u.branches].some(w=>w.contains(T));!P||V||(s==null||s($),a==null||a($),$.defaultPrevented||l==null||l())},p),B=De($=>{const T=$.target;[...u.branches].some(w=>w.contains(T))||(i==null||i($),a==null||a($),$.defaultPrevented||l==null||l())},p);return ue($=>{m===u.layers.size-1&&(r==null||r($),!$.defaultPrevented&&l&&($.preventDefault(),l()))},p),o.useEffect(()=>{if(f)return c&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(H=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),j(),()=>{c&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=H)}},[f,p,c,u]),o.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),j())},[f,u]),o.useEffect(()=>{const $=()=>N({});return document.addEventListener(M,$),()=>document.removeEventListener(M,$)},[]),o.createElement(_.div,b({},E,{ref:d,style:{pointerEvents:g?P?"auto":"none":void 0,...e.style},onFocusCapture:y(e.onFocusCapture,B.onFocusCapture),onBlurCapture:y(e.onBlurCapture,B.onBlurCapture),onPointerDownCapture:y(e.onPointerDownCapture,re.onPointerDownCapture)}))});function he(e,n=globalThis==null?void 0:globalThis.document){const t=F(e),c=o.useRef(!1),r=o.useRef(()=>{});return o.useEffect(()=>{const s=a=>{if(a.target&&!c.current){let E=function(){Y(ve,t,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(n.removeEventListener("click",r.current),r.current=E,n.addEventListener("click",r.current,{once:!0})):E()}else n.removeEventListener("click",r.current);c.current=!1},i=window.setTimeout(()=>{n.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),n.removeEventListener("pointerdown",s),n.removeEventListener("click",r.current)}},[n,t]),{onPointerDownCapture:()=>c.current=!0}}function De(e,n=globalThis==null?void 0:globalThis.document){const t=F(e),c=o.useRef(!1);return o.useEffect(()=>{const r=s=>{s.target&&!c.current&&Y(Ee,t,{originalEvent:s},{discrete:!1})};return n.addEventListener("focusin",r),()=>n.removeEventListener("focusin",r)},[n,t]),{onFocusCapture:()=>c.current=!0,onBlurCapture:()=>c.current=!1}}function j(){const e=new CustomEvent(M);document.dispatchEvent(e)}function Y(e,n,t,{discrete:c}){const r=t.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:t});n&&r.addEventListener(e,n,{once:!0}),c?se(r,s):r.dispatchEvent(s)}const L="focusScope.autoFocusOnMount",S="focusScope.autoFocusOnUnmount",z={bubbles:!1,cancelable:!0},Oe=o.forwardRef((e,n)=>{const{loop:t=!1,trapped:c=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...i}=e,[a,l]=o.useState(null),E=F(r),u=F(s),f=o.useRef(null),I=R(n,d=>l(d)),p=o.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;o.useEffect(()=>{if(c){let d=function(m){if(p.paused||!a)return;const g=m.target;a.contains(g)?f.current=g:O(f.current,{select:!0})},D=function(m){if(p.paused||!a)return;const g=m.relatedTarget;g!==null&&(a.contains(g)||O(f.current,{select:!0}))},v=function(m){if(document.activeElement===document.body)for(const P of m)P.removedNodes.length>0&&O(a)};document.addEventListener("focusin",d),document.addEventListener("focusout",D);const C=new MutationObserver(v);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",D),C.disconnect()}}},[c,a,p.paused]),o.useEffect(()=>{if(a){Z.add(p);const d=document.activeElement;if(!a.contains(d)){const v=new CustomEvent(L,z);a.addEventListener(L,E),a.dispatchEvent(v),v.defaultPrevented||(ye(Re(q(a)),{select:!0}),document.activeElement===d&&O(a))}return()=>{a.removeEventListener(L,E),setTimeout(()=>{const v=new CustomEvent(S,z);a.addEventListener(S,u),a.dispatchEvent(v),v.defaultPrevented||O(d??document.body,{select:!0}),a.removeEventListener(S,u),Z.remove(p)},0)}}},[a,E,u,p]);const N=o.useCallback(d=>{if(!t&&!c||p.paused)return;const D=d.key==="Tab"&&!d.altKey&&!d.ctrlKey&&!d.metaKey,v=document.activeElement;if(D&&v){const C=d.currentTarget,[m,g]=Ce(C);m&&g?!d.shiftKey&&v===g?(d.preventDefault(),t&&O(m,{select:!0})):d.shiftKey&&v===m&&(d.preventDefault(),t&&O(g,{select:!0})):v===C&&d.preventDefault()}},[t,c,p.paused]);return o.createElement(_.div,b({tabIndex:-1},i,{ref:I,onKeyDown:N}))});function ye(e,{select:n=!1}={}){const t=document.activeElement;for(const c of e)if(O(c,{select:n}),document.activeElement!==t)return}function Ce(e){const n=q(e),t=G(n,e),c=G(n.reverse(),e);return[t,c]}function q(e){const n=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:c=>{const r=c.tagName==="INPUT"&&c.type==="hidden";return c.disabled||c.hidden||r?NodeFilter.FILTER_SKIP:c.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)n.push(t.currentNode);return n}function G(e,n){for(const t of e)if(!_e(t,{upTo:n}))return t}function _e(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function xe(e){return e instanceof HTMLInputElement&&"select"in e}function O(e,{select:n=!1}={}){if(e&&e.focus){const t=document.activeElement;e.focus({preventScroll:!0}),e!==t&&xe(e)&&n&&e.select()}}const Z=Pe();function Pe(){let e=[];return{add(n){const t=e[0];n!==t&&(t==null||t.pause()),e=X(e,n),e.unshift(n)},remove(n){var t;e=X(e,n),(t=e[0])===null||t===void 0||t.resume()}}}function X(e,n){const t=[...e],c=t.indexOf(n);return c!==-1&&t.splice(c,1),t}function Re(e){return e.filter(n=>n.tagName!=="A")}const J=o.forwardRef((e,n)=>{const{children:t,...c}=e,r=o.Children.toArray(t),s=r.find(Fe);if(s){const i=s.props.children,a=r.map(l=>l===s?o.Children.count(i)>1?o.Children.only(null):o.isValidElement(i)?i.props.children:null:l);return o.createElement(k,b({},c,{ref:n}),o.isValidElement(i)?o.cloneElement(i,void 0,a):null)}return o.createElement(k,b({},c,{ref:n}),t)});J.displayName="Slot";const k=o.forwardRef((e,n)=>{const{children:t,...c}=e;return o.isValidElement(t)?o.cloneElement(t,{...Ie(c,t.props),ref:n?ae(n,t.ref):t.ref}):o.Children.count(t)>1?o.Children.only(null):null});k.displayName="SlotClone";const Te=({children:e})=>o.createElement(o.Fragment,null,e);function Fe(e){return o.isValidElement(e)&&e.type===Te}function Ie(e,n){const t={...n};for(const c in n){const r=e[c],s=n[c];/^on[A-Z]/.test(c)?r&&s?t[c]=(...a)=>{s(...a),r(...a)}:r&&(t[c]=r):c==="style"?t[c]={...r,...s}:c==="className"&&(t[c]=[r,s].filter(Boolean).join(" "))}return{...e,...t}}const Q="Dialog",[ee,tt]=ie(Q),[Ne,h]=ee(Q),we=e=>{const{__scopeDialog:n,children:t,open:c,defaultOpen:r,onOpenChange:s,modal:i=!0}=e,a=o.useRef(null),l=o.useRef(null),[E=!1,u]=de({prop:c,defaultProp:r,onChange:s});return o.createElement(Ne,{scope:n,triggerRef:a,contentRef:l,contentId:A(),titleId:A(),descriptionId:A(),open:E,onOpenChange:u,onOpenToggle:o.useCallback(()=>u(f=>!f),[u]),modal:i},t)},Ae="DialogTrigger",Le=o.forwardRef((e,n)=>{const{__scopeDialog:t,...c}=e,r=h(Ae,t),s=R(n,r.triggerRef);return o.createElement(_.button,b({type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":K(r.open)},c,{ref:s,onClick:y(e.onClick,r.onOpenToggle)}))}),te="DialogPortal",[Se,ne]=ee(te,{forceMount:void 0}),Me=e=>{const{__scopeDialog:n,forceMount:t,children:c,container:r}=e,s=h(te,n);return o.createElement(Se,{scope:n,forceMount:t},o.Children.map(c,i=>o.createElement(W,{present:t||s.open},o.createElement(fe,{asChild:!0,container:r},i))))},U="DialogOverlay",ke=o.forwardRef((e,n)=>{const t=ne(U,e.__scopeDialog),{forceMount:c=t.forceMount,...r}=e,s=h(U,e.__scopeDialog);return s.modal?o.createElement(W,{present:c||s.open},o.createElement(Ue,b({},r,{ref:n}))):null}),Ue=o.forwardRef((e,n)=>{const{__scopeDialog:t,...c}=e,r=h(U,t);return o.createElement(be,{as:J,allowPinchZoom:!0,shards:[r.contentRef]},o.createElement(_.div,b({"data-state":K(r.open)},c,{ref:n,style:{pointerEvents:"auto",...c.style}})))}),x="DialogContent",We=o.forwardRef((e,n)=>{const t=ne(x,e.__scopeDialog),{forceMount:c=t.forceMount,...r}=e,s=h(x,e.__scopeDialog);return o.createElement(W,{present:c||s.open},s.modal?o.createElement(Ke,b({},r,{ref:n})):o.createElement(Be,b({},r,{ref:n})))}),Ke=o.forwardRef((e,n)=>{const t=h(x,e.__scopeDialog),c=o.useRef(null),r=R(n,t.contentRef,c);return o.useEffect(()=>{const s=c.current;if(s)return $e(s)},[]),o.createElement(oe,b({},e,{ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:y(e.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=t.triggerRef.current)===null||i===void 0||i.focus()}),onPointerDownOutside:y(e.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:y(e.onFocusOutside,s=>s.preventDefault())}))}),Be=o.forwardRef((e,n)=>{const t=h(x,e.__scopeDialog),c=o.useRef(!1),r=o.useRef(!1);return o.createElement(oe,b({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i;if((i=e.onCloseAutoFocus)===null||i===void 0||i.call(e,s),!s.defaultPrevented){var a;c.current||(a=t.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}c.current=!1,r.current=!1},onInteractOutside:s=>{var i,a;(i=e.onInteractOutside)===null||i===void 0||i.call(e,s),s.defaultPrevented||(c.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=s.target;((a=t.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}}))}),oe=o.forwardRef((e,n)=>{const{__scopeDialog:t,trapFocus:c,onOpenAutoFocus:r,onCloseAutoFocus:s,...i}=e,a=h(x,t),l=o.useRef(null),E=R(n,l);return pe(),o.createElement(o.Fragment,null,o.createElement(Oe,{asChild:!0,loop:!0,trapped:c,onMountAutoFocus:r,onUnmountAutoFocus:s},o.createElement(ge,b({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":K(a.open)},i,{ref:E,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),ce="DialogTitle",Ve=o.forwardRef((e,n)=>{const{__scopeDialog:t,...c}=e,r=h(ce,t);return o.createElement(_.h2,b({id:r.titleId},c,{ref:n}))}),He="DialogDescription",je=o.forwardRef((e,n)=>{const{__scopeDialog:t,...c}=e,r=h(He,t);return o.createElement(_.p,b({id:r.descriptionId},c,{ref:n}))}),ze="DialogClose",Ge=o.forwardRef((e,n)=>{const{__scopeDialog:t,...c}=e,r=h(ze,t);return o.createElement(_.button,b({type:"button"},c,{ref:n,onClick:y(e.onClick,()=>r.onOpenChange(!1))}))});function K(e){return e?"open":"closed"}const Ze="DialogTitleWarning",[nt,ot]=le(Ze,{contentName:x,titleName:ce,docsSlug:"dialog"}),ct=we,rt=Le,st=Me,at=ke,it=We,dt=Ve,lt=je,ut=Ge;export{ct as $,rt as a,at as b,it as c,ut as d,dt as e,lt as f,st as g,tt as h,nt as i};
