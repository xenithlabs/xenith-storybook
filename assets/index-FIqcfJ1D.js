import{d as k,_ as S,a as K,e as B,h as Y,b as D,f as $}from"./index-BgmTQNcy.js";import{r as t}from"./index-l2PZgWEW.js";import{$ as V}from"./index-DjtABA7c.js";import{$ as z}from"./index-DPMSfDr2.js";const H=t.createContext(void 0);function j(e){const o=t.useContext(H);return e||o||"ltr"}const C="rovingFocusGroup.onEntryFocus",q={bubbles:!1,cancelable:!0},_="RovingFocusGroup",[w,P,J]=V(_),[Q,ie]=k(_,[J]),[W,X]=Q(_),Z=t.forwardRef((e,o)=>t.createElement(w.Provider,{scope:e.__scopeRovingFocusGroup},t.createElement(w.Slot,{scope:e.__scopeRovingFocusGroup},t.createElement(ee,S({},e,{ref:o}))))),ee=t.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:c,orientation:n,loop:v=!1,dir:I,currentTabStopId:F,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:i,onEntryFocus:s,...E}=e,l=t.useRef(null),p=K(o,l),m=j(I),[f=null,u]=B({prop:F,defaultProp:g,onChange:i}),[x,a]=t.useState(!1),d=Y(s),y=P(c),R=t.useRef(!1),[O,A]=t.useState(0);return t.useEffect(()=>{const r=l.current;if(r)return r.addEventListener(C,d),()=>r.removeEventListener(C,d)},[d]),t.createElement(W,{scope:c,orientation:n,dir:m,loop:v,currentTabStopId:f,onItemFocus:t.useCallback(r=>u(r),[u]),onItemShiftTab:t.useCallback(()=>a(!0),[]),onFocusableItemAdd:t.useCallback(()=>A(r=>r+1),[]),onFocusableItemRemove:t.useCallback(()=>A(r=>r-1),[])},t.createElement(D.div,S({tabIndex:x||O===0?-1:0,"data-orientation":n},E,{ref:p,style:{outline:"none",...e.style},onMouseDown:$(e.onMouseDown,()=>{R.current=!0}),onFocus:$(e.onFocus,r=>{const N=!R.current;if(r.target===r.currentTarget&&N&&!x){const h=new CustomEvent(C,q);if(r.currentTarget.dispatchEvent(h),!h.defaultPrevented){const T=y().filter(b=>b.focusable),M=T.find(b=>b.active),L=T.find(b=>b.id===f),U=[M,L,...T].filter(Boolean).map(b=>b.ref.current);G(U)}}R.current=!1}),onBlur:$(e.onBlur,()=>a(!1))})))}),te="RovingFocusGroupItem",oe=t.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:c,focusable:n=!0,active:v=!1,tabStopId:I,...F}=e,g=z(),i=I||g,s=X(te,c),E=s.currentTabStopId===i,l=P(c),{onFocusableItemAdd:p,onFocusableItemRemove:m}=s;return t.useEffect(()=>{if(n)return p(),()=>m()},[n,p,m]),t.createElement(w.ItemSlot,{scope:c,id:i,focusable:n,active:v},t.createElement(D.span,S({tabIndex:E?0:-1,"data-orientation":s.orientation},F,{ref:o,onMouseDown:$(e.onMouseDown,f=>{n?s.onItemFocus(i):f.preventDefault()}),onFocus:$(e.onFocus,()=>s.onItemFocus(i)),onKeyDown:$(e.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){s.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const u=ce(f,s.orientation,s.dir);if(u!==void 0){f.preventDefault();let a=l().filter(d=>d.focusable).map(d=>d.ref.current);if(u==="last")a.reverse();else if(u==="prev"||u==="next"){u==="prev"&&a.reverse();const d=a.indexOf(f.currentTarget);a=s.loop?fe(a,d+1):a.slice(d+1)}setTimeout(()=>G(a))}})})))}),ne={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function re(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ce(e,o,c){const n=re(e.key,c);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ne[n]}function G(e){const o=document.activeElement;for(const c of e)if(c===o||(c.focus(),document.activeElement!==o))return}function fe(e,o){return e.map((c,n)=>e[(o+n)%e.length])}const $e=Z,le=oe;export{ie as $,j as a,$e as b,le as c};
