import{j as e}from"./jsx-runtime-DR9Q75dM.js";import{r as c}from"./index-DRjF_FHU.js";import{D as fe,a as xe,b as Se,f as $}from"./DropdownMenu-XER5NlNu.js";import{c as S}from"./cn-8RyR4BqC.js";import{t as te}from"./stringCase-DaZl3p-i.js";import{T as O,a as F}from"./Tag-PjBtdWRd.js";import{F as ge}from"./close-D2djoYoT.js";import{P as je,a as ve,b as Ce}from"./Popover-A4hNnO1p.js";import{d as we,I as ae,b as Ne}from"./useClickOutside-BS0O2wyX.js";import{T as A}from"./Truncate-4o_s824j.js";import{B as K}from"./Button-BfTE6Gaa.js";import{I as j}from"./Icon-CTnhpE1d.js";import{T as g}from"./Text-C8HBwI4b.js";import{B as R}from"./Badge-CQf0SPqP.js";import{F as z}from"./search-5X7N_xNn.js";import{S as J}from"./search-ai-H4BYauaj.js";import{F as P}from"./check-C0C6JGvp.js";import"./index-DuXoWBk8.js";import"./index-CxRLcT2J.js";import"./index-CYnergnF.js";import"./index-ab-r6Yn4.js";import"./index-qtGI3euC.js";import"./index-DdILnG7L.js";import"./index-Bq6ilrdN.js";import"./index-CxZrjbHI.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";import"./chevron-right-D4FvqfWr.js";import"./styles-x1yxmyQd.js";import"./index-Bb4qSo10.js";import"./mini-FlV67GHA.js";import"./spinner-ojW7ALd7.js";import"./chevron-down-CyV3wpL8.js";import"./clock-DRhx3Wks.js";import"./index-CAHntWCK.js";import"./index-HZDBD2ik.js";import"./Heading-DjlBwQyS.js";import"./Checkbox-LSeb53hr.js";import"./index-Bu1UD4WD.js";import"./Tooltip-D2ba4dcD.js";import"./index-BXQDTo2X.js";import"./CopyButton-_NYvsG3t.js";import"./copy-De8jvVXM.js";function U(r,i){let n;const a=function(...s){clearTimeout(n),n=setTimeout(()=>{r.apply(this,s),n=void 0},i)};return a.cancel=function(){clearTimeout(n),n=void 0},a.flush=function(...s){a.cancel(),r.apply(this,s)},a.pending=function(){return n!==void 0},a}function ye(r){const i=c.useRef(r);i.current=r,c.useEffect(()=>()=>{i.current()},[])}function Te(r,i=500){const n=c.useRef();ye(()=>{n.current&&n.current.cancel()});const a=c.useMemo(()=>{const s=U(r,i),o=(...m)=>s(...m);return o.cancel=()=>{s.cancel()},o.isPending=()=>!!n.current,o.flush=()=>s.flush(),o},[r,i]);return c.useEffect(()=>{n.current=U(r,i)},[r,i]),a}const be=()=>typeof window>"u"?!1:navigator.userAgent.toLowerCase().includes("mac"),N={Shift:"Shift",Ctrl:"Ctrl",Alt:"Alt",Cmd:"Cmd"},Me=r=>Object.values(N).includes(r);function Ie(r,i){const n=c.useCallback(a=>{const s=Array.isArray(r)?r:[r],o=be();s.map(d=>d.split("+").map(l=>l.trim()).filter(Boolean)).some(d=>d.every(l=>{if(Me(l)){if(!a.getModifierState)return!1;switch(l){case N.Cmd:return o&&a.getModifierState("Meta")||!o&&a.getModifierState("Control");case N.Ctrl:return a.getModifierState("Control");case N.Alt:return a.getModifierState("Alt");case N.Shift:return a.getModifierState("Shift");default:return!1}}return a.key===l}))&&i()},[r,i]);c.useEffect(()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}),[n])}const W=c.forwardRef(({className:r,value:i,onChange:n,columnOptions:a,column:s,defaultColumn:o,onColumnChange:m,leftComponent:h,inputProps:d,selectProps:l,...y},ne)=>{const v=c.useRef(null),k=c.useRef(null),[T,_]=c.useState(""),[u,q]=c.useState(i||[]),[se,E]=c.useState(s||o),[C,b]=c.useState(!1),ie=t=>{requestAnimationFrame(()=>{!t&&document.activeElement!==v.current&&b(!1)})},ce=c.useMemo(()=>a&&typeof a[0]=="string"?a.map(t=>({value:t,label:t&&te(t)})):a,[a]),oe=()=>{var t,p;(p=k.current)==null||p.scrollTo({left:(t=k.current)==null?void 0:t.scrollWidth})},w=t=>{q(t),n==null||n(t)},le=t=>{w([...u,t]),_("")},D=t=>{w(u.filter((p,x)=>x!==t))},L=()=>{w([])},ue=t=>{var p;t.key==="Enter"&&T.trim()!==""&&(le(T.trim()),t.shiftKey||((p=v.current)==null||p.blur(),b(!1))),t.key==="Backspace"&&T.trim()===""&&D(u.length-1)},me=t=>{var x;const p=(x=t.clipboardData)==null?void 0:x.getData("text/plain");if(p){const pe=/\r\n|\r|\n/,he=p.split(pe).map(V=>V.trim()).filter(V=>V!=="");w([...u,...he])}t.preventDefault()},de=t=>{E(t),m==null||m(t)};return c.useEffect(()=>{q(i||[])},[i]),c.useEffect(()=>{E(s!==void 0?s:o)},[s,o]),c.useEffect(()=>{C&&oe()},[u,C]),Ie("Escape",()=>{var t;b(!1),(t=v.current)==null||t.blur()}),e.jsxs(je,{open:C,onOpenChange:ie,children:[e.jsxs("div",{ref:ne,className:S("flex h-10 border divide-x w-[620px] bg-bg-default border-border-default divide-border-default rounded-radius-md",r),...y,children:[h&&e.jsx("div",{className:"w-[44px] shrink-0 flex items-center justify-center ",children:h}),e.jsx(we,{options:ce,isOptionSearchable:!1,placeholder:"Select Column",noBorder:!0,noBorderHeightAdjusted:!0,...l,className:S("w-40 shrink-0",l==null?void 0:l.className),menuClassName:S("mt-[3px]",l==null?void 0:l.menuClassName),value:se,onChange:de}),e.jsxs("div",{className:"flex overflow-hidden flex-1 gap-1 items-center pr-3","data-search-input":!0,children:[e.jsxs("div",{ref:k,onClick:()=>{var t;(t=v.current)==null||t.focus()},className:"flex overflow-auto flex-1 gap-2 px-2 cursor-text",style:{scrollbarWidth:"thin"},children:[u&&u.length>0&&e.jsx(e.Fragment,{children:C?e.jsx("div",{className:"flex gap-2 items-center",children:u==null?void 0:u.map((t,p)=>e.jsx(O,{className:"max-w-[106px]",onPointerDown:x=>{x.stopPropagation()},rightComponent:e.jsx(F,{onClose:()=>{D(p)}}),children:e.jsx(A,{fluid:!0,maxWidth:74,middleTruncate:!0,withTooltip:!0,middleTruncateEndLength:6,children:t})},`${t}-${p}`))}):e.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[u==null?void 0:u.slice(0,3).map((t,p)=>e.jsx(O,{className:"max-w-[88px]",rightComponent:e.jsx(F,{onClose:x=>{x.stopPropagation(),x.preventDefault(),D(p)}}),children:e.jsx(A,{fluid:!0,maxWidth:56,middleTruncate:!0,withTooltip:!0,middleTruncateEndLength:4,children:t})},`${t}-${p}`)),(u==null?void 0:u.length)>3&&e.jsxs(O,{className:"whitespace-nowrap",children:["+",u.length-3," more"]})]})}),e.jsx(ae,{ref:v,placeholder:u.length>0?" ":"Multi Search",...d,containerClassName:S(d==null?void 0:d.containerClassName,"border-none h-[38px] px-0",{"min-w-[160px]":C}),value:T,onChange:t=>{_(t.target.value)},onClear:()=>{L()},onKeyDown:ue,onFocus:()=>{b(!0)},onPaste:me})]}),u.length>0&&e.jsx(K,{variant:"nude",theme:"neutral",size:"xs",icon:e.jsx(j,{icon:e.jsx(ge,{}),size:"lg",className:"text-text-weaker"}),iconOnly:!0,onClick:L})]})]}),e.jsx(ve,{className:"w-0 h-0",tabIndex:-1}),e.jsx(Oe,{value:u,onValueChange:w})]})});W.displayName="MultiSearchInput";const Oe=({value:r,onValueChange:i})=>{const n=s=>{i(r.filter((o,m)=>m!==s))},a=()=>{i([])};return e.jsxs(Ce,{side:"bottom",align:"start",sideOffset:-12,className:"px-1 py-3 space-y-2 w-[620px]",onOpenAutoFocus:s=>{s.preventDefault()},onInteractOutside:s=>{s.target.closest("[data-search-input]")&&s.preventDefault()},onPointerDownOutside:s=>{s.target.closest("[data-search-input]")&&s.preventDefault()},children:[e.jsxs("div",{className:"px-2 h-[23px] flex justify-between items-center",children:[e.jsx(g,{variant:"semiBold",className:"uppercase text-text-weaker",children:"Searching For"}),e.jsx(K,{variant:"link",size:"xs",className:"max-w-[47px]",onClick:a,children:"Clear all"})]}),e.jsx("div",{className:"max-h-[256px] overflow-auto flex flex-wrap gap-2",children:r.map((s,o)=>e.jsx(O,{rightComponent:e.jsx(F,{onClose:()=>n(o)}),className:"max-w-full",children:e.jsx(A,{fluid:!0,minWidth:0,maxWidth:"max-w-full",children:s})},o))}),e.jsxs("div",{className:"flex justify-between pt-2 pr-3 pl-2 border-t border-border-default",children:[e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(R,{theme:"neutral",variant:"outline",children:"Esc"}),e.jsx(g,{className:"text-text-weaker",children:"to close"})]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(g,{children:"Press"}),e.jsx(R,{theme:"neutral",variant:"outline",children:"Shift ⇧"}),e.jsx(g,{children:"+"}),e.jsx(R,{theme:"neutral",variant:"outline",children:"Enter ↵"}),e.jsx(g,{className:"text-text-weaker",children:"to add new search parameter"})]})]})]})};W.__docgenInfo={description:"",methods:[],displayName:"MultiSearchInput"};const f={Basic:"basic",Multi:"multi"},B=({className:r,containerClassName:i,basicSearchProps:n,multiSearchProps:a,searchType:s=f.Basic,onSearchTypeChange:o})=>{const[m,h]=c.useState(s||f.Basic),d=y=>{h(y),o==null||o(y)};c.useEffect(()=>{h==null||h(s)},[s]);const l=()=>{switch(m){case f.Basic:return e.jsx(re,{...n,className:S(r,n==null?void 0:n.className),leftComponent:e.jsx(Ne,{className:"border-r-0 px-2.5",children:e.jsx(H,{value:m,onChange:d})})});case f.Multi:return e.jsx(W,{...a,leftComponent:e.jsx(H,{value:m,onChange:d})});default:return null}};return e.jsx("div",{className:S("h-10",i),children:l()})},H=({value:r,onChange:i})=>{const[n,a]=c.useState(!1);return e.jsxs(fe,{open:n,onOpenChange:a,children:[e.jsx(xe,{asChild:!0,children:e.jsx(K,{variant:n?"nude":"outline",theme:"neutral",size:"xs",className:S("gap-0 px-0 h-6 min-w-6 hover:bg-accent-weak hover:border-0",n&&"bg-accent-weak"),icon:e.jsx(j,{icon:r===f.Basic?e.jsx(z,{}):e.jsx(J,{}),className:"text-text-accent"})})}),e.jsxs(Se,{className:"w-[176px]",side:"bottom",align:"start",alignOffset:-11,sideOffset:10,children:[e.jsxs($,{onSelect:()=>{i(f.Basic)},className:"flex justify-between text-text-weak",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{icon:e.jsx(z,{})}),e.jsx(g,{variant:"medium",children:"Basic Search"})]}),r===f.Basic&&e.jsx(j,{icon:e.jsx(P,{}),className:"text-text-accent"})]}),e.jsxs($,{onSelect:()=>{i(f.Multi)},className:"flex justify-between text-text-weak",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{icon:e.jsx(J,{})}),e.jsx(g,{variant:"medium",children:"Multi Search"})]}),r===f.Multi&&e.jsx(j,{icon:e.jsx(P,{}),className:"text-text-accent"})]})]})]})},re=c.forwardRef(({delay:r=500,value:i,onChange:n,...a},s)=>{const[o,m]=c.useState(i),h=Te(n||(()=>{}),r),d=l=>{m(l.target.value),h(l)};return c.useEffect(()=>{m(i)},[i]),e.jsx(ae,{ref:s,type:"text",clearable:!0,...a,value:o,onChange:d,containerClassName:S("w-[620px]",a.containerClassName),placeholder:a.placeholder?a.rawPlaceholder?a.placeholder:te(a.placeholder):"Search"})});re.displayName="BasicSearchInput";B.__docgenInfo={description:"",methods:[],displayName:"MultiSearch",props:{className:{required:!1,tsType:{name:"string"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},basicSearchProps:{required:!1,tsType:{name:"Omit",elements:[{name:"BasicSearchProps"},{name:"literal",value:'"leftComponent"'}],raw:'Omit<BasicSearchProps, "leftComponent">'},description:""},multiSearchProps:{required:!1,tsType:{name:"Omit",elements:[{name:"MultiSearchInputProps"},{name:"literal",value:'"leftComponent"'}],raw:'Omit<MultiSearchInputProps, "leftComponent">'},description:""},searchType:{required:!1,tsType:{name:"SearchType"},description:"",defaultValue:{value:'"basic"',computed:!1}},onSearchTypeChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(searchType: SearchType) => void",signature:{arguments:[{type:{name:"SearchType"},name:"searchType"}],return:{name:"void"}}},description:""}}};const vt={title:"Xenith UI/Components/MultiSearch",component:B,tags:["autodocs"]},M={args:{multiSearchProps:{columnOptions:["id","name","email"],defaultColumn:"id"}},render:r=>e.jsx("div",{className:"w-[800px] h-[400px]",children:e.jsx(B,{...r})})},I={args:{multiSearchProps:{columnOptions:["id","name","email"],defaultColumn:"id"}},render:r=>{const[i,n]=c.useState(""),[a,s]=c.useState([]),[o,m]=c.useState(""),[h,d]=c.useState(f.Basic);return e.jsxs("div",{className:"w-[800px] h-[400px]",children:[e.jsx(B,{...r,basicSearchProps:{value:i,onChange:l=>n(l.target.value),onClear:()=>n(""),...r.basicSearchProps},multiSearchProps:{value:a,onChange:s,column:o,onColumnChange:m,...r.multiSearchProps},searchType:h,onSearchTypeChange:d}),e.jsx("pre",{children:JSON.stringify({search:i,multiSearchValue:a,multiSearchColumn:o,searchType:h},null,2)})]})}};var X,G,Q;M.parameters={...M.parameters,docs:{...(X=M.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    multiSearchProps: {
      columnOptions: ["id", "name", "email"],
      defaultColumn: "id"
    }
  },
  render: args => <div className="w-[800px] h-[400px]">
      <MultiSearch {...args} />
    </div>
}`,...(Q=(G=M.parameters)==null?void 0:G.docs)==null?void 0:Q.source}}};var Y,Z,ee;I.parameters={...I.parameters,docs:{...(Y=I.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    multiSearchProps: {
      columnOptions: ["id", "name", "email"],
      defaultColumn: "id"
    }
  },
  render: args => {
    const [search, setSearch] = useState<string>("");
    const [multiSearchValue, setMultiSearchValue] = useState<string[]>([]);
    const [multiSearchColumn, setMultiSearchColumn] = useState<string>("");
    const [searchType, setSearchType] = useState<SearchType>(SearchType.Basic);
    return <div className="w-[800px] h-[400px]">
        <MultiSearch {...args} basicSearchProps={{
        value: search,
        onChange: e => setSearch(e.target.value),
        onClear: () => setSearch(""),
        ...args.basicSearchProps
      }} multiSearchProps={{
        value: multiSearchValue,
        onChange: setMultiSearchValue,
        column: multiSearchColumn,
        onColumnChange: setMultiSearchColumn,
        ...args.multiSearchProps
      }} searchType={searchType} onSearchTypeChange={setSearchType} />

        <pre>
          {JSON.stringify({
          search,
          multiSearchValue,
          multiSearchColumn,
          searchType
        }, null, 2)}
        </pre>
      </div>;
  }
}`,...(ee=(Z=I.parameters)==null?void 0:Z.docs)==null?void 0:ee.source}}};const Ct=["Default","WithControlledValue"];export{M as Default,I as WithControlledValue,Ct as __namedExportsOrder,vt as default};
