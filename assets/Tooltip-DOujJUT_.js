import{j as N}from"./jsx-runtime-DWbWqHZ-.js";import{r as o}from"./index-l2PZgWEW.js";import{_ as g,c as U,d as Y,a as H,b as X,f as T,e as Z}from"./index-BgmTQNcy.js";import{$ as J,a as Q}from"./index-C76mvIvD.js";import{$ as W}from"./index-DPMSfDr2.js";import{$ as S,a as ee,b as te,c as oe}from"./index-CIGe9IjL.js";import{$ as V}from"./index-DZOIkxWA.js";import{$ as ne}from"./index-vMKBQQL5.js";import{c as j}from"./cn-C-5SdYIA.js";const re=o.forwardRef((t,n)=>{const{children:e,...r}=t,a=o.Children.toArray(e),c=a.find(ae);if(c){const s=c.props.children,u=a.map(l=>l===c?o.Children.count(s)>1?o.Children.only(null):o.isValidElement(s)?s.props.children:null:l);return o.createElement(D,g({},r,{ref:n}),o.isValidElement(s)?o.cloneElement(s,void 0,u):null)}return o.createElement(D,g({},r,{ref:n}),e)});re.displayName="Slot";const D=o.forwardRef((t,n)=>{const{children:e,...r}=t;return o.isValidElement(e)?o.cloneElement(e,{...ce(r,e.props),ref:n?U(n,e.ref):e.ref}):o.Children.count(e)>1?o.Children.only(null):null});D.displayName="SlotClone";const G=({children:t})=>o.createElement(o.Fragment,null,t);function ae(t){return o.isValidElement(t)&&t.type===G}function ce(t,n){const e={...n};for(const r in n){const a=t[r],c=n[r];/^on[A-Z]/.test(r)?a&&c?e[r]=(...u)=>{c(...u),a(...u)}:a&&(e[r]=a):r==="style"?e[r]={...a,...c}:r==="className"&&(e[r]=[a,c].filter(Boolean).join(" "))}return{...t,...e}}const[_,He]=Y("Tooltip",[S]),O=S(),se="TooltipProvider",le=700,R="tooltip.open",[ie,k]=_(se),ue=t=>{const{__scopeTooltip:n,delayDuration:e=le,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:c}=t,[s,u]=o.useState(!0),l=o.useRef(!1),d=o.useRef(0);return o.useEffect(()=>{const i=d.current;return()=>window.clearTimeout(i)},[]),o.createElement(ie,{scope:n,isOpenDelayed:s,delayDuration:e,onOpen:o.useCallback(()=>{window.clearTimeout(d.current),u(!1)},[]),onClose:o.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:o.useCallback(i=>{l.current=i},[]),disableHoverableContent:a},c)},L="Tooltip",[de,P]=_(L),fe=t=>{const{__scopeTooltip:n,children:e,open:r,defaultOpen:a=!1,onOpenChange:c,disableHoverableContent:s,delayDuration:u}=t,l=k(L,t.__scopeTooltip),d=O(n),[i,f]=o.useState(null),m=W(),p=o.useRef(0),$=s??l.disableHoverableContent,v=u??l.delayDuration,b=o.useRef(!1),[x=!1,h]=Z({prop:r,defaultProp:a,onChange:I=>{I?(l.onOpen(),document.dispatchEvent(new CustomEvent(R))):l.onClose(),c==null||c(I)}}),y=o.useMemo(()=>x?b.current?"delayed-open":"instant-open":"closed",[x]),C=o.useCallback(()=>{window.clearTimeout(p.current),b.current=!1,h(!0)},[h]),E=o.useCallback(()=>{window.clearTimeout(p.current),h(!1)},[h]),A=o.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,h(!0)},v)},[v,h]);return o.useEffect(()=>()=>window.clearTimeout(p.current),[]),o.createElement(te,d,o.createElement(de,{scope:n,contentId:m,open:x,stateAttribute:y,trigger:i,onTriggerChange:f,onTriggerEnter:o.useCallback(()=>{l.isOpenDelayed?A():C()},[l.isOpenDelayed,A,C]),onTriggerLeave:o.useCallback(()=>{$?E():window.clearTimeout(p.current)},[E,$]),onOpen:C,onClose:E,disableHoverableContent:$},e))},M="TooltipTrigger",pe=o.forwardRef((t,n)=>{const{__scopeTooltip:e,...r}=t,a=P(M,e),c=k(M,e),s=O(e),u=o.useRef(null),l=H(n,u,a.onTriggerChange),d=o.useRef(!1),i=o.useRef(!1),f=o.useCallback(()=>d.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.createElement(ee,g({asChild:!0},s),o.createElement(X.button,g({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},r,{ref:l,onPointerMove:T(t.onPointerMove,m=>{m.pointerType!=="touch"&&!i.current&&!c.isPointerInTransitRef.current&&(a.onTriggerEnter(),i.current=!0)}),onPointerLeave:T(t.onPointerLeave,()=>{a.onTriggerLeave(),i.current=!1}),onPointerDown:T(t.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:T(t.onFocus,()=>{d.current||a.onOpen()}),onBlur:T(t.onBlur,a.onClose),onClick:T(t.onClick,a.onClose)})))}),F="TooltipPortal",[$e,me]=_(F,{forceMount:void 0}),Se=t=>{const{__scopeTooltip:n,forceMount:e,children:r,container:a}=t,c=P(F,n);return o.createElement($e,{scope:n,forceMount:e},o.createElement(V,{present:e||c.open},o.createElement(J,{asChild:!0,container:a},r)))},w="TooltipContent",be=o.forwardRef((t,n)=>{const e=me(w,t.__scopeTooltip),{forceMount:r=e.forceMount,side:a="top",...c}=t,s=P(w,t.__scopeTooltip);return o.createElement(V,{present:r||s.open},s.disableHoverableContent?o.createElement(B,g({side:a},c,{ref:n})):o.createElement(ve,g({side:a},c,{ref:n})))}),ve=o.forwardRef((t,n)=>{const e=P(w,t.__scopeTooltip),r=k(w,t.__scopeTooltip),a=o.useRef(null),c=H(n,a),[s,u]=o.useState(null),{trigger:l,onClose:d}=e,i=a.current,{onPointerInTransitChange:f}=r,m=o.useCallback(()=>{u(null),f(!1)},[f]),p=o.useCallback(($,v)=>{const b=$.currentTarget,x={x:$.clientX,y:$.clientY},h=xe(x,b.getBoundingClientRect()),y=ge(x,h),C=Te(v.getBoundingClientRect()),E=Ce([...y,...C]);u(E),f(!0)},[f]);return o.useEffect(()=>()=>m(),[m]),o.useEffect(()=>{if(l&&i){const $=b=>p(b,i),v=b=>p(b,l);return l.addEventListener("pointerleave",$),i.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",$),i.removeEventListener("pointerleave",v)}}},[l,i,p,m]),o.useEffect(()=>{if(s){const $=v=>{const b=v.target,x={x:v.clientX,y:v.clientY},h=(l==null?void 0:l.contains(b))||(i==null?void 0:i.contains(b)),y=!ye(x,s);h?m():y&&(m(),d())};return document.addEventListener("pointermove",$),()=>document.removeEventListener("pointermove",$)}},[l,i,s,d,m]),o.createElement(B,g({},t,{ref:c}))}),[he,Ve]=_(L,{isInside:!1}),B=o.forwardRef((t,n)=>{const{__scopeTooltip:e,children:r,"aria-label":a,onEscapeKeyDown:c,onPointerDownOutside:s,...u}=t,l=P(w,e),d=O(e),{onClose:i}=l;return o.useEffect(()=>(document.addEventListener(R,i),()=>document.removeEventListener(R,i)),[i]),o.useEffect(()=>{if(l.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(l.trigger)&&i()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,i]),o.createElement(Q,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:i},o.createElement(oe,g({"data-state":l.stateAttribute},d,u,{ref:n,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),o.createElement(G,null,r),o.createElement(he,{scope:e,isInside:!0},o.createElement(ne,{id:l.contentId,role:"tooltip"},a||r))))});function xe(t,n){const e=Math.abs(n.top-t.y),r=Math.abs(n.bottom-t.y),a=Math.abs(n.right-t.x),c=Math.abs(n.left-t.x);switch(Math.min(e,r,a,c)){case c:return"left";case a:return"right";case e:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ge(t,n,e=5){const r=[];switch(n){case"top":r.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":r.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":r.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":r.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return r}function Te(t){const{top:n,right:e,bottom:r,left:a}=t;return[{x:a,y:n},{x:e,y:n},{x:e,y:r},{x:a,y:r}]}function ye(t,n){const{x:e,y:r}=t;let a=!1;for(let c=0,s=n.length-1;c<n.length;s=c++){const u=n[c].x,l=n[c].y,d=n[s].x,i=n[s].y;l>r!=i>r&&e<(d-u)*(r-l)/(i-l)+u&&(a=!a)}return a}function Ce(t){const n=t.slice();return n.sort((e,r)=>e.x<r.x?-1:e.x>r.x?1:e.y<r.y?-1:e.y>r.y?1:0),Ee(n)}function Ee(t){if(t.length<=1)return t.slice();const n=[];for(let r=0;r<t.length;r++){const a=t[r];for(;n.length>=2;){const c=n[n.length-1],s=n[n.length-2];if((c.x-s.x)*(a.y-s.y)>=(c.y-s.y)*(a.x-s.x))n.pop();else break}n.push(a)}n.pop();const e=[];for(let r=t.length-1;r>=0;r--){const a=t[r];for(;e.length>=2;){const c=e[e.length-1],s=e[e.length-2];if((c.x-s.x)*(a.y-s.y)>=(c.y-s.y)*(a.x-s.x))e.pop();else break}e.push(a)}return e.pop(),n.length===1&&e.length===1&&n[0].x===e[0].x&&n[0].y===e[0].y?n:n.concat(e)}const we=ue,Pe=fe,_e=pe,q=be,je=we,Ge=Pe,z=o.forwardRef(({className:t,...n},e)=>N.jsx(_e,{...n,ref:e,className:j("inline-flex items-center cursor-default",t)}));z.displayName="TooltipTrigger";const K=o.forwardRef(({className:t,sideOffset:n=4,children:e,...r},a)=>N.jsx(q,{ref:a,sideOffset:n,className:j("z-50 overflow-hidden rounded-md bg-bg-inverse px-3 py-1.5 left-0 text-white animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r,children:e}));K.displayName=q.displayName;z.__docgenInfo={description:"",methods:[],displayName:"TooltipTrigger"};K.__docgenInfo={description:"",methods:[],props:{sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};export{Se as $,Ge as T,je as a,z as b,K as c,pe as d};
