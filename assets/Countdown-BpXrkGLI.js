import{j as m}from"./jsx-runtime-DR9Q75dM.js";import{I as N}from"./Icon-Bs9G1Rwk.js";import{c as v}from"./cn-C-5SdYIA.js";import{F as C}from"./clock-C-cyK6yc.js";import{r as g}from"./index-DRjF_FHU.js";import{a as Y}from"./addDays-DUX3p28w.js";import{t as c,c as x}from"./constructFrom-rJN6zrQ_.js";import{d as w,m as S,a as b}from"./differenceInCalendarDays-akuTVAtC.js";import{e as j,a as A}from"./endOfMonth-CcewPeqj.js";import{T as H}from"./Text-BYjIVLkz.js";function R(n,s){const e=c(n);if(isNaN(s))return x(n,NaN);if(!s)return e;const t=e.getDate(),r=x(n,e.getTime());r.setMonth(e.getMonth()+s+1,0);const o=r.getDate();return t>=o?r:(e.setFullYear(r.getFullYear(),r.getMonth(),t),e)}function h(n,s){const{years:e=0,months:t=0,weeks:r=0,days:o=0,hours:i=0,minutes:a=0,seconds:u=0}=s,d=c(n),f=t||e?R(d,t+e*12):d,l=o||r?Y(f,o+r*7):f,p=a+i*60,y=(u+p*60)*1e3;return x(n,l.getTime()+y)}function M(n,s){const e=c(n),t=c(s),r=e.getTime()-t.getTime();return r<0?-1:r>0?1:r}function E(n,s){const e=c(n),t=c(s),r=e.getFullYear()-t.getFullYear(),o=e.getMonth()-t.getMonth();return r*12+o}function O(n,s){const e=c(n),t=c(s);return e.getFullYear()-t.getFullYear()}function $(n,s){const e=c(n),t=c(s),r=_(e,t),o=Math.abs(w(e,t));e.setDate(e.getDate()-r*o);const i=+(_(e,t)===-r),a=r*(o-i);return a===0?0:a}function _(n,s){const e=n.getFullYear()-s.getFullYear()||n.getMonth()-s.getMonth()||n.getDate()-s.getDate()||n.getHours()-s.getHours()||n.getMinutes()-s.getMinutes()||n.getSeconds()-s.getSeconds()||n.getMilliseconds()-s.getMilliseconds();return e<0?-1:e>0?1:e}function D(n){return s=>{const t=(n?Math[n]:Math.trunc)(s);return t===0?0:t}}function I(n,s){return+c(n)-+c(s)}function q(n,s,e){const t=I(n,s)/S;return D(e==null?void 0:e.roundingMethod)(t)}function L(n,s,e){const t=I(n,s)/b;return D(e==null?void 0:e.roundingMethod)(t)}function V(n){const s=c(n);return+j(s)==+A(s)}function W(n,s){const e=c(n),t=c(s),r=M(e,t),o=Math.abs(E(e,t));let i;if(o<1)i=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-r*o);let a=M(e,t)===-r;V(c(n))&&o===1&&M(n,t)===1&&(a=!1),i=r*(o-Number(a))}return i===0?0:i}function k(n,s,e){const t=I(n,s)/1e3;return D(e==null?void 0:e.roundingMethod)(t)}function P(n,s){const e=c(n),t=c(s),r=M(e,t),o=Math.abs(O(e,t));e.setFullYear(1584),t.setFullYear(1584);const i=M(e,t)===-r,a=r*(o-+i);return a===0?0:a}function B(n){const s=c(n.start),e=c(n.end),t={},r=P(e,s);r&&(t.years=r);const o=h(s,{years:t.years}),i=W(e,o);i&&(t.months=i);const a=h(o,{months:t.months}),u=$(e,a);u&&(t.days=u);const d=h(a,{days:t.days}),f=q(e,d);f&&(t.hours=f);const l=h(d,{hours:t.hours}),p=L(e,l);p&&(t.minutes=p);const T=h(l,{minutes:t.minutes}),y=k(e,T);return y&&(t.seconds=y),t}const F=g.createContext({}),z=({initialDuration:n=1e4,step:s=1e3,onCountdownEnd:e=()=>{},children:t})=>{const r=g.useRef(),[o,i]=g.useState(n),a=()=>{i(0),r.current&&clearInterval(r.current),r.current=null},u=()=>{r.current&&clearInterval(r.current),r.current=setInterval(()=>{if(o<=0){a(),e();return}i(l=>l-s)},s)},d=()=>{a(),i(n),u()};g.useEffect(()=>(d(),()=>{a()}),[n]),g.useEffect(()=>{o<=0&&a()},[o]);const f=B({start:0,end:o});return m.jsx(F.Provider,{value:{hours:f.hours||0,minutes:f.minutes||0,seconds:f.seconds||0},children:t})},G=({className:n,icon:s=m.jsx(N,{className:"text-text-warning",icon:m.jsx(C,{})}),...e})=>{const{hours:t,minutes:r,seconds:o}=g.useContext(F),i=String(t).padStart(2,"0"),a=String(r).padStart(2,"0"),u=String(o).padStart(2,"0"),d=t>0?`${i}:${a}:${u}`:`${a}:${u}`;return m.jsxs("div",{...e,className:v("text-text-warning flex items-center gap-1",n),children:[m.jsx("span",{className:"relative top-[2px]",children:s}),m.jsx(H,{variant:"semiBold",children:d})]})};z.__docgenInfo={description:"",methods:[],displayName:"Countdown",props:{initialDuration:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10000",computed:!1}},onCountdownEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1000",computed:!1}}},composes:["PropsWithChildren"]};G.__docgenInfo={description:"",methods:[],displayName:"CountdownText",props:{icon:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:'<Icon className="text-text-warning" icon={<ClockIcon />} />',computed:!1}}},composes:["HTMLAttributes"]};export{z as C,G as a};
