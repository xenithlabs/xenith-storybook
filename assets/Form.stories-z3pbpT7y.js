import{j as U}from"./jsx-runtime-DWbWqHZ-.js";import{R as p,r as $}from"./index-l2PZgWEW.js";import{S as Pt}from"./index-Cm6j2cFO.js";import{c as De}from"./cn-C-5SdYIA.js";import{L as jt}from"./Label-FDaRk8P_.js";import{t as yt}from"./styles-BNEhTmYy.js";import{I as qt}from"./useClickOutside-D-47QnXF.js";import"./index-CqnGoJLG.js";import"./index-CaNG7YX3.js";import"./index-Bb4qSo10.js";import"./Icon-BVoV0EQW.js";import"./search-Bt8qP1Fx.js";import"./close-Bwe4q-Z3.js";import"./chevron-down-jNWesQvo.js";import"./check-4u3gJW-P.js";import"./index-BgmTQNcy.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-fvTbNGom.js";import"./floating-ui.dom-BuxmzwbT.js";import"./Button-DjkywwbK.js";import"./styles-KGZWQfzh.js";import"./spinner-DNNsglCv.js";import"./index-DjcUcJmE.js";import"./Checkbox-BO35WX6q.js";import"./index-CZsjDy6p.js";import"./index-BmdjtsoG.js";import"./index-DZOIkxWA.js";var de=e=>e.type==="checkbox",ae=e=>e instanceof Date,T=e=>e==null;const mt=e=>typeof e=="object";var I=e=>!T(e)&&!Array.isArray(e)&&mt(e)&&!ae(e),gt=e=>I(e)&&e.target?de(e.target)?e.target.checked:e.target.value:e,Wt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ht=(e,s)=>e.has(Wt(s)),$t=e=>{const s=e.constructor&&e.constructor.prototype;return I(s)&&s.hasOwnProperty("isPrototypeOf")},Ne=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function N(e){let s;const t=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(Ne&&(e instanceof Blob||e instanceof FileList))&&(t||I(e)))if(s=t?[]:{},!t&&!$t(e))s=e;else for(const n in e)e.hasOwnProperty(n)&&(s[n]=N(e[n]));else return e;return s}var ye=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,c=(e,s,t)=>{if(!s||!I(e))return t;const n=ye(s.split(/[,[\].]+?/)).reduce((a,o)=>T(a)?a:a[o],e);return D(n)||n===e?D(e[s])?t:e[s]:n},K=e=>typeof e=="boolean",Oe=e=>/^\w*$/.test(e),vt=e=>ye(e.replace(/["|']|\]/g,"").split(/\.|\[/)),V=(e,s,t)=>{let n=-1;const a=Oe(s)?[s]:vt(s),o=a.length,y=o-1;for(;++n<o;){const g=a[n];let A=t;if(n!==y){const S=e[g];A=I(S)||Array.isArray(S)?S:isNaN(+a[n+1])?{}:[]}if(g==="__proto__")return;e[g]=A,e=e[g]}return e};const be={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},J={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},_t=p.createContext(null),we=()=>p.useContext(_t),Ht=e=>{const{children:s,...t}=e;return p.createElement(_t.Provider,{value:t},s)};var Ft=(e,s,t,n=!0)=>{const a={defaultValues:s._defaultValues};for(const o in e)Object.defineProperty(a,o,{get:()=>{const y=o;return s._proxyFormState[y]!==W.all&&(s._proxyFormState[y]=!n||W.all),t&&(t[y]=!0),e[y]}});return a},M=e=>I(e)&&!Object.keys(e).length,bt=(e,s,t,n)=>{t(e);const{name:a,...o}=e;return M(o)||Object.keys(o).length>=Object.keys(s).length||Object.keys(o).find(y=>s[y]===(!n||W.all))},_e=e=>Array.isArray(e)?e:[e],xt=(e,s,t)=>!e||!s||e===s||_e(e).some(n=>n&&(t?n===s:n.startsWith(s)||s.startsWith(n)));function Me(e){const s=p.useRef(e);s.current=e,p.useEffect(()=>{const t=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function Kt(e){const s=we(),{control:t=s.control,disabled:n,name:a,exact:o}=e||{},[y,g]=p.useState(t._formState),A=p.useRef(!0),S=p.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),v=p.useRef(a);return v.current=a,Me({disabled:n,next:h=>A.current&&xt(v.current,h.name,o)&&bt(h,S.current,t._updateFormState)&&g({...t._formState,...h}),subject:t._subjects.state}),p.useEffect(()=>(A.current=!0,S.current.isValid&&t._updateValid(!0),()=>{A.current=!1}),[t]),Ft(y,t,S.current,!1)}var G=e=>typeof e=="string",Vt=(e,s,t,n,a)=>G(e)?(n&&s.watch.add(e),c(t,e,a)):Array.isArray(e)?e.map(o=>(n&&s.watch.add(o),c(t,o))):(n&&(s.watchAll=!0),t);function Gt(e){const s=we(),{control:t=s.control,name:n,defaultValue:a,disabled:o,exact:y}=e||{},g=p.useRef(n);g.current=n,Me({disabled:o,subject:t._subjects.values,next:v=>{xt(g.current,v.name,y)&&S(N(Vt(g.current,t._names,v.values||t._formValues,!1,a)))}});const[A,S]=p.useState(t._getWatch(n,a));return p.useEffect(()=>t._removeUnmounted()),A}function Xt(e){const s=we(),{name:t,disabled:n,control:a=s.control,shouldUnregister:o}=e,y=ht(a._names.array,t),g=Gt({control:a,name:t,defaultValue:c(a._formValues,t,c(a._defaultValues,t,e.defaultValue)),exact:!0}),A=Kt({control:a,name:t}),S=p.useRef(a.register(t,{...e.rules,value:g,...K(e.disabled)?{disabled:e.disabled}:{}}));return p.useEffect(()=>{const v=a._options.shouldUnregister||o,h=(j,H)=>{const R=c(a._fields,j);R&&R._f&&(R._f.mount=H)};if(h(t,!0),v){const j=N(c(a._options.defaultValues,t));V(a._defaultValues,t,j),D(c(a._formValues,t))&&V(a._formValues,t,j)}return()=>{(y?v&&!a._state.action:v)?a.unregister(t):h(t,!1)}},[t,a,y,o]),p.useEffect(()=>{c(a._fields,t)&&a._updateDisabledField({disabled:n,fields:a._fields,name:t,value:c(a._fields,t)._f.value})},[n,t,a]),{field:{name:t,value:g,...K(n)||A.disabled?{disabled:A.disabled||n}:{},onChange:p.useCallback(v=>S.current.onChange({target:{value:gt(v),name:t},type:be.CHANGE}),[t]),onBlur:p.useCallback(()=>S.current.onBlur({target:{value:c(a._formValues,t),name:t},type:be.BLUR}),[t,a]),ref:v=>{const h=c(a._fields,t);h&&v&&(h._f.ref={focus:()=>v.focus(),select:()=>v.select(),setCustomValidity:j=>v.setCustomValidity(j),reportValidity:()=>v.reportValidity()})}},formState:A,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(A.errors,t)},isDirty:{enumerable:!0,get:()=>!!c(A.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!c(A.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!c(A.validatingFields,t)},error:{enumerable:!0,get:()=>c(A.errors,t)}})}}const zt=e=>e.render(Xt(e));var Jt=(e,s,t,n,a)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[n]:a||!0}}:{},tt=e=>({isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange,isOnAll:e===W.all,isOnTouch:e===W.onTouched}),rt=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const fe=(e,s,t,n)=>{for(const a of t||Object.keys(e)){const o=c(e,a);if(o){const{_f:y,...g}=o;if(y){if(y.refs&&y.refs[0]&&s(y.refs[0],a)&&!n)break;if(y.ref&&s(y.ref,y.name)&&!n)break;fe(g,s)}else I(g)&&fe(g,s)}}};var Qt=(e,s,t)=>{const n=ye(c(e,t));return V(n,"root",s[t]),V(e,t,n),e},Be=e=>e.type==="file",Z=e=>typeof e=="function",xe=e=>{if(!Ne)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Fe=e=>G(e),Pe=e=>e.type==="radio",Ve=e=>e instanceof RegExp;const st={value:!1,isValid:!1},it={value:!0,isValid:!0};var pt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?it:{value:e[0].value,isValid:!0}:it:st}return st};const nt={isValid:!1,value:null};var At=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,nt):nt;function at(e,s,t="validate"){if(Fe(e)||Array.isArray(e)&&e.every(Fe)||K(e)&&!e)return{type:t,message:Fe(e)?e:"",ref:s}}var ne=e=>I(e)&&!Ve(e)?e:{value:e,message:""},ot=async(e,s,t,n,a)=>{const{ref:o,refs:y,required:g,maxLength:A,minLength:S,min:v,max:h,pattern:j,validate:H,name:R,valueAsNumber:Ee,mount:Q,disabled:Y}=e._f,F=c(s,R);if(!Q||Y)return{};const X=y?y[0]:o,z=_=>{n&&X.reportValidity&&(X.setCustomValidity(K(_)?"":_||""),X.reportValidity())},E={},re=Pe(o),me=de(o),ee=re||me,se=(Ee||Be(o))&&D(o.value)&&D(F)||xe(o)&&o.value===""||F===""||Array.isArray(F)&&!F.length,B=Jt.bind(null,R,t,E),ge=(_,b,k,L=J.maxLength,q=J.minLength)=>{const P=_?b:k;E[R]={type:_?L:q,message:P,ref:o,...B(_?L:q,P)}};if(a?!Array.isArray(F)||!F.length:g&&(!ee&&(se||T(F))||K(F)&&!F||me&&!pt(y).isValid||re&&!At(y).isValid)){const{value:_,message:b}=Fe(g)?{value:!!g,message:g}:ne(g);if(_&&(E[R]={type:J.required,message:b,ref:X,...B(J.required,b)},!t))return z(b),E}if(!se&&(!T(v)||!T(h))){let _,b;const k=ne(h),L=ne(v);if(!T(F)&&!isNaN(F)){const q=o.valueAsNumber||F&&+F;T(k.value)||(_=q>k.value),T(L.value)||(b=q<L.value)}else{const q=o.valueAsDate||new Date(F),P=ue=>new Date(new Date().toDateString()+" "+ue),oe=o.type=="time",le=o.type=="week";G(k.value)&&F&&(_=oe?P(F)>P(k.value):le?F>k.value:q>new Date(k.value)),G(L.value)&&F&&(b=oe?P(F)<P(L.value):le?F<L.value:q<new Date(L.value))}if((_||b)&&(ge(!!_,k.message,L.message,J.max,J.min),!t))return z(E[R].message),E}if((A||S)&&!se&&(G(F)||a&&Array.isArray(F))){const _=ne(A),b=ne(S),k=!T(_.value)&&F.length>+_.value,L=!T(b.value)&&F.length<+b.value;if((k||L)&&(ge(k,_.message,b.message),!t))return z(E[R].message),E}if(j&&!se&&G(F)){const{value:_,message:b}=ne(j);if(Ve(_)&&!F.match(_)&&(E[R]={type:J.pattern,message:b,ref:o,...B(J.pattern,b)},!t))return z(b),E}if(H){if(Z(H)){const _=await H(F,s),b=at(_,X);if(b&&(E[R]={...b,...B(J.validate,b.message)},!t))return z(b.message),E}else if(I(H)){let _={};for(const b in H){if(!M(_)&&!t)break;const k=at(await H[b](F,s),X,b);k&&(_={...k,...B(b,k.message)},z(k.message),t&&(E[R]=_))}if(!M(_)&&(E[R]={ref:X,..._},!t))return E}}return z(!0),E};function Yt(e,s){const t=s.slice(0,-1).length;let n=0;for(;n<t;)e=D(e)?n++:e[s[n++]];return e}function Zt(e){for(const s in e)if(e.hasOwnProperty(s)&&!D(e[s]))return!1;return!0}function C(e,s){const t=Array.isArray(s)?s:Oe(s)?[s]:vt(s),n=t.length===1?e:Yt(e,t),a=t.length-1,o=t[a];return n&&delete n[o],a!==0&&(I(n)&&M(n)||Array.isArray(n)&&Zt(n))&&C(e,t.slice(0,-1)),e}var Le=()=>{let e=[];return{get observers(){return e},next:a=>{for(const o of e)o.next&&o.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(o=>o!==a)}}),unsubscribe:()=>{e=[]}}},pe=e=>T(e)||!mt(e);function te(e,s){if(pe(e)||pe(s))return e===s;if(ae(e)&&ae(s))return e.getTime()===s.getTime();const t=Object.keys(e),n=Object.keys(s);if(t.length!==n.length)return!1;for(const a of t){const o=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const y=s[a];if(ae(o)&&ae(y)||I(o)&&I(y)||Array.isArray(o)&&Array.isArray(y)?!te(o,y):o!==y)return!1}}return!0}var Dt=e=>e.type==="select-multiple",er=e=>Pe(e)||de(e),Te=e=>xe(e)&&e.isConnected,wt=e=>{for(const s in e)if(Z(e[s]))return!0;return!1};function Ae(e,s={}){const t=Array.isArray(e);if(I(e)||t)for(const n in e)Array.isArray(e[n])||I(e[n])&&!wt(e[n])?(s[n]=Array.isArray(e[n])?[]:{},Ae(e[n],s[n])):T(e[n])||(s[n]=!0);return s}function St(e,s,t){const n=Array.isArray(e);if(I(e)||n)for(const a in e)Array.isArray(e[a])||I(e[a])&&!wt(e[a])?D(s)||pe(t[a])?t[a]=Array.isArray(e[a])?Ae(e[a],[]):{...Ae(e[a])}:St(e[a],T(s)?{}:s[a],t[a]):t[a]=!te(e[a],s[a]);return t}var he=(e,s)=>St(e,s,Ae(s)),Et=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:n})=>D(e)?e:s?e===""?NaN:e&&+e:t&&G(e)?new Date(e):n?n(e):e;function Ue(e){const s=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):s.disabled))return Be(s)?s.files:Pe(s)?At(e.refs).value:Dt(s)?[...s.selectedOptions].map(({value:t})=>t):de(s)?pt(e.refs).value:Et(D(s.value)?e.ref.value:s.value,e)}var tr=(e,s,t,n)=>{const a={};for(const o of e){const y=c(s,o);y&&V(a,o,y._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:n}},ce=e=>D(e)?e:Ve(e)?e.source:I(e)?Ve(e.value)?e.value.source:e.value:e,rr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function lt(e,s,t){const n=c(e,t);if(n||Oe(t))return{error:n,name:t};const a=t.split(".");for(;a.length;){const o=a.join("."),y=c(s,o),g=c(e,o);if(y&&!Array.isArray(y)&&t!==o)return{name:t};if(g&&g.type)return{name:o,error:g};a.pop()}return{name:t}}var sr=(e,s,t,n,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(s||e):(t?n.isOnBlur:a.isOnBlur)?!e:(t?n.isOnChange:a.isOnChange)?e:!0,ir=(e,s)=>!ye(c(e,s)).length&&C(e,s);const nr={mode:W.onSubmit,reValidateMode:W.onChange,shouldFocusError:!0};function ar(e={}){let s={...nr,...e},t={submitCount:0,isDirty:!1,isLoading:Z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},n={},a=I(s.defaultValues)||I(s.values)?N(s.defaultValues||s.values)||{}:{},o=s.shouldUnregister?{}:N(a),y={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},A,S=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Le(),array:Le(),state:Le()},j=tt(s.mode),H=tt(s.reValidateMode),R=s.criteriaMode===W.all,Ee=r=>i=>{clearTimeout(S),S=setTimeout(r,i)},Q=async r=>{if(v.isValid||r){const i=s.resolver?M((await ee()).errors):await B(n,!0);i!==t.isValid&&h.state.next({isValid:i})}},Y=(r,i)=>{(v.isValidating||v.validatingFields)&&((r||Array.from(g.mount)).forEach(l=>{l&&(i?V(t.validatingFields,l,i):C(t.validatingFields,l))}),h.state.next({validatingFields:t.validatingFields,isValidating:!M(t.validatingFields)}))},F=(r,i=[],l,d,f=!0,u=!0)=>{if(d&&l){if(y.action=!0,u&&Array.isArray(c(n,r))){const m=l(c(n,r),d.argA,d.argB);f&&V(n,r,m)}if(u&&Array.isArray(c(t.errors,r))){const m=l(c(t.errors,r),d.argA,d.argB);f&&V(t.errors,r,m),ir(t.errors,r)}if(v.touchedFields&&u&&Array.isArray(c(t.touchedFields,r))){const m=l(c(t.touchedFields,r),d.argA,d.argB);f&&V(t.touchedFields,r,m)}v.dirtyFields&&(t.dirtyFields=he(a,o)),h.state.next({name:r,isDirty:_(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else V(o,r,i)},X=(r,i)=>{V(t.errors,r,i),h.state.next({errors:t.errors})},z=r=>{t.errors=r,h.state.next({errors:t.errors,isValid:!1})},E=(r,i,l,d)=>{const f=c(n,r);if(f){const u=c(o,r,D(l)?c(a,r):l);D(u)||d&&d.defaultChecked||i?V(o,r,i?u:Ue(f._f)):L(r,u),y.mount&&Q()}},re=(r,i,l,d,f)=>{let u=!1,m=!1;const x={name:r},w=!!(c(n,r)&&c(n,r)._f&&c(n,r)._f.disabled);if(!l||d){v.isDirty&&(m=t.isDirty,t.isDirty=x.isDirty=_(),u=m!==x.isDirty);const O=w||te(c(a,r),i);m=!!(!w&&c(t.dirtyFields,r)),O||w?C(t.dirtyFields,r):V(t.dirtyFields,r,!0),x.dirtyFields=t.dirtyFields,u=u||v.dirtyFields&&m!==!O}if(l){const O=c(t.touchedFields,r);O||(V(t.touchedFields,r,l),x.touchedFields=t.touchedFields,u=u||v.touchedFields&&O!==l)}return u&&f&&h.state.next(x),u?x:{}},me=(r,i,l,d)=>{const f=c(t.errors,r),u=v.isValid&&K(i)&&t.isValid!==i;if(e.delayError&&l?(A=Ee(()=>X(r,l)),A(e.delayError)):(clearTimeout(S),A=null,l?V(t.errors,r,l):C(t.errors,r)),(l?!te(f,l):f)||!M(d)||u){const m={...d,...u&&K(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...m},h.state.next(m)}},ee=async r=>{Y(r,!0);const i=await s.resolver(o,s.context,tr(r||g.mount,n,s.criteriaMode,s.shouldUseNativeValidation));return Y(r),i},se=async r=>{const{errors:i}=await ee(r);if(r)for(const l of r){const d=c(i,l);d?V(t.errors,l,d):C(t.errors,l)}else t.errors=i;return i},B=async(r,i,l={valid:!0})=>{for(const d in r){const f=r[d];if(f){const{_f:u,...m}=f;if(u){const x=g.array.has(u.name);Y([d],!0);const w=await ot(f,o,R,s.shouldUseNativeValidation&&!i,x);if(Y([d]),w[u.name]&&(l.valid=!1,i))break;!i&&(c(w,u.name)?x?Qt(t.errors,w,u.name):V(t.errors,u.name,w[u.name]):C(t.errors,u.name))}m&&await B(m,i,l)}}return l.valid},ge=()=>{for(const r of g.unMount){const i=c(n,r);i&&(i._f.refs?i._f.refs.every(l=>!Te(l)):!Te(i._f.ref))&&ke(r)}g.unMount=new Set},_=(r,i)=>(r&&i&&V(o,r,i),!te(He(),a)),b=(r,i,l)=>Vt(r,g,{...y.mount?o:D(i)?a:G(r)?{[r]:i}:i},l,i),k=r=>ye(c(y.mount?o:a,r,e.shouldUnregister?c(a,r,[]):[])),L=(r,i,l={})=>{const d=c(n,r);let f=i;if(d){const u=d._f;u&&(!u.disabled&&V(o,r,Et(i,u)),f=xe(u.ref)&&T(i)?"":i,Dt(u.ref)?[...u.ref.options].forEach(m=>m.selected=f.includes(m.value)):u.refs?de(u.ref)?u.refs.length>1?u.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(f)?!!f.find(x=>x===m.value):f===m.value)):u.refs[0]&&(u.refs[0].checked=!!f):u.refs.forEach(m=>m.checked=m.value===f):Be(u.ref)?u.ref.value="":(u.ref.value=f,u.ref.type||h.values.next({name:r,values:{...o}})))}(l.shouldDirty||l.shouldTouch)&&re(r,f,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&ue(r)},q=(r,i,l)=>{for(const d in i){const f=i[d],u=`${r}.${d}`,m=c(n,u);(g.array.has(r)||!pe(f)||m&&!m._f)&&!ae(f)?q(u,f,l):L(u,f,l)}},P=(r,i,l={})=>{const d=c(n,r),f=g.array.has(r),u=N(i);V(o,r,u),f?(h.array.next({name:r,values:{...o}}),(v.isDirty||v.dirtyFields)&&l.shouldDirty&&h.state.next({name:r,dirtyFields:he(a,o),isDirty:_(r,u)})):d&&!d._f&&!T(u)?q(r,u,l):L(r,u,l),rt(r,g)&&h.state.next({...t}),h.values.next({name:y.mount?r:void 0,values:{...o}})},oe=async r=>{y.mount=!0;const i=r.target;let l=i.name,d=!0;const f=c(n,l),u=()=>i.type?Ue(f._f):gt(r),m=x=>{d=Number.isNaN(x)||x===c(o,l,x)};if(f){let x,w;const O=u(),ie=r.type===be.BLUR||r.type===be.FOCUS_OUT,Ot=!rr(f._f)&&!s.resolver&&!c(t.errors,l)&&!f._f.deps||sr(ie,c(t.touchedFields,l),t.isSubmitted,H,j),Ie=rt(l,g,ie);V(o,l,O),ie?(f._f.onBlur&&f._f.onBlur(r),A&&A(0)):f._f.onChange&&f._f.onChange(r);const Re=re(l,O,ie,!1),Mt=!M(Re)||Ie;if(!ie&&h.values.next({name:l,type:r.type,values:{...o}}),Ot)return v.isValid&&Q(),Mt&&h.state.next({name:l,...Ie?{}:Re});if(!ie&&Ie&&h.state.next({...t}),s.resolver){const{errors:Ze}=await ee([l]);if(m(O),d){const Bt=lt(t.errors,n,l),et=lt(Ze,n,Bt.name||l);x=et.error,l=et.name,w=M(Ze)}}else Y([l],!0),x=(await ot(f,o,R,s.shouldUseNativeValidation))[l],Y([l]),m(O),d&&(x?w=!1:v.isValid&&(w=await B(n,!0)));d&&(f._f.deps&&ue(f._f.deps),me(l,w,x,Re))}},le=(r,i)=>{if(c(t.errors,i)&&r.focus)return r.focus(),1},ue=async(r,i={})=>{let l,d;const f=_e(r);if(s.resolver){const u=await se(D(r)?r:f);l=M(u),d=r?!f.some(m=>c(u,m)):l}else r?(d=(await Promise.all(f.map(async u=>{const m=c(n,u);return await B(m&&m._f?{[u]:m}:m)}))).every(Boolean),!(!d&&!t.isValid)&&Q()):d=l=await B(n);return h.state.next({...!G(r)||v.isValid&&l!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:l}:{},errors:t.errors}),i.shouldFocus&&!d&&fe(n,le,r?f:g.mount),d},He=r=>{const i={...y.mount?o:a};return D(r)?i:G(r)?c(i,r):r.map(l=>c(i,l))},Ke=(r,i)=>({invalid:!!c((i||t).errors,r),isDirty:!!c((i||t).dirtyFields,r),error:c((i||t).errors,r),isValidating:!!c(t.validatingFields,r),isTouched:!!c((i||t).touchedFields,r)}),Lt=r=>{r&&_e(r).forEach(i=>C(t.errors,i)),h.state.next({errors:r?t.errors:{}})},Ge=(r,i,l)=>{const d=(c(n,r,{_f:{}})._f||{}).ref,f=c(t.errors,r)||{},{ref:u,message:m,type:x,...w}=f;V(t.errors,r,{...w,...i,ref:d}),h.state.next({name:r,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&d&&d.focus&&d.focus()},Tt=(r,i)=>Z(r)?h.values.subscribe({next:l=>r(b(void 0,i),l)}):b(r,i,!0),ke=(r,i={})=>{for(const l of r?_e(r):g.mount)g.mount.delete(l),g.array.delete(l),i.keepValue||(C(n,l),C(o,l)),!i.keepError&&C(t.errors,l),!i.keepDirty&&C(t.dirtyFields,l),!i.keepTouched&&C(t.touchedFields,l),!i.keepIsValidating&&C(t.validatingFields,l),!s.shouldUnregister&&!i.keepDefaultValue&&C(a,l);h.values.next({values:{...o}}),h.state.next({...t,...i.keepDirty?{isDirty:_()}:{}}),!i.keepIsValid&&Q()},Xe=({disabled:r,name:i,field:l,fields:d,value:f})=>{if(K(r)&&y.mount||r){const u=r?void 0:D(f)?Ue(l?l._f:c(d,i)._f):f;V(o,i,u),re(i,u,!1,!1,!0)}},Ce=(r,i={})=>{let l=c(n,r);const d=K(i.disabled);return V(n,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...i}}),g.mount.add(r),l?Xe({field:l,disabled:i.disabled,name:r,value:i.value}):E(r,!0,i.value),{...d?{disabled:i.disabled}:{},...s.progressive?{required:!!i.required,min:ce(i.min),max:ce(i.max),minLength:ce(i.minLength),maxLength:ce(i.maxLength),pattern:ce(i.pattern)}:{},name:r,onChange:oe,onBlur:oe,ref:f=>{if(f){Ce(r,i),l=c(n,r);const u=D(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,m=er(u),x=l._f.refs||[];if(m?x.find(w=>w===u):u===l._f.ref)return;V(n,r,{_f:{...l._f,...m?{refs:[...x.filter(Te),u,...Array.isArray(c(a,r))?[{}]:[]],ref:{type:u.type,name:r}}:{ref:u}}}),E(r,!1,void 0,u)}else l=c(n,r,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(ht(g.array,r)&&y.action)&&g.unMount.add(r)}}},ze=()=>s.shouldFocusError&&fe(n,le,g.mount),Ut=r=>{K(r)&&(h.state.next({disabled:r}),fe(n,(i,l)=>{const d=c(n,l);d&&(i.disabled=d._f.disabled||r,Array.isArray(d._f.refs)&&d._f.refs.forEach(f=>{f.disabled=d._f.disabled||r}))},0,!1))},Je=(r,i)=>async l=>{let d;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=N(o);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:u,values:m}=await ee();t.errors=u,f=m}else await B(n);if(C(t.errors,"root"),M(t.errors)){h.state.next({errors:{}});try{await r(f,l)}catch(u){d=u}}else i&&await i({...t.errors},l),ze(),setTimeout(ze);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:M(t.errors)&&!d,submitCount:t.submitCount+1,errors:t.errors}),d)throw d},Nt=(r,i={})=>{c(n,r)&&(D(i.defaultValue)?P(r,N(c(a,r))):(P(r,i.defaultValue),V(a,r,N(i.defaultValue))),i.keepTouched||C(t.touchedFields,r),i.keepDirty||(C(t.dirtyFields,r),t.isDirty=i.defaultValue?_(r,N(c(a,r))):_()),i.keepError||(C(t.errors,r),v.isValid&&Q()),h.state.next({...t}))},Qe=(r,i={})=>{const l=r?N(r):a,d=N(l),f=M(r),u=f?a:d;if(i.keepDefaultValues||(a=l),!i.keepValues){if(i.keepDirtyValues)for(const m of g.mount)c(t.dirtyFields,m)?V(u,m,c(o,m)):P(m,c(u,m));else{if(Ne&&D(r))for(const m of g.mount){const x=c(n,m);if(x&&x._f){const w=Array.isArray(x._f.refs)?x._f.refs[0]:x._f.ref;if(xe(w)){const O=w.closest("form");if(O){O.reset();break}}}}n={}}o=e.shouldUnregister?i.keepDefaultValues?N(a):{}:N(u),h.array.next({values:{...u}}),h.values.next({values:{...u}})}g={mount:i.keepDirtyValues?g.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},y.mount=!v.isValid||!!i.keepIsValid||!!i.keepDirtyValues,y.watch=!!e.shouldUnregister,h.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:f?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!te(r,a)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?[]:i.keepDirtyValues?i.keepDefaultValues&&o?he(a,o):t.dirtyFields:i.keepDefaultValues&&r?he(a,r):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ye=(r,i)=>Qe(Z(r)?r(o):r,i);return{control:{register:Ce,unregister:ke,getFieldState:Ke,handleSubmit:Je,setError:Ge,_executeSchema:ee,_getWatch:b,_getDirty:_,_updateValid:Q,_removeUnmounted:ge,_updateFieldArray:F,_updateDisabledField:Xe,_getFieldArray:k,_reset:Qe,_resetDefaultValues:()=>Z(s.defaultValues)&&s.defaultValues().then(r=>{Ye(r,s.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_disableForm:Ut,_subjects:h,_proxyFormState:v,_setErrors:z,get _fields(){return n},get _formValues(){return o},get _state(){return y},set _state(r){y=r},get _defaultValues(){return a},get _names(){return g},set _names(r){g=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:ue,register:Ce,handleSubmit:Je,watch:Tt,setValue:P,getValues:He,reset:Ye,resetField:Nt,clearErrors:Lt,unregister:ke,setError:Ge,setFocus:(r,i={})=>{const l=c(n,r),d=l&&l._f;if(d){const f=d.refs?d.refs[0]:d.ref;f.focus&&(f.focus(),i.shouldSelect&&f.select())}},getFieldState:Ke}}function or(e={}){const s=p.useRef(),t=p.useRef(),[n,a]=p.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...ar(e),formState:n});const o=s.current.control;return o._options=e,Me({subject:o._subjects.state,next:y=>{bt(y,o._proxyFormState,o._updateFormState,!0)&&a({...o._formState})}}),p.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),p.useEffect(()=>{if(o._proxyFormState.isDirty){const y=o._getDirty();y!==n.isDirty&&o._subjects.state.next({isDirty:y})}},[o,n.isDirty]),p.useEffect(()=>{e.values&&!te(e.values,t.current)?(o._reset(e.values,o._options.resetOptions),t.current=e.values,a(y=>({...y}))):o._resetDefaultValues()},[e.values,o]),p.useEffect(()=>{e.errors&&o._setErrors(e.errors)},[e.errors,o]),p.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),p.useEffect(()=>{e.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[e.shouldUnregister,o]),s.current.formState=Ft(n,o),s.current}const ut=Ht,kt=$.createContext({}),Ct=({...e})=>U.jsx(kt.Provider,{value:{name:e.name},children:U.jsx(zt,{...e})}),Se=()=>{const e=$.useContext(kt),s=$.useContext(It),{getFieldState:t,formState:n}=we(),a=t(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=s;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...a}},It=$.createContext({}),je=$.forwardRef(({className:e,...s},t)=>{const n=$.useId();return U.jsx(It.Provider,{value:{id:n},children:U.jsx("div",{ref:t,className:De("space-y-1",e),...s})})});je.displayName="FormItem";const qe=$.forwardRef(({className:e,...s},t)=>{const{error:n,formItemId:a}=Se();return U.jsx(jt,{ref:t,className:De(n&&"text-critical",e),htmlFor:a,...s})});qe.displayName="FormLabel";const We=$.forwardRef(({...e},s)=>{const{error:t,formItemId:n,formDescriptionId:a,formMessageId:o}=Se();return U.jsx(Pt,{ref:s,id:n,"aria-describedby":t?`${a} ${o}`:`${a}`,error:t,"aria-invalid":!!t,...e})});We.displayName="FormControl";const Rt=$.forwardRef(({className:e,...s},t)=>{const{formDescriptionId:n}=Se();return U.jsx("p",{ref:t,id:n,className:De(yt({variant:"tiny"})," text-text-weak",e),...s})});Rt.displayName="FormDescription";const $e=$.forwardRef(({className:e,children:s,...t},n)=>{const{error:a,formMessageId:o}=Se(),y=a?String(a==null?void 0:a.message):s;return y?U.jsx("p",{ref:n,id:o,className:De(yt({variant:"tiny"})," text-critical",e),...t,children:y}):null});$e.displayName="FormMessage";je.__docgenInfo={description:"",methods:[],displayName:"FormItem"};qe.__docgenInfo={description:"",methods:[],displayName:"FormLabel"};We.__docgenInfo={description:"",methods:[],displayName:"FormControl"};Rt.__docgenInfo={description:"",methods:[],displayName:"FormDescription"};$e.__docgenInfo={description:"",methods:[],displayName:"FormMessage"};Ct.__docgenInfo={description:"",methods:[],displayName:"FormField"};const Or={title:"Xenith UI/Components/Form",component:ut,parameters:{docs:{description:{component:"Form component for handling user inputs."}}},args:{},render:e=>{const s=or();return $.useEffect(()=>{s.setError("username",{message:"This is an error message"})},[]),U.jsx(ut,{...e,...s,children:U.jsx(Ct,{control:s.control,name:"username",render:({field:t})=>U.jsxs(je,{children:[U.jsx(qe,{children:"Username"}),U.jsx(We,{children:U.jsx(qt,{placeholder:"shadcn",...t})}),U.jsx($e,{})]})})})}},ve={args:{}};var ct,ft,dt;ve.parameters={...ve.parameters,docs:{...(ct=ve.parameters)==null?void 0:ct.docs,source:{originalSource:`{
  args: {}
}`,...(dt=(ft=ve.parameters)==null?void 0:ft.docs)==null?void 0:dt.source}}};const Mr=["DefaultForm"];export{ve as DefaultForm,Mr as __namedExportsOrder,Or as default};
