import{j as r}from"./jsx-runtime-DR9Q75dM.js";import{r as m}from"./index-DRjF_FHU.js";import{e as fe,s as pe,a as ge,b as he,T as f,i as U}from"./Calendar-DQC0MeS6.js";import"./mini-FlV67GHA.js";import{t as Fe}from"./index-D_ZLZ5Xi.js";import{e as We}from"./endOfDay-BZ5bvh5Y.js";import{t as ye,s as Le}from"./differenceInCalendarDays-C3EGPyW5.js";import{s as xe,a as Te,f as u}from"./format-DeQ6fwDa.js";import{e as we}from"./endOfMonth-CBUZ-2Pf.js";import{c as v}from"./cn-8RyR4BqC.js";import{F as G}from"./chevron-up-Dp-rU9It.js";import{F as Ve}from"./chevron-right-D4FvqfWr.js";import{F as Ee}from"./check-C0C6JGvp.js";import{B as g}from"./Button-C-jt4Opy.js";import{T as p}from"./Text-C8HBwI4b.js";import{I as k}from"./Icon-CTnhpE1d.js";import{D as H}from"./DateTimePicker-CZfAT-wE.js";import{P as X,a as J,b as K}from"./Popover-A4hNnO1p.js";import{D as V}from"./Divider-CIm89-oy.js";import"./styles-x1yxmyQd.js";import"./index-Bb4qSo10.js";import"./chevron-left-D0P6BdMN.js";import"./index-HZDBD2ik.js";import"./chevron-down-CyV3wpL8.js";import"./spinner-ZMRwnkYw.js";import"./calendar-C26CUINT.js";import"./clock-DRhx3Wks.js";import"./useClickOutside-VApjb8yH.js";import"./search-CRI6LAtg.js";import"./close-D2djoYoT.js";import"./stringCase-DaZl3p-i.js";import"./index-DuXoWBk8.js";import"./index-CxRLcT2J.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-CAHntWCK.js";import"./Heading-DjlBwQyS.js";import"./Checkbox-CAdLyoQE.js";import"./index-Bu1UD4WD.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";import"./index-DdILnG7L.js";import"./index-Bq6ilrdN.js";import"./index-qtGI3euC.js";import"./index-CxZrjbHI.js";function De(t,e){const n=ye(t,e==null?void 0:e.in),i=n.getMonth(),l=i-i%3;return n.setMonth(l,1),n.setHours(0,0,0,0),n}function Se(t,e){const n=ye(t,e==null?void 0:e.in),i=n.getMonth(),l=i-i%3+3;return n.setMonth(l,0),n.setHours(23,59,59,999),n}const _e={Today:Ae,"This week":Ye,"This month":ze,"This quarter":Qe,"This year":Ze,"Last week":$e,"Last month":Be,"Last quarter":Ue,"Last year":Ge};function Ae(){const t=new Date,e=Le(t),n=We(t);return{from:e,to:n}}function Ye(){const t=new Date,e=xe(t),n=fe(t);return{from:e,to:n}}function ze(){const t=new Date,e=pe(t),n=we(t);return{from:e,to:n}}function Qe(){const t=new Date,e=De(t),n=Se(t);return{from:e,to:n}}function Ze(){const t=new Date,e=Te(t),n=ge(t);return{from:e,to:n}}function $e(){const t=new Date,e=xe(t),n=fe(t);return e.setDate(e.getDate()-7),n.setDate(n.getDate()-7),{from:e,to:n}}function Be(){const t=new Date,e=pe(t),n=we(t);return e.setMonth(e.getMonth()-1),n.setMonth(n.getMonth()-1),{from:e,to:n}}function Ue(){const t=new Date,e=De(t),n=Se(t);return e.setMonth(e.getMonth()-3),n.setMonth(n.getMonth()-3),{from:e,to:n}}function Ge(){const t=new Date,e=Te(t),n=ge(t);return e.setFullYear(e.getFullYear()-1),n.setFullYear(n.getFullYear()-1),{from:e,to:n}}const je=({label:t,startDate:e,endDate:n,startDateFormat:i="dd MMM yyyy",endDateFormat:l="dd MMM yyyy",formatOptions:d,selected:O,onClick:h})=>{const b=()=>he(e,n)?`${u(e,i,d)}`:`${u(e,i,d)} - ${u(n,l,d)}`;return r.jsxs(g,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",onClick:()=>h&&h({from:e,to:n}),children:[r.jsx(p,{variant:"regular",children:t}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(p,{variant:"regular",className:"text-text-weak",children:b()}),O?r.jsx(k,{icon:r.jsx(Ee,{}),className:"text-text-accent"}):r.jsx("div",{className:"w-4 h-4"})]})]})};je.__docgenInfo={description:"",methods:[],displayName:"DateRangeTemplate",props:{label:{required:!0,tsType:{name:"string"},description:""},startDate:{required:!0,tsType:{name:"Date"},description:""},endDate:{required:!0,tsType:{name:"Date"},description:""},startDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM yyyy"',computed:!1}},endDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM yyyy"',computed:!1}},formatOptions:{required:!1,tsType:{name:"FormatOptions"},description:""},selected:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dateRange: DateRange) => void",signature:{arguments:[{type:{name:"DateRange"},name:"dateRange"}],return:{name:"void"}}},description:""}}};const ee=()=>({from:new f,to:new f}),N=({value:t,onChange:e,required:n,fromDate:i,toDate:l,rangeTemplates:d=_e,placeholder:O="Select Date Range",timePickerProps:h={},fromTimePickerProps:b={},toTimePickerProps:ve={},error:E,dateFormat:w,dividerIndex:_,showTemplateInValue:Me=!0,customLabel:q="Custom",timezone:y="UTC"})=>{const[I,A]=m.useState(!1),[a,F]=m.useState(t),[Re,Y]=m.useState(!1),[o,z]=m.useState(ee()),Ce=_||Math.floor(Object.keys(d).length/2)-1,[W,Pe]=m.useState(),[D,x]=m.useState(),S=s=>{s&&D&&U(s,D)&&x(s),Pe(s)},Q=s=>{if(s!=null&&s.from&&(s!=null&&s.to)&&U(s.from,s.to)){z({from:s.from,to:s.from});return}z(s)},[ke,Ne]=m.useState(320),T=m.useRef(),L=m.useMemo(()=>Object.entries(d).map(([s,c])=>({label:s,range:c(y)})),[d,y]),Z=s=>!(a!=null&&a.from)||!(a!=null&&a.to)?!1:u(a.from,"yyyy-MM-dd-hh-mm-ss")===u(s.from,"yyyy-MM-dd-hh-mm-ss")&&u(a.to,"yyyy-MM-dd-hh-mm-ss")===u(s.to,"yyyy-MM-dd-hh-mm-ss"),Oe=m.useMemo(()=>{const s=L.find(c=>Z(c.range));return s?s==null?void 0:s.label:q},[L,a,q]),be=s=>w?Array.isArray(w)?w[s==="from"?0:1]:w:"dd MMM yyyy",j=(s,c)=>s?u(s,be(c)):"",qe=s=>{F(s),e==null||e(s),Q(ee())},Ie=s=>{F(s),e==null||e(s),Y(!1),A(!1)},$=s=>{Y(s),Q(a)};return m.useEffect(()=>{F(t)},[t]),m.useEffect(()=>{S(o==null?void 0:o.from),x(o==null?void 0:o.to)},[o]),m.useLayoutEffect(()=>{var s;if(T){const c=(s=T.current)==null?void 0:s.getBoundingClientRect();Ne((c==null?void 0:c.width)||320)}},[T]),r.jsxs(X,{open:I,onOpenChange:A,children:[r.jsx(J,{asChild:!0,children:Me?r.jsx(g,{ref:T,variant:"outline",theme:"neutral",innerClassName:"justify-between w-full gap-2",className:v("flex text-left font-normal items-center px-3 gap-5 w-full justify-between bg-bg-default",!a&&"text-muted-foreground",{"border-border-critical":E}),icon:r.jsx(k,{icon:r.jsx(G,{}),size:"lg",className:v("text-text-weak",{"rotate-180":!I})}),iconPosition:"right",children:a?r.jsxs(r.Fragment,{children:[r.jsx(p,{variant:"regular",children:Oe}),r.jsx("div",{className:"flex items-center gap-2 ml-auto",children:r.jsxs(p,{variant:"regular",className:"text-text-weak",children:[j(a==null?void 0:a.from,"from"),(a==null?void 0:a.from)&&(a==null?void 0:a.to)&&!he(a==null?void 0:a.from,a==null?void 0:a.to)&&r.jsxs(r.Fragment,{children:[" - ",j(a==null?void 0:a.to,"to")]})]})})]}):O}):r.jsx(g,{ref:T,variant:"outline",theme:"neutral",innerClassName:"w-full",className:v("justify-start text-left font-normal items-center px-3 gap-5 w-full bg-bg-default",!a&&"text-muted-foreground",{"border-border-critical":E}),icon:r.jsx(k,{icon:r.jsx(G,{}),size:"lg",className:v("text-text-weak",{"rotate-180":!I})}),iconPosition:"right",children:a?r.jsxs(r.Fragment,{children:[j(a.from,"from")," -"," ",j(a.to,"to")]}):"Select Date Range"})}),r.jsx(K,{className:"p-1",align:"start",style:{width:`${ke}px`},children:r.jsxs("div",{className:"flex flex-col w-full",children:[L.map(({label:s,range:c},B)=>r.jsxs(m.Fragment,{children:[r.jsx(je,{label:s,startDate:c.from,endDate:c.to,onClick:qe,selected:Z(c),formatOptions:{in:Fe(y)}}),B===Ce&&r.jsx(V,{className:"my-1"})]},B)),r.jsx(V,{className:"my-1"}),r.jsxs(X,{open:Re,onOpenChange:$,children:[r.jsx(J,{asChild:!0,children:r.jsxs(g,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",children:[r.jsx(p,{variant:"regular",children:q}),r.jsx(k,{icon:r.jsx(Ve,{}),className:"text-text-weak"})]})}),r.jsxs(K,{side:"right",sideOffset:8,className:"p-0",children:[r.jsxs("div",{className:"p-3 flex gap-2",children:[r.jsxs("div",{className:"grid gap-1",children:[r.jsx(p,{variant:"medium",children:"From"}),r.jsx(H,{withoutSaveButton:!0,autoFocus:!0,date:W,onDateChange:S,onChange:S,required:n,fromDate:i,toDate:l,timezone:y,className:"border-0 shadow-none",...h,...b})]}),r.jsx("div",{className:"self-end mb-2",children:"-"}),r.jsxs("div",{className:"grid gap-1",children:[r.jsx(p,{variant:"medium",children:"To"}),r.jsx(H,{withoutSaveButton:!0,autoFocus:!0,date:D,onChange:x,onDateChange:x,required:n,fromDate:W,toDate:l,timezone:y,className:"border-0 shadow-none",...h,...ve})]})]}),r.jsx(V,{className:"my-1"}),r.jsxs("div",{className:"flex justify-end gap-4 p-3",children:[r.jsx(g,{variant:"outline",theme:"neutral",size:"sm",className:"w-[70px]",onClick:()=>{S(o==null?void 0:o.from),x(o==null?void 0:o.to),$(!1)},children:"Cancel"}),r.jsx(g,{size:"sm",className:"w-[70px]",disabled:!(o!=null&&o.from)||!(o!=null&&o.to),onClick:()=>{Ie(o&&{from:W,to:D})},children:"Apply"})]})]})]})]})})]})};N.__docgenInfo={description:"",methods:[],displayName:"DateRangePicker",props:{timezone:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"UTC"',computed:!1}},value:{required:!1,tsType:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},description:""},showTemplateInValue:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},dividerIndex:{required:!1,tsType:{name:"number"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select Date Range"',computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: DateRange | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},rangeTemplates:{required:!1,tsType:{name:"union",raw:`| typeof RANGE_TEMPLATES
| Record<string, (timezone?: string) => DateRange>`,elements:[{name:"RANGE_TEMPLATES"},{name:"Record",elements:[{name:"string"},{name:"signature",type:"function",raw:"(timezone?: string) => DateRange",signature:{arguments:[{type:{name:"string"},name:"timezone"}],return:{name:"DateRange"}}}],raw:"Record<string, (timezone?: string) => DateRange>"}]},description:"",defaultValue:{value:`{
  Today: getTodayRange,
  "This week": getThisWeekRange,
  "This month": getThisMonthRange,
  "This quarter": getThisQuarterRange,
  "This year": getThisYearRange,
  "Last week": getLastWeekRange,
  "Last month": getLastMonthRange,
  "Last quarter": getLastQuarterRange,
  "Last year": getLastYearRange,
}`,computed:!1}},toDate:{required:!1,tsType:{name:"Date"},description:""},timePickerProps:{required:!1,tsType:{name:"Partial",elements:[{name:"ReactComponentPropsWithoutRef",raw:"React.ComponentPropsWithoutRef<typeof DateTimePicker>",elements:[{name:"DateTimePicker"}]}],raw:`Partial<
  React.ComponentPropsWithoutRef<typeof DateTimePicker>
>`},description:"",defaultValue:{value:"{}",computed:!1}},fromTimePickerProps:{required:!1,tsType:{name:"Partial",elements:[{name:"ReactComponentPropsWithoutRef",raw:"React.ComponentPropsWithoutRef<typeof DateTimePicker>",elements:[{name:"DateTimePicker"}]}],raw:`Partial<
  React.ComponentPropsWithoutRef<typeof DateTimePicker>
>`},description:"",defaultValue:{value:"{}",computed:!1}},toTimePickerProps:{required:!1,tsType:{name:"Partial",elements:[{name:"ReactComponentPropsWithoutRef",raw:"React.ComponentPropsWithoutRef<typeof DateTimePicker>",elements:[{name:"DateTimePicker"}]}],raw:`Partial<
  React.ComponentPropsWithoutRef<typeof DateTimePicker>
>`},description:"",defaultValue:{value:"{}",computed:!1}},error:{required:!1,tsType:{name:"boolean"},description:""},dateFormat:{required:!1,tsType:{name:"union",raw:"string | [string, string]",elements:[{name:"string"},{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]}]},description:""},customLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Custom"',computed:!1}}}};const _t={title:"Xenith UI/Components/Date Range Picker",component:N,decorators:t=>r.jsx("div",{className:"py-10 w-[600px] h-[400px]  pb-40",children:r.jsx(t,{})}),tags:["autodocs"]},M={args:{onChange:t=>{var e,n;console.log("value",t),console.log("ISO string",{from:(e=t==null?void 0:t.from)==null?void 0:e.toISOString(),to:(n=t==null?void 0:t.to)==null?void 0:n.toISOString()})}}},R={args:{showTemplateInValue:!0,onChange:t=>{var e,n;console.log("value",t),console.log("ISO string",{from:(e=t==null?void 0:t.from)==null?void 0:e.toISOString(),to:(n=t==null?void 0:t.to)==null?void 0:n.toISOString()})}}},C={render:t=>{const[e,n]=m.useState({from:new Date,to:new Date});return r.jsx(N,{...t,value:e,onChange:i=>n(i)})}},P={render:t=>{const[e,n]=m.useState({from:new f().toISOString(),to:new f().toISOString()});return r.jsx(N,{...t,timePickerProps:{dateTransformer:i=>i?new f(i):void 0},value:{from:new f(e==null?void 0:e.from),to:new f(e==null?void 0:e.to)},onChange:i=>n(i)})}};var te,re,ne;M.parameters={...M.parameters,docs:{...(te=M.parameters)==null?void 0:te.docs,source:{originalSource:`{
  args: {
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(ne=(re=M.parameters)==null?void 0:re.docs)==null?void 0:ne.source}}};var se,ae,oe;R.parameters={...R.parameters,docs:{...(se=R.parameters)==null?void 0:se.docs,source:{originalSource:`{
  args: {
    showTemplateInValue: true,
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(oe=(ae=R.parameters)==null?void 0:ae.docs)==null?void 0:oe.source}}};var ie,me,ce;C.parameters={...C.parameters,docs:{...(ie=C.parameters)==null?void 0:ie.docs,source:{originalSource:`{
  render: args => {
    const [value, setValue] = useState<DateRange | undefined>({
      from: new Date(),
      to: new Date()
    });
    return <DateRangePicker {...args} value={value} onChange={v => setValue(v)} />;
  }
}`,...(ce=(me=C.parameters)==null?void 0:me.docs)==null?void 0:ce.source}}};var le,ue,de;P.parameters={...P.parameters,docs:{...(le=P.parameters)==null?void 0:le.docs,source:{originalSource:`{
  render: args => {
    const [value, setValue] = useState<{
      from: string;
      to: string;
    } | undefined>({
      from: new TZDate().toISOString(),
      to: new TZDate().toISOString()
    });
    return <DateRangePicker {...args} timePickerProps={{
      dateTransformer: v => v ? new TZDate(v) : undefined
    }} value={{
      from: new TZDate(value?.from!),
      to: new TZDate(value?.to!)
    }} onChange={v => setValue(v as any)} />;
  }
}`,...(de=(ue=P.parameters)==null?void 0:ue.docs)==null?void 0:de.source}}};const At=["Default","ShowTemplate","WithState","WithUTCState"];export{M as Default,R as ShowTemplate,C as WithState,P as WithUTCState,At as __namedExportsOrder,_t as default};
