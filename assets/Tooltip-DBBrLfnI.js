import{j}from"./jsx-runtime-DR9Q75dM.js";import{r as n}from"./index-DRjF_FHU.js";import{a as S,b as G,_ as g,f as x,c as z,h as oe,g as re,d as se,e as ae}from"./index-CxXVImLN.js";import{$ as ce,a as ie}from"./index-yJl9Mbgj.js";import{$ as le}from"./index-D4PmrNqQ.js";import{$ as K,a as ue,b as de,c as fe}from"./index-BoBYWeOI.js";import{$ as q}from"./index-nVMawZv2.js";import{$ as pe}from"./index-DfP56yRP.js";import{c as X}from"./cn-C-5SdYIA.js";import{t as $e}from"./styles-BNEhTmYy.js";const k="dismissableLayer.update",ve="dismissableLayer.pointerDownOutside",be="dismissableLayer.focusOutside";let V;const me=n.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),he=n.forwardRef((t,o)=>{var e;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:u,onDismiss:c,...f}=t,l=n.useContext(me),[d,m]=n.useState(null),p=(e=d==null?void 0:d.ownerDocument)!==null&&e!==void 0?e:globalThis==null?void 0:globalThis.document,[,v]=n.useState({}),h=S(o,$=>m($)),b=Array.from(l.layers),[y]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),E=b.indexOf(y),T=d?b.indexOf(d):-1,P=l.layersWithOutsidePointerEventsDisabled.size>0,C=T>=E,_=Ee($=>{const R=$.target,B=[...l.branches].some(I=>I.contains(R));!C||B||(a==null||a($),u==null||u($),$.defaultPrevented||c==null||c())},p),w=ye($=>{const R=$.target;[...l.branches].some(I=>I.contains(R))||(i==null||i($),u==null||u($),$.defaultPrevented||c==null||c())},p);return ce($=>{T===l.layers.size-1&&(s==null||s($),!$.defaultPrevented&&c&&($.preventDefault(),c()))},p),n.useEffect(()=>{if(d)return r&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(V=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(d)),l.layers.add(d),W(),()=>{r&&l.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=V)}},[d,p,r,l]),n.useEffect(()=>()=>{d&&(l.layers.delete(d),l.layersWithOutsidePointerEventsDisabled.delete(d),W())},[d,l]),n.useEffect(()=>{const $=()=>v({});return document.addEventListener(k,$),()=>document.removeEventListener(k,$)},[]),n.createElement(G.div,g({},f,{ref:h,style:{pointerEvents:P?C?"auto":"none":void 0,...t.style},onFocusCapture:x(t.onFocusCapture,w.onFocusCapture),onBlurCapture:x(t.onBlurCapture,w.onBlurCapture),onPointerDownCapture:x(t.onPointerDownCapture,_.onPointerDownCapture)}))});function Ee(t,o=globalThis==null?void 0:globalThis.document){const e=z(t),r=n.useRef(!1),s=n.useRef(()=>{});return n.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let f=function(){Y(ve,e,c,{discrete:!0})};const c={originalEvent:u};u.pointerType==="touch"?(o.removeEventListener("click",s.current),s.current=f,o.addEventListener("click",s.current,{once:!0})):f()}else o.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{o.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),o.removeEventListener("pointerdown",a),o.removeEventListener("click",s.current)}},[o,e]),{onPointerDownCapture:()=>r.current=!0}}function ye(t,o=globalThis==null?void 0:globalThis.document){const e=z(t),r=n.useRef(!1);return n.useEffect(()=>{const s=a=>{a.target&&!r.current&&Y(be,e,{originalEvent:a},{discrete:!1})};return o.addEventListener("focusin",s),()=>o.removeEventListener("focusin",s)},[o,e]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function W(){const t=new CustomEvent(k);document.dispatchEvent(t)}function Y(t,o,e,{discrete:r}){const s=e.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:e});o&&s.addEventListener(t,o,{once:!0}),r?oe(s,a):s.dispatchEvent(a)}const xe=n.forwardRef((t,o)=>{const{children:e,...r}=t,s=n.Children.toArray(e),a=s.find(ge);if(a){const i=a.props.children,u=s.map(c=>c===a?n.Children.count(i)>1?n.Children.only(null):n.isValidElement(i)?i.props.children:null:c);return n.createElement(A,g({},r,{ref:o}),n.isValidElement(i)?n.cloneElement(i,void 0,u):null)}return n.createElement(A,g({},r,{ref:o}),e)});xe.displayName="Slot";const A=n.forwardRef((t,o)=>{const{children:e,...r}=t;return n.isValidElement(e)?n.cloneElement(e,{...Te(r,e.props),ref:o?re(o,e.ref):e.ref}):n.Children.count(e)>1?n.Children.only(null):null});A.displayName="SlotClone";const Z=({children:t})=>n.createElement(n.Fragment,null,t);function ge(t){return n.isValidElement(t)&&t.type===Z}function Te(t,o){const e={...o};for(const r in o){const s=t[r],a=o[r];/^on[A-Z]/.test(r)?s&&a?e[r]=(...u)=>{a(...u),s(...u)}:s&&(e[r]=s):r==="style"?e[r]={...s,...a}:r==="className"&&(e[r]=[s,a].filter(Boolean).join(" "))}return{...t,...e}}const[L,tt]=se("Tooltip",[K]),M=K(),Ce="TooltipProvider",Pe=700,N="tooltip.open",[we,F]=L(Ce),Oe=t=>{const{__scopeTooltip:o,delayDuration:e=Pe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,[i,u]=n.useState(!0),c=n.useRef(!1),f=n.useRef(0);return n.useEffect(()=>{const l=f.current;return()=>window.clearTimeout(l)},[]),n.createElement(we,{scope:o,isOpenDelayed:i,delayDuration:e,onOpen:n.useCallback(()=>{window.clearTimeout(f.current),u(!1)},[]),onClose:n.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:n.useCallback(l=>{c.current=l},[]),disableHoverableContent:s},a)},H="Tooltip",[De,D]=L(H),_e=t=>{const{__scopeTooltip:o,children:e,open:r,defaultOpen:s=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:u}=t,c=F(H,t.__scopeTooltip),f=M(o),[l,d]=n.useState(null),m=le(),p=n.useRef(0),v=i??c.disableHoverableContent,h=u??c.delayDuration,b=n.useRef(!1),[y=!1,E]=ae({prop:r,defaultProp:s,onChange:w=>{w?(c.onOpen(),document.dispatchEvent(new CustomEvent(N))):c.onClose(),a==null||a(w)}}),T=n.useMemo(()=>y?b.current?"delayed-open":"instant-open":"closed",[y]),P=n.useCallback(()=>{window.clearTimeout(p.current),b.current=!1,E(!0)},[E]),C=n.useCallback(()=>{window.clearTimeout(p.current),E(!1)},[E]),_=n.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,E(!0)},h)},[h,E]);return n.useEffect(()=>()=>window.clearTimeout(p.current),[]),n.createElement(de,f,n.createElement(De,{scope:o,contentId:m,open:y,stateAttribute:T,trigger:l,onTriggerChange:d,onTriggerEnter:n.useCallback(()=>{c.isOpenDelayed?_():P()},[c.isOpenDelayed,_,P]),onTriggerLeave:n.useCallback(()=>{v?C():window.clearTimeout(p.current)},[C,v]),onOpen:P,onClose:C,disableHoverableContent:v},e))},U="TooltipTrigger",Re=n.forwardRef((t,o)=>{const{__scopeTooltip:e,...r}=t,s=D(U,e),a=F(U,e),i=M(e),u=n.useRef(null),c=S(o,u,s.onTriggerChange),f=n.useRef(!1),l=n.useRef(!1),d=n.useCallback(()=>f.current=!1,[]);return n.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),n.createElement(ue,g({asChild:!0},i),n.createElement(G.button,g({"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute},r,{ref:c,onPointerMove:x(t.onPointerMove,m=>{m.pointerType!=="touch"&&!l.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),l.current=!0)}),onPointerLeave:x(t.onPointerLeave,()=>{s.onTriggerLeave(),l.current=!1}),onPointerDown:x(t.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:x(t.onFocus,()=>{f.current||s.onOpen()}),onBlur:x(t.onBlur,s.onClose),onClick:x(t.onClick,s.onClose)})))}),J="TooltipPortal",[Le,Ie]=L(J,{forceMount:void 0}),nt=t=>{const{__scopeTooltip:o,forceMount:e,children:r,container:s}=t,a=D(J,o);return n.createElement(Le,{scope:o,forceMount:e},n.createElement(q,{present:e||a.open},n.createElement(ie,{asChild:!0,container:s},r)))},O="TooltipContent",ke=n.forwardRef((t,o)=>{const e=Ie(O,t.__scopeTooltip),{forceMount:r=e.forceMount,side:s="top",...a}=t,i=D(O,t.__scopeTooltip);return n.createElement(q,{present:r||i.open},i.disableHoverableContent?n.createElement(Q,g({side:s},a,{ref:o})):n.createElement(Ae,g({side:s},a,{ref:o})))}),Ae=n.forwardRef((t,o)=>{const e=D(O,t.__scopeTooltip),r=F(O,t.__scopeTooltip),s=n.useRef(null),a=S(o,s),[i,u]=n.useState(null),{trigger:c,onClose:f}=e,l=s.current,{onPointerInTransitChange:d}=r,m=n.useCallback(()=>{u(null),d(!1)},[d]),p=n.useCallback((v,h)=>{const b=v.currentTarget,y={x:v.clientX,y:v.clientY},E=Se(y,b.getBoundingClientRect()),T=Me(y,E),P=Fe(h.getBoundingClientRect()),C=Be([...T,...P]);u(C),d(!0)},[d]);return n.useEffect(()=>()=>m(),[m]),n.useEffect(()=>{if(c&&l){const v=b=>p(b,l),h=b=>p(b,c);return c.addEventListener("pointerleave",v),l.addEventListener("pointerleave",h),()=>{c.removeEventListener("pointerleave",v),l.removeEventListener("pointerleave",h)}}},[c,l,p,m]),n.useEffect(()=>{if(i){const v=h=>{const b=h.target,y={x:h.clientX,y:h.clientY},E=(c==null?void 0:c.contains(b))||(l==null?void 0:l.contains(b)),T=!He(y,i);E?m():T&&(m(),f())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,l,i,f,m]),n.createElement(Q,g({},t,{ref:a}))}),[Ne,ot]=L(H,{isInside:!1}),Q=n.forwardRef((t,o)=>{const{__scopeTooltip:e,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...u}=t,c=D(O,e),f=M(e),{onClose:l}=c;return n.useEffect(()=>(document.addEventListener(N,l),()=>document.removeEventListener(N,l)),[l]),n.useEffect(()=>{if(c.trigger){const d=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&l()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,l]),n.createElement(he,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:l},n.createElement(fe,g({"data-state":c.stateAttribute},f,u,{ref:o,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),n.createElement(Z,null,r),n.createElement(Ne,{scope:e,isInside:!0},n.createElement(pe,{id:c.contentId,role:"tooltip"},s||r))))});function Se(t,o){const e=Math.abs(o.top-t.y),r=Math.abs(o.bottom-t.y),s=Math.abs(o.right-t.x),a=Math.abs(o.left-t.x);switch(Math.min(e,r,s,a)){case a:return"left";case s:return"right";case e:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Me(t,o,e=5){const r=[];switch(o){case"top":r.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":r.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":r.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":r.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return r}function Fe(t){const{top:o,right:e,bottom:r,left:s}=t;return[{x:s,y:o},{x:e,y:o},{x:e,y:r},{x:s,y:r}]}function He(t,o){const{x:e,y:r}=t;let s=!1;for(let a=0,i=o.length-1;a<o.length;i=a++){const u=o[a].x,c=o[a].y,f=o[i].x,l=o[i].y;c>r!=l>r&&e<(f-u)*(r-c)/(l-c)+u&&(s=!s)}return s}function Be(t){const o=t.slice();return o.sort((e,r)=>e.x<r.x?-1:e.x>r.x?1:e.y<r.y?-1:e.y>r.y?1:0),Ve(o)}function Ve(t){if(t.length<=1)return t.slice();const o=[];for(let r=0;r<t.length;r++){const s=t[r];for(;o.length>=2;){const a=o[o.length-1],i=o[o.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))o.pop();else break}o.push(s)}o.pop();const e=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],i=e[e.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}return e.pop(),o.length===1&&e.length===1&&o[0].x===e[0].x&&o[0].y===e[0].y?o:o.concat(e)}const We=Oe,Ue=_e,je=Re,ee=ke,rt=We,st=Ue,te=n.forwardRef(({className:t,...o},e)=>j.jsx(je,{type:"button",...o,ref:e,className:X("inline-flex items-center text-left cursor-default",t)}));te.displayName="TooltipTrigger";const ne=n.forwardRef(({className:t,sideOffset:o=4,children:e,...r},s)=>j.jsx(ee,{ref:s,sideOffset:o,className:X("z-50 overflow-hidden rounded-md bg-bg-inverse px-3 py-1.5 left-0 text-text-inverse animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",$e({variant:"tooltip"}),t),...r,children:e}));ne.displayName=ee.displayName;te.__docgenInfo={description:"",methods:[],displayName:"TooltipTrigger"};ne.__docgenInfo={description:"",methods:[],props:{sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};export{Re as $,rt as T,st as a,te as b,ne as c,nt as d};
