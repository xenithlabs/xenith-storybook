import{j as v}from"./jsx-runtime-DWbWqHZ-.js";import{r as o}from"./index-l2PZgWEW.js";import{_ as T,c as W,d as Z,e as J,a as B,b as Q,f as C}from"./index-BgmTQNcy.js";import{$ as ee,a as te}from"./index-C76mvIvD.js";import{$ as oe}from"./index-DPMSfDr2.js";import{$ as U,a as ne,b as re,c as ce,d as ae}from"./index-NtouhwuU.js";import{$ as q}from"./index-DZOIkxWA.js";import{$ as se}from"./index-vMKBQQL5.js";import{c as le}from"./cn-C-5SdYIA.js";import{T as ie}from"./Text-DEoXBYQB.js";import"./index-CaNG7YX3.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-BmdjtsoG.js";import"./index-Cm6j2cFO.js";import"./styles-BBItLkJ7.js";import"./index-Bb4qSo10.js";const de=o.forwardRef((t,n)=>{const{children:e,...r}=t,c=o.Children.toArray(e),a=c.find(ue);if(a){const s=a.props.children,d=c.map(l=>l===a?o.Children.count(s)>1?o.Children.only(null):o.isValidElement(s)?s.props.children:null:l);return o.createElement(A,T({},r,{ref:n}),o.isValidElement(s)?o.cloneElement(s,void 0,d):null)}return o.createElement(A,T({},r,{ref:n}),e)});de.displayName="Slot";const A=o.forwardRef((t,n)=>{const{children:e,...r}=t;return o.isValidElement(e)?o.cloneElement(e,{...fe(r,e.props),ref:n?W(n,e.ref):e.ref}):o.Children.count(e)>1?o.Children.only(null):null});A.displayName="SlotClone";const z=({children:t})=>o.createElement(o.Fragment,null,t);function ue(t){return o.isValidElement(t)&&t.type===z}function fe(t,n){const e={...n};for(const r in n){const c=t[r],a=n[r];/^on[A-Z]/.test(r)?c&&a?e[r]=(...d)=>{a(...d),c(...d)}:c&&(e[r]=c):r==="style"?e[r]={...c,...a}:r==="className"&&(e[r]=[c,a].filter(Boolean).join(" "))}return{...t,...e}}const[R,rt]=Z("Tooltip",[U]),O=U(),pe="TooltipProvider",$e=700,k="tooltip.open",[me,L]=R(pe),xe=t=>{const{__scopeTooltip:n,delayDuration:e=$e,skipDelayDuration:r=300,disableHoverableContent:c=!1,children:a}=t,[s,d]=o.useState(!0),l=o.useRef(!1),u=o.useRef(0);return o.useEffect(()=>{const i=u.current;return()=>window.clearTimeout(i)},[]),o.createElement(me,{scope:n,isOpenDelayed:s,delayDuration:e,onOpen:o.useCallback(()=>{window.clearTimeout(u.current),d(!1)},[]),onClose:o.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>d(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:o.useCallback(i=>{l.current=i},[]),disableHoverableContent:c},a)},I="Tooltip",[be,P]=R(I),he=t=>{const{__scopeTooltip:n,children:e,open:r,defaultOpen:c=!1,onOpenChange:a,disableHoverableContent:s,delayDuration:d}=t,l=L(I,t.__scopeTooltip),u=O(n),[i,f]=o.useState(null),m=oe(),p=o.useRef(0),$=s??l.disableHoverableContent,b=d??l.delayDuration,x=o.useRef(!1),[y=!1,h]=J({prop:r,defaultProp:c,onChange:N=>{N?(l.onOpen(),document.dispatchEvent(new CustomEvent(k))):l.onClose(),a==null||a(N)}}),g=o.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),E=o.useCallback(()=>{window.clearTimeout(p.current),x.current=!1,h(!0)},[h]),w=o.useCallback(()=>{window.clearTimeout(p.current),h(!1)},[h]),H=o.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{x.current=!0,h(!0)},b)},[b,h]);return o.useEffect(()=>()=>window.clearTimeout(p.current),[]),o.createElement(ne,u,o.createElement(be,{scope:n,contentId:m,open:y,stateAttribute:g,trigger:i,onTriggerChange:f,onTriggerEnter:o.useCallback(()=>{l.isOpenDelayed?H():E()},[l.isOpenDelayed,H,E]),onTriggerLeave:o.useCallback(()=>{$?w():window.clearTimeout(p.current)},[w,$]),onOpen:E,onClose:w,disableHoverableContent:$},e))},j="TooltipTrigger",ve=o.forwardRef((t,n)=>{const{__scopeTooltip:e,...r}=t,c=P(j,e),a=L(j,e),s=O(e),d=o.useRef(null),l=B(n,d,c.onTriggerChange),u=o.useRef(!1),i=o.useRef(!1),f=o.useCallback(()=>u.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.createElement(re,T({asChild:!0},s),o.createElement(Q.button,T({"aria-describedby":c.open?c.contentId:void 0,"data-state":c.stateAttribute},r,{ref:l,onPointerMove:C(t.onPointerMove,m=>{m.pointerType!=="touch"&&!i.current&&!a.isPointerInTransitRef.current&&(c.onTriggerEnter(),i.current=!0)}),onPointerLeave:C(t.onPointerLeave,()=>{c.onTriggerLeave(),i.current=!1}),onPointerDown:C(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:C(t.onFocus,()=>{u.current||c.onOpen()}),onBlur:C(t.onBlur,c.onClose),onClick:C(t.onClick,c.onClose)})))}),K="TooltipPortal",[Te,ye]=R(K,{forceMount:void 0}),Ce=t=>{const{__scopeTooltip:n,forceMount:e,children:r,container:c}=t,a=P(K,n);return o.createElement(Te,{scope:n,forceMount:e},o.createElement(q,{present:e||a.open},o.createElement(ee,{asChild:!0,container:c},r)))},_="TooltipContent",ge=o.forwardRef((t,n)=>{const e=ye(_,t.__scopeTooltip),{forceMount:r=e.forceMount,side:c="top",...a}=t,s=P(_,t.__scopeTooltip);return o.createElement(q,{present:r||s.open},s.disableHoverableContent?o.createElement(X,T({side:c},a,{ref:n})):o.createElement(Ee,T({side:c},a,{ref:n})))}),Ee=o.forwardRef((t,n)=>{const e=P(_,t.__scopeTooltip),r=L(_,t.__scopeTooltip),c=o.useRef(null),a=B(n,c),[s,d]=o.useState(null),{trigger:l,onClose:u}=e,i=c.current,{onPointerInTransitChange:f}=r,m=o.useCallback(()=>{d(null),f(!1)},[f]),p=o.useCallback(($,b)=>{const x=$.currentTarget,y={x:$.clientX,y:$.clientY},h=Re(y,x.getBoundingClientRect()),g=Oe(y,h),E=Ae(b.getBoundingClientRect()),w=Le([...g,...E]);d(w),f(!0)},[f]);return o.useEffect(()=>()=>m(),[m]),o.useEffect(()=>{if(l&&i){const $=x=>p(x,i),b=x=>p(x,l);return l.addEventListener("pointerleave",$),i.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",$),i.removeEventListener("pointerleave",b)}}},[l,i,p,m]),o.useEffect(()=>{if(s){const $=b=>{const x=b.target,y={x:b.clientX,y:b.clientY},h=(l==null?void 0:l.contains(x))||(i==null?void 0:i.contains(x)),g=!ke(y,s);h?m():g&&(m(),u())};return document.addEventListener("pointermove",$),()=>document.removeEventListener("pointermove",$)}},[l,i,s,u,m]),o.createElement(X,T({},t,{ref:a}))}),[we,_e]=R(I,{isInside:!1}),X=o.forwardRef((t,n)=>{const{__scopeTooltip:e,children:r,"aria-label":c,onEscapeKeyDown:a,onPointerDownOutside:s,...d}=t,l=P(_,e),u=O(e),{onClose:i}=l;return o.useEffect(()=>(document.addEventListener(k,i),()=>document.removeEventListener(k,i)),[i]),o.useEffect(()=>{if(l.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(l.trigger)&&i()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,i]),o.createElement(te,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:i},o.createElement(ce,T({"data-state":l.stateAttribute},u,d,{ref:n,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),o.createElement(z,null,r),o.createElement(we,{scope:e,isInside:!0},o.createElement(se,{id:l.contentId,role:"tooltip"},c||r))))}),Pe="TooltipArrow",De=o.forwardRef((t,n)=>{const{__scopeTooltip:e,...r}=t,c=O(e);return _e(Pe,e).isInside?null:o.createElement(ae,T({},c,r,{ref:n}))});function Re(t,n){const e=Math.abs(n.top-t.y),r=Math.abs(n.bottom-t.y),c=Math.abs(n.right-t.x),a=Math.abs(n.left-t.x);switch(Math.min(e,r,c,a)){case a:return"left";case c:return"right";case e:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Oe(t,n,e=5){const r=[];switch(n){case"top":r.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":r.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":r.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":r.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return r}function Ae(t){const{top:n,right:e,bottom:r,left:c}=t;return[{x:c,y:n},{x:e,y:n},{x:e,y:r},{x:c,y:r}]}function ke(t,n){const{x:e,y:r}=t;let c=!1;for(let a=0,s=n.length-1;a<n.length;s=a++){const d=n[a].x,l=n[a].y,u=n[s].x,i=n[s].y;l>r!=i>r&&e<(u-d)*(r-l)/(i-l)+d&&(c=!c)}return c}function Le(t){const n=t.slice();return n.sort((e,r)=>e.x<r.x?-1:e.x>r.x?1:e.y<r.y?-1:e.y>r.y?1:0),Ie(n)}function Ie(t){if(t.length<=1)return t.slice();const n=[];for(let r=0;r<t.length;r++){const c=t[r];for(;n.length>=2;){const a=n[n.length-1],s=n[n.length-2];if((a.x-s.x)*(c.y-s.y)>=(a.y-s.y)*(c.x-s.x))n.pop();else break}n.push(c)}n.pop();const e=[];for(let r=t.length-1;r>=0;r--){const c=t[r];for(;e.length>=2;){const a=e[e.length-1],s=e[e.length-2];if((a.x-s.x)*(c.y-s.y)>=(a.y-s.y)*(c.x-s.x))e.pop();else break}e.push(c)}return e.pop(),n.length===1&&e.length===1&&n[0].x===e[0].x&&n[0].y===e[0].y?n:n.concat(e)}const Me=xe,He=he,Ne=ve,Y=ge,je=De,Se=Me,S=He,Ve=Ne,Ge=je,M=o.forwardRef(({className:t,sideOffset:n=4,children:e,...r},c)=>v.jsxs(Y,{ref:c,sideOffset:n,className:le("z-50 overflow-hidden rounded-md bg-bg-inverse px-3 py-1.5 text-xs left-0 text-white animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r,children:[e,v.jsx(Ge,{})]}));M.displayName=Y.displayName;M.__docgenInfo={description:"",methods:[],props:{sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};const ct={title:"Xenith UI/Components/Tooltip",component:S,tags:["autodocs"],render:()=>v.jsx("div",{className:"relative",children:v.jsx(Se,{children:v.jsxs(S,{children:[v.jsx(Ve,{asChild:!0,children:v.jsx(ie,{children:"Hover me"})}),v.jsx(Ce,{children:v.jsx(M,{children:v.jsx("p",{children:"Add to library"})})})]})})})},D={};var V,G,F;D.parameters={...D.parameters,docs:{...(V=D.parameters)==null?void 0:V.docs,source:{originalSource:"{}",...(F=(G=D.parameters)==null?void 0:G.docs)==null?void 0:F.source}}};const at=["Default"];export{D as Default,at as __namedExportsOrder,ct as default};
