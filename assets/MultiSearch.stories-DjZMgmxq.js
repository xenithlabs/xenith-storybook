import{j as e}from"./jsx-runtime-DR9Q75dM.js";import{r as c}from"./index-DRjF_FHU.js";import{D as fe,a as xe,b as Se,f as P}from"./DropdownMenu-XER5NlNu.js";import{c as g}from"./cn-8RyR4BqC.js";import{t as te}from"./stringCase-DaZl3p-i.js";import{T as O,a as F}from"./Tag-PjBtdWRd.js";import{F as ge}from"./close-D2djoYoT.js";import{P as je,a as ve,b as we}from"./Popover-A4hNnO1p.js";import{d as Ce,I as re,b as ye}from"./useClickOutside-BS0O2wyX.js";import{T as A}from"./Truncate-4o_s824j.js";import{B as K}from"./Button-BfTE6Gaa.js";import{I as j}from"./Icon-CTnhpE1d.js";import{T as S}from"./Text-C8HBwI4b.js";import{B as R}from"./Badge-CQf0SPqP.js";import{F as $}from"./search-5X7N_xNn.js";import{S as z}from"./search-ai-H4BYauaj.js";import{F as J}from"./check-C0C6JGvp.js";import"./index-DuXoWBk8.js";import"./index-CxRLcT2J.js";import"./index-CYnergnF.js";import"./index-ab-r6Yn4.js";import"./index-qtGI3euC.js";import"./index-DdILnG7L.js";import"./index-Bq6ilrdN.js";import"./index-CxZrjbHI.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";import"./chevron-right-D4FvqfWr.js";import"./styles-x1yxmyQd.js";import"./index-Bb4qSo10.js";import"./mini-FlV67GHA.js";import"./spinner-ojW7ALd7.js";import"./chevron-down-CyV3wpL8.js";import"./clock-DRhx3Wks.js";import"./index-CAHntWCK.js";import"./index-HZDBD2ik.js";import"./Heading-DjlBwQyS.js";import"./Checkbox-LSeb53hr.js";import"./index-Bu1UD4WD.js";import"./Tooltip-D2ba4dcD.js";import"./index-BXQDTo2X.js";import"./CopyButton-_NYvsG3t.js";import"./copy-De8jvVXM.js";function U(a,i){let n;const r=function(...s){clearTimeout(n),n=setTimeout(()=>{a.apply(this,s),n=void 0},i)};return r.cancel=function(){clearTimeout(n),n=void 0},r.flush=function(...s){r.cancel(),a.apply(this,s)},r.pending=function(){return n!==void 0},r}function Ne(a){const i=c.useRef(a);i.current=a,c.useEffect(()=>()=>{i.current()},[])}function Te(a,i=500){const n=c.useRef();Ne(()=>{n.current&&n.current.cancel()});const r=c.useMemo(()=>{const s=U(a,i),o=(...u)=>s(...u);return o.cancel=()=>{s.cancel()},o.isPending=()=>!!n.current,o.flush=()=>s.flush(),o},[a,i]);return c.useEffect(()=>{n.current=U(a,i)},[a,i]),r}const be=()=>typeof window>"u"?!1:navigator.userAgent.toLowerCase().includes("mac"),y={Shift:"Shift",Ctrl:"Ctrl",Alt:"Alt",Cmd:"Cmd"},Me=a=>Object.values(y).includes(a);function Ie(a,i){const n=c.useCallback(r=>{const s=Array.isArray(a)?a:[a],o=be();s.map(d=>d.split("+").map(m=>m.trim()).filter(Boolean)).some(d=>d.every(m=>{if(Me(m)){if(!r.getModifierState)return!1;switch(m){case y.Cmd:return o&&r.getModifierState("Meta")||!o&&r.getModifierState("Control");case y.Ctrl:return r.getModifierState("Control");case y.Alt:return r.getModifierState("Alt");case y.Shift:return r.getModifierState("Shift");default:return!1}}return r.key===m}))&&i()},[a,i]);c.useEffect(()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}),[n])}const W=c.forwardRef(({className:a,value:i,onChange:n,columnOptions:r,column:s,defaultColumn:o,onColumnChange:u,leftComponent:h,inputProps:d,selectProps:m,...N},ne)=>{const v=c.useRef(null),k=c.useRef(null),[T,_]=c.useState(""),[l,q]=c.useState(i||[]),[se,E]=c.useState(s||o),[w,b]=c.useState(!1),ie=t=>{requestAnimationFrame(()=>{!t&&document.activeElement!==v.current&&b(!1)})},ce=c.useMemo(()=>r&&typeof r[0]=="string"?r.map(t=>({value:t,label:t&&te(t)})):r,[r]),oe=()=>{var t,p;(p=k.current)==null||p.scrollTo({left:(t=k.current)==null?void 0:t.scrollWidth})},C=t=>{q(t),n==null||n(t)},le=t=>{C([...l,t]),_("")},D=t=>{C(l.filter((p,x)=>x!==t))},L=()=>{C([])},ue=t=>{var p;t.key==="Enter"&&T.trim()!==""&&(le(T.trim()),t.shiftKey||((p=v.current)==null||p.blur(),b(!1))),t.key==="Backspace"&&T.trim()===""&&D(l.length-1)},me=t=>{var x;const p=(x=t.clipboardData)==null?void 0:x.getData("text/plain");if(p){const pe=/\r\n|\r|\n/,he=p.split(pe).map(V=>V.trim()).filter(V=>V!=="");C([...l,...he])}t.preventDefault()},de=t=>{E(t),u==null||u(t)};return c.useEffect(()=>{q(i||[])},[i]),c.useEffect(()=>{E(s!==void 0?s:o)},[s,o]),c.useEffect(()=>{w&&oe()},[l,w]),Ie("Escape",()=>{var t;b(!1),(t=v.current)==null||t.blur()}),e.jsxs(je,{open:w,onOpenChange:ie,children:[e.jsxs("div",{ref:ne,className:g("flex h-10 border divide-x w-[620px] bg-bg-default border-border-default divide-border-default rounded-radius-md",a),...N,children:[h&&e.jsx("div",{className:"w-[44px] shrink-0 flex items-center justify-center ",children:h}),e.jsx(Ce,{options:ce,isOptionSearchable:!1,placeholder:"Select Column",noBorder:!0,noBorderHeightAdjusted:!0,...m,className:g("w-40 shrink-0",m==null?void 0:m.className),menuClassName:"mt-[3px]",value:se,onChange:de}),e.jsxs("div",{className:"flex overflow-hidden flex-1 gap-1 items-center pr-3","data-search-input":!0,children:[e.jsxs("div",{ref:k,onClick:()=>{var t;(t=v.current)==null||t.focus()},className:"flex overflow-auto flex-1 gap-2 px-2 cursor-text",style:{scrollbarWidth:"thin"},children:[l&&l.length>0&&e.jsx(e.Fragment,{children:w?e.jsx("div",{className:"flex gap-2 items-center",children:l==null?void 0:l.map((t,p)=>e.jsx(O,{className:"max-w-[106px]",onPointerDown:x=>{x.stopPropagation()},rightComponent:e.jsx(F,{onClose:()=>{D(p)}}),children:e.jsx(A,{fluid:!0,maxWidth:74,middleTruncate:!0,withTooltip:!0,middleTruncateEndLength:6,children:t})},`${t}-${p}`))}):e.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[l==null?void 0:l.slice(0,3).map((t,p)=>e.jsx(O,{className:"max-w-[88px]",rightComponent:e.jsx(F,{onClose:x=>{x.stopPropagation(),x.preventDefault(),D(p)}}),children:e.jsx(A,{fluid:!0,maxWidth:56,middleTruncate:!0,withTooltip:!0,middleTruncateEndLength:4,children:t})},`${t}-${p}`)),(l==null?void 0:l.length)>3&&e.jsxs(O,{className:"whitespace-nowrap",children:["+",l.length-3," more"]})]})}),e.jsx(re,{ref:v,placeholder:l.length>0?" ":"Multi Search",...d,containerClassName:g(d==null?void 0:d.containerClassName,"border-none h-[38px] px-0",{"min-w-[160px]":w}),value:T,onChange:t=>{_(t.target.value)},onClear:()=>{L()},onKeyDown:ue,onFocus:()=>{b(!0)},onPaste:me})]}),l.length>0&&e.jsx(K,{variant:"nude",theme:"neutral",size:"xs",icon:e.jsx(j,{icon:e.jsx(ge,{}),size:"lg",className:"text-text-weaker"}),iconOnly:!0,onClick:L})]})]}),e.jsx(ve,{className:"w-0 h-0",tabIndex:-1}),e.jsx(Oe,{value:l,onValueChange:C})]})});W.displayName="MultiSearchInput";const Oe=({value:a,onValueChange:i})=>{const n=s=>{i(a.filter((o,u)=>u!==s))},r=()=>{i([])};return e.jsxs(we,{side:"bottom",align:"start",sideOffset:-12,className:"px-1 py-3 space-y-2 w-[620px]",onOpenAutoFocus:s=>{s.preventDefault()},onInteractOutside:s=>{s.target.closest("[data-search-input]")&&s.preventDefault()},onPointerDownOutside:s=>{s.target.closest("[data-search-input]")&&s.preventDefault()},children:[e.jsxs("div",{className:"px-2 h-[23px] flex justify-between items-center",children:[e.jsx(S,{variant:"semiBold",className:"uppercase text-text-weaker",children:"Searching For"}),e.jsx(K,{variant:"link",size:"xs",className:"max-w-[47px]",onClick:r,children:"Clear all"})]}),e.jsx("div",{className:"max-h-[256px] overflow-auto flex flex-wrap gap-2",children:a.map((s,o)=>e.jsx(O,{rightComponent:e.jsx(F,{onClose:()=>n(o)}),className:"max-w-full",children:e.jsx(A,{fluid:!0,minWidth:0,maxWidth:"max-w-full",children:s})},o))}),e.jsxs("div",{className:"flex justify-between pt-2 pr-3 pl-2 border-t border-border-default",children:[e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(R,{theme:"neutral",variant:"outline",children:"Esc"}),e.jsx(S,{className:"text-text-weaker",children:"to close"})]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(S,{children:"Press"}),e.jsx(R,{theme:"neutral",variant:"outline",children:"Shift ⇧"}),e.jsx(S,{children:"+"}),e.jsx(R,{theme:"neutral",variant:"outline",children:"Enter ↵"}),e.jsx(S,{className:"text-text-weaker",children:"to add new search parameter"})]})]})]})};W.__docgenInfo={description:"",methods:[],displayName:"MultiSearchInput"};const f={Basic:"basic",Multi:"multi"},B=({className:a,containerClassName:i,basicSearchProps:n,multiSearchProps:r,searchType:s=f.Basic,onSearchTypeChange:o})=>{const[u,h]=c.useState(s||f.Basic),d=N=>{h(N),o==null||o(N)};c.useEffect(()=>{h==null||h(s)},[s]);const m=()=>{switch(u){case f.Basic:return e.jsx(ae,{...n,className:g(a,n==null?void 0:n.className),leftComponent:e.jsx(ye,{className:"border-r-0 px-2.5",children:e.jsx(H,{value:u,onChange:d})})});case f.Multi:return e.jsx(W,{...r,leftComponent:e.jsx(H,{value:u,onChange:d})});default:return null}};return e.jsx("div",{className:g("h-10",i),children:m()})},H=({value:a,onChange:i})=>{const[n,r]=c.useState(!1);return e.jsxs(fe,{open:n,onOpenChange:r,children:[e.jsx(xe,{asChild:!0,children:e.jsx(K,{variant:n?"nude":"outline",theme:"neutral",size:"xs",className:g("gap-0 px-0 h-6 min-w-6 hover:bg-accent-weak hover:border-0",n&&"bg-accent-weak"),icon:e.jsx(j,{icon:a===f.Basic?e.jsx($,{}):e.jsx(z,{}),className:"text-text-accent"})})}),e.jsxs(Se,{className:"w-[176px]",side:"bottom",align:"start",alignOffset:-11,sideOffset:10,children:[e.jsxs(P,{onSelect:()=>{i(f.Basic)},className:"flex justify-between text-text-weak",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{icon:e.jsx($,{})}),e.jsx(S,{variant:"medium",children:"Basic Search"})]}),a===f.Basic&&e.jsx(j,{icon:e.jsx(J,{}),className:"text-text-accent"})]}),e.jsxs(P,{onSelect:()=>{i(f.Multi)},className:"flex justify-between text-text-weak",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{icon:e.jsx(z,{})}),e.jsx(S,{variant:"medium",children:"Multi Search"})]}),a===f.Multi&&e.jsx(j,{icon:e.jsx(J,{}),className:"text-text-accent"})]})]})]})},ae=c.forwardRef(({delay:a=500,value:i,onChange:n,...r},s)=>{const[o,u]=c.useState(i),h=Te(n||(()=>{}),a),d=m=>{u(m.target.value),h(m)};return c.useEffect(()=>{u(i)},[i]),e.jsx(re,{ref:s,type:"text",clearable:!0,...r,value:o,onChange:d,containerClassName:g("w-[620px]",r.containerClassName),placeholder:r.placeholder?r.rawPlaceholder?r.placeholder:te(r.placeholder):"Search"})});ae.displayName="BasicSearchInput";B.__docgenInfo={description:"",methods:[],displayName:"MultiSearch",props:{className:{required:!1,tsType:{name:"string"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},basicSearchProps:{required:!1,tsType:{name:"Omit",elements:[{name:"BasicSearchProps"},{name:"literal",value:'"leftComponent"'}],raw:'Omit<BasicSearchProps, "leftComponent">'},description:""},multiSearchProps:{required:!1,tsType:{name:"Omit",elements:[{name:"MultiSearchInputProps"},{name:"literal",value:'"leftComponent"'}],raw:'Omit<MultiSearchInputProps, "leftComponent">'},description:""},searchType:{required:!1,tsType:{name:"SearchType"},description:"",defaultValue:{value:'"basic"',computed:!1}},onSearchTypeChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(searchType: SearchType) => void",signature:{arguments:[{type:{name:"SearchType"},name:"searchType"}],return:{name:"void"}}},description:""}}};const vt={title:"Xenith UI/Components/MultiSearch",component:B,tags:["autodocs"]},M={args:{multiSearchProps:{columnOptions:["id","name","email"],defaultColumn:"id"}},render:a=>e.jsx("div",{className:"w-[800px] h-[400px]",children:e.jsx(B,{...a})})},I={args:{multiSearchProps:{columnOptions:["id","name","email"],defaultColumn:"id"}},render:a=>{const[i,n]=c.useState(""),[r,s]=c.useState([]),[o,u]=c.useState(""),[h,d]=c.useState(f.Basic);return e.jsxs("div",{className:"w-[800px] h-[400px]",children:[e.jsx(B,{...a,basicSearchProps:{value:i,onChange:m=>n(m.target.value),onClear:()=>n(""),...a.basicSearchProps},multiSearchProps:{value:r,onChange:s,column:o,onColumnChange:u,...a.multiSearchProps},searchType:h,onSearchTypeChange:d}),e.jsx("pre",{children:JSON.stringify({search:i,multiSearchValue:r,multiSearchColumn:o,searchType:h},null,2)})]})}};var X,G,Q;M.parameters={...M.parameters,docs:{...(X=M.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    multiSearchProps: {
      columnOptions: ["id", "name", "email"],
      defaultColumn: "id"
    }
  },
  render: args => <div className="w-[800px] h-[400px]">
      <MultiSearch {...args} />
    </div>
}`,...(Q=(G=M.parameters)==null?void 0:G.docs)==null?void 0:Q.source}}};var Y,Z,ee;I.parameters={...I.parameters,docs:{...(Y=I.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    multiSearchProps: {
      columnOptions: ["id", "name", "email"],
      defaultColumn: "id"
    }
  },
  render: args => {
    const [search, setSearch] = useState<string>("");
    const [multiSearchValue, setMultiSearchValue] = useState<string[]>([]);
    const [multiSearchColumn, setMultiSearchColumn] = useState<string>("");
    const [searchType, setSearchType] = useState<SearchType>(SearchType.Basic);
    return <div className="w-[800px] h-[400px]">
        <MultiSearch {...args} basicSearchProps={{
        value: search,
        onChange: e => setSearch(e.target.value),
        onClear: () => setSearch(""),
        ...args.basicSearchProps
      }} multiSearchProps={{
        value: multiSearchValue,
        onChange: setMultiSearchValue,
        column: multiSearchColumn,
        onColumnChange: setMultiSearchColumn,
        ...args.multiSearchProps
      }} searchType={searchType} onSearchTypeChange={setSearchType} />

        <pre>
          {JSON.stringify({
          search,
          multiSearchValue,
          multiSearchColumn,
          searchType
        }, null, 2)}
        </pre>
      </div>;
  }
}`,...(ee=(Z=I.parameters)==null?void 0:Z.docs)==null?void 0:ee.source}}};const wt=["Default","WithControlledValue"];export{M as Default,I as WithControlledValue,wt as __namedExportsOrder,vt as default};
