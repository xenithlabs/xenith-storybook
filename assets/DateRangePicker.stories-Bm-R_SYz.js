import{j as n}from"./jsx-runtime-BhBAkL08.js";import{r as d}from"./index-caxmlYbZ.js";import{g as K,s as Y,a as L,f as u}from"./format-C_zMm074.js";import{t as y}from"./constructFrom-rJN6zrQ_.js";import{e as P,a as Z}from"./endOfMonth-BsYXtoie.js";import{c as w}from"./cn-C-5SdYIA.js";import{a as ee}from"./spinner-ByTSIKau.js";import{F as te}from"./chevron-right-C3e6g37q.js";import{F as b}from"./calendar-DWhiacmf.js";import{F as ne}from"./check-CDvVW5im.js";import{B as f}from"./Button-3dGPhkPQ.js";import{T as h}from"./Text-D-wIA97j.js";import{I as x}from"./Icon-7BdkfswG.js";import{D as O}from"./Divider-rb-Rmumz.js";import{s as re}from"./differenceInCalendarDays-akuTVAtC.js";import{P as R,a as C,b as q}from"./Popover-Dr_kQcGi.js";import{C as se}from"./Calendar-DM-hT0Hq.js";import"./index-D09aQd82.js";import"./index-Bb4qSo10.js";import"./styles-BNEhTmYy.js";import"./chevron-down-mN_p2z2a.js";import"./index-d7ziAqdJ.js";import"./index-DIE_uK0V.js";import"./index-CoQPK225.js";import"./index-D0ZzT1CX.js";import"./index-9ELtA30B.js";import"./index-CYGPaFfr.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-BPrjlVTu.js";import"./index-D1_gb_Tp.js";import"./chevron-left-BzZ3Cg5H.js";function E(t){const e=y(t),r=e.getMonth(),o=r-r%3;return e.setMonth(o,1),e.setHours(0,0,0,0),e}function z(t){const e=y(t);return e.setDate(1),e.setHours(0,0,0,0),e}function H(t){const e=y(t),r=e.getFullYear();return e.setFullYear(r+1,0,0),e.setHours(23,59,59,999),e}function A(t,e){var j,g;const r=K(),o=r.weekStartsOn??((g=(j=r.locale)==null?void 0:j.options)==null?void 0:g.weekStartsOn)??0,i=y(t),p=i.getDay(),m=(p<o?-7:0)+6-(p-o);return i.setDate(i.getDate()+m),i.setHours(23,59,59,999),i}function Q(t){const e=y(t),r=e.getMonth(),o=r-r%3+3;return e.setMonth(o,0),e.setHours(23,59,59,999),e}const ae={"This week":oe,"This month":ie,"This quarter":ce,"This year":me,"Last week":de,"Last month":le,"Last quarter":fe,"Last year":ue};function oe(){const t=new Date,e=Y(t),r=A(t);return{from:e,to:r}}function ie(){const t=new Date,e=z(t),r=P(t);return{from:e,to:r}}function ce(){const t=new Date,e=E(t),r=Q(t);return{from:e,to:r}}function me(){const t=new Date,e=L(t),r=H(t);return{from:e,to:r}}function de(){const t=new Date,e=Y(t),r=A(t);return e.setDate(e.getDate()-7),r.setDate(r.getDate()-7),{from:e,to:r}}function le(){const t=new Date,e=z(t),r=P(t);return e.setMonth(e.getMonth()-1),r.setMonth(r.getMonth()-1),{from:e,to:r}}function fe(){const t=new Date,e=E(t),r=Q(t);return e.setMonth(e.getMonth()-3),r.setMonth(r.getMonth()-3),{from:e,to:r}}function ue(){const t=new Date,e=L(t),r=H(t);return e.setFullYear(e.getFullYear()-1),r.setFullYear(r.getFullYear()-1),{from:e,to:r}}const W=({label:t,startDate:e,endDate:r,startDateFormat:o="dd MMM",endDateFormat:i="dd MMM yyyy",selected:p,onClick:m})=>n.jsxs(f,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",onClick:()=>m&&m({from:e,to:r}),children:[n.jsx(h,{variant:"regular",children:t}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(h,{variant:"regular",className:"text-text-weak",children:[u(e,o)," - ",u(r,i)]}),p?n.jsx(x,{icon:n.jsx(ne,{}),className:"text-text-accent"}):n.jsx("div",{className:"w-4 h-4"})]})]});W.__docgenInfo={description:"",methods:[],displayName:"DateRangeTemplate",props:{label:{required:!0,tsType:{name:"string"},description:""},startDate:{required:!0,tsType:{name:"Date"},description:""},endDate:{required:!0,tsType:{name:"Date"},description:""},startDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM"',computed:!1}},endDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM yyyy"',computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dateRange: DateRange) => void",signature:{arguments:[{type:{name:"DateRange"},name:"dateRange"}],return:{name:"void"}}},description:""}}};const $=({value:t,onChange:e,required:r,fromDate:o,toDate:i,error:p,dateFormat:m,...j})=>{const[g,T]=d.useState(!1),[c,v]=d.useState(t),[B,N]=d.useState(!1),[s,V]=d.useState({from:new Date,to:new Date}),G=d.useMemo(()=>{if(o&&i)return{before:o,after:i};if(o)return{before:o};if(i)return{after:i}},[o,i]),U=d.useMemo(()=>Object.entries(ae).map(([a,l])=>({label:a,range:l()})),[]),X=a=>!(c!=null&&c.from)||!(c!=null&&c.to)?!1:u(c.from,"yyyy-MM-dd")===u(a.from,"yyyy-MM-dd")&&u(c.to,"yyyy-MM-dd")===u(a.to,"yyyy-MM-dd"),J=a=>m?Array.isArray(m)?m[a==="from"?0:1]:m:"dd MMM yyyy",M=(a,l)=>a?u(a,J(l)):"",k=a=>{v(a),e==null||e(a)};return d.useEffect(()=>{v(t)},[t]),n.jsxs(R,{open:g,onOpenChange:T,children:[n.jsx(C,{asChild:!0,children:n.jsx(f,{variant:"outline",theme:"neutral",className:w("justify-start text-left font-normal items-center px-3 gap-5",!c&&"text-muted-foreground",{"border-border-critical":p}),icon:n.jsx(x,{icon:n.jsx(ee,{}),size:"lg",className:w("text-text-weak",{"rotate-180":!g})}),iconPosition:"right",children:c?n.jsxs(n.Fragment,{children:[M(c.from,"from")," -"," ",M(c.to,"to")]}):"Select Date Range"})}),n.jsx(q,{className:"p-1",align:"start",style:{width:"320px"},children:n.jsxs("div",{className:"flex flex-col",children:[U.map(({label:a,range:l},S)=>n.jsxs(d.Fragment,{children:[n.jsx(W,{label:a,startDate:l.from,endDate:l.to,onClick:k,selected:X(l)}),S===3&&n.jsx(O,{className:"my-1"})]},S)),n.jsx(O,{className:"my-1"}),n.jsxs(R,{open:B,onOpenChange:N,children:[n.jsx(C,{asChild:!0,children:n.jsxs(f,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",children:[n.jsx(h,{variant:"regular",children:"Custom Range"}),n.jsx(x,{icon:n.jsx(te,{}),className:"text-text-weak"})]})}),n.jsxs(q,{side:"right",sideOffset:8,className:"p-0",children:[n.jsxs("div",{className:"p-3 mb-1 space-y-1",children:[n.jsx(h,{variant:"medium",children:"Custom range"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(f,{variant:"outline",theme:"neutral",className:w("justify-start text-left font-normal items-center flex-1",{"text-text-weaker":!(s!=null&&s.from)}),icon:n.jsx(x,{icon:n.jsx(b,{}),className:"text-text-weak"}),children:s!=null&&s.from?M(s.from,"from"):"Start Date"}),n.jsx(h,{variant:"medium",children:"-"}),n.jsx(f,{variant:"outline",theme:"neutral",className:w("justify-start text-left font-normal items-center flex-1",{"text-text-weaker":!(s!=null&&s.to)}),icon:n.jsx(x,{icon:n.jsx(b,{}),className:"text-text-weak"}),children:s!=null&&s.to?M(s.to,"to"):"End Date"})]})]}),n.jsx(se,{autoFocus:!0,mode:"range",selected:s,onSelect:V,required:r,disabled:G,startMonth:o,endMonth:i,numberOfMonths:2,className:"border-0 shadow-none",...j}),n.jsx(O,{className:"my-1"}),n.jsxs("div",{className:"flex justify-end gap-4 p-3",children:[n.jsx(f,{variant:"outline",theme:"neutral",size:"sm",className:"w-[70px]",onClick:()=>{N(!1)},children:"Cancel"}),n.jsx(f,{size:"sm",className:"w-[70px]",disabled:!(s!=null&&s.from)||!(s!=null&&s.to),onClick:()=>{const a=s&&{from:s.from&&re(new Date(s.from)),to:s.to&&Z(new Date(s.to))};k(a),N(!1),T(!1)},children:"Save"})]})]})]})]})})]})};$.__docgenInfo={description:"",methods:[],displayName:"DateRangePicker",props:{value:{required:!1,tsType:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: DateRange | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},error:{required:!1,tsType:{name:"boolean"},description:""},dateFormat:{required:!1,tsType:{name:"union",raw:"string | [string, string]",elements:[{name:"string"},{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]}]},description:""}}};const $e={title:"Xenith UI/Components/Date Range Picker",component:$,decorators:t=>n.jsx("div",{className:"py-10 w-[600px] h-[400px]  pb-40",children:n.jsx(t,{})}),tags:["autodocs"]},D={args:{onChange:t=>{var e,r;console.log("value",t),console.log("ISO string",{from:(e=t==null?void 0:t.from)==null?void 0:e.toISOString(),to:(r=t==null?void 0:t.to)==null?void 0:r.toISOString()})}}};var F,_,I;D.parameters={...D.parameters,docs:{...(F=D.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(I=(_=D.parameters)==null?void 0:_.docs)==null?void 0:I.source}}};const Be=["Default"];export{D as Default,Be as __namedExportsOrder,$e as default};
