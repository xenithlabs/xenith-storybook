import{j as t}from"./jsx-runtime-BhBAkL08.js";import{c as D}from"./cn-C-5SdYIA.js";import{g as re,s as z,a as H,f}from"./format-BTZPU_Wb.js";import{t as y}from"./constructFrom-rJN6zrQ_.js";import{e as I}from"./endOfMonth-CoG5-XNs.js";import{r as d}from"./index-caxmlYbZ.js";import{a as se}from"./spinner-ByTSIKau.js";import{F as ne}from"./chevron-right-C3e6g37q.js";import{F}from"./calendar-DWhiacmf.js";import{F as ae}from"./check-CDvVW5im.js";import{B as u}from"./Button-3dGPhkPQ.js";import{T as h}from"./Text-D-wIA97j.js";import{I as x}from"./Icon-7BdkfswG.js";import{D as N}from"./Divider-rb-Rmumz.js";import{P as q,a as C,b as S}from"./Popover-Dr_kQcGi.js";import{C as oe}from"./Calendar-DM-hT0Hq.js";import"./differenceInCalendarDays-Do9CeC6b.js";import"./index-D09aQd82.js";import"./index-Bb4qSo10.js";import"./styles-BNEhTmYy.js";import"./chevron-down-mN_p2z2a.js";import"./index-d7ziAqdJ.js";import"./index-DIE_uK0V.js";import"./index-CoQPK225.js";import"./index-D0ZzT1CX.js";import"./index-9ELtA30B.js";import"./index-CYGPaFfr.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-BPrjlVTu.js";import"./index-D1_gb_Tp.js";import"./chevron-left-BzZ3Cg5H.js";function A(r){const e=y(r),s=e.getMonth(),a=s-s%3;return e.setMonth(a,1),e.setHours(0,0,0,0),e}function Q(r){const e=y(r);return e.setDate(1),e.setHours(0,0,0,0),e}function $(r){const e=y(r),s=e.getFullYear();return e.setFullYear(s+1,0,0),e.setHours(23,59,59,999),e}function B(r,e){var j,g;const s=re(),a=s.weekStartsOn??((g=(j=s.locale)==null?void 0:j.options)==null?void 0:g.weekStartsOn)??0,o=y(r),p=o.getDay(),m=(p<a?-7:0)+6-(p-a);return o.setDate(o.getDate()+m),o.setHours(23,59,59,999),o}function V(r){const e=y(r),s=e.getMonth(),a=s-s%3+3;return e.setMonth(a,0),e.setHours(23,59,59,999),e}const ie={"This week":ce,"This month":me,"This quarter":de,"This year":le,"Last week":ue,"Last month":fe,"Last quarter":pe,"Last year":ge};function ce(){const r=new Date,e=z(r),s=B(r);return{from:e,to:s}}function me(){const r=new Date,e=Q(r),s=I(r);return{from:e,to:s}}function de(){const r=new Date,e=A(r),s=V(r);return{from:e,to:s}}function le(){const r=new Date,e=H(r),s=$(r);return{from:e,to:s}}function ue(){const r=new Date,e=z(r),s=B(r);return e.setDate(e.getDate()-7),s.setDate(s.getDate()-7),{from:e,to:s}}function fe(){const r=new Date,e=Q(r),s=I(r);return e.setMonth(e.getMonth()-1),s.setMonth(s.getMonth()-1),{from:e,to:s}}function pe(){const r=new Date,e=A(r),s=V(r);return e.setMonth(e.getMonth()-3),s.setMonth(s.getMonth()-3),{from:e,to:s}}function ge(){const r=new Date,e=H(r),s=$(r);return e.setFullYear(e.getFullYear()-1),s.setFullYear(s.getFullYear()-1),{from:e,to:s}}const G=({label:r,startDate:e,endDate:s,startDateFormat:a="dd MMM",endDateFormat:o="dd MMM yyyy",selected:p,onClick:m})=>t.jsxs(u,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",onClick:()=>m&&m({from:e,to:s}),children:[t.jsx(h,{variant:"regular",children:r}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(h,{variant:"regular",className:"text-text-weak",children:[f(e,a)," - ",f(s,o)]}),p?t.jsx(x,{icon:t.jsx(ae,{}),className:"text-text-accent"}):t.jsx("div",{className:"w-4 h-4"})]})]});G.__docgenInfo={description:"",methods:[],displayName:"DateRangeTemplate",props:{label:{required:!0,tsType:{name:"string"},description:""},startDate:{required:!0,tsType:{name:"Date"},description:""},endDate:{required:!0,tsType:{name:"Date"},description:""},startDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM"',computed:!1}},endDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM yyyy"',computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dateRange: DateRange) => void",signature:{arguments:[{type:{name:"DateRange"},name:"dateRange"}],return:{name:"void"}}},description:""}}};const U=({value:r,onChange:e,required:s,fromDate:a,toDate:o,error:p,dateFormat:m,...j})=>{const[g,O]=d.useState(!1),[c,R]=d.useState(r),[X,T]=d.useState(!1),[n,J]=d.useState({from:new Date,to:new Date}),K=d.useMemo(()=>{if(a&&o)return{before:a,after:o};if(a)return{before:a};if(o)return{after:o}},[a,o]),Z=d.useMemo(()=>Object.entries(ie).map(([i,l])=>({label:i,range:l()})),[]),ee=i=>!(c!=null&&c.from)||!(c!=null&&c.to)?!1:f(c.from,"yyyy-MM-dd")===f(i.from,"yyyy-MM-dd")&&f(c.to,"yyyy-MM-dd")===f(i.to,"yyyy-MM-dd"),te=i=>m?Array.isArray(m)?m[i==="from"?0:1]:m:"dd MMM yyyy",M=(i,l)=>i?f(i,te(l)):"",b=i=>{R(i),e==null||e(i)};return d.useEffect(()=>{R(r)},[r]),t.jsxs(q,{open:g,onOpenChange:O,children:[t.jsx(C,{asChild:!0,children:t.jsx(u,{variant:"outline",theme:"neutral",className:D("justify-start text-left font-normal items-center px-3 gap-5",!c&&"text-muted-foreground",{"border-border-critical":p}),icon:t.jsx(x,{icon:t.jsx(se,{}),size:"lg",className:D("text-text-weak",{"rotate-180":g})}),iconPosition:"right",children:c?t.jsxs(t.Fragment,{children:[M(c.from,"from")," -"," ",M(c.to,"to")]}):"Select Date Range"})}),t.jsx(S,{className:"p-1",align:"start",style:{width:"320px"},children:t.jsxs("div",{className:"flex flex-col",children:[Z.map(({label:i,range:l},k)=>t.jsxs(d.Fragment,{children:[t.jsx(G,{label:i,startDate:l.from,endDate:l.to,onClick:b,selected:ee(l)}),k===3&&t.jsx(N,{className:"my-1"})]},k)),t.jsx(N,{className:"my-1"}),t.jsxs(q,{open:X,onOpenChange:T,children:[t.jsx(C,{asChild:!0,children:t.jsxs(u,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",children:[t.jsx(h,{variant:"regular",children:"Custom Range"}),t.jsx(x,{icon:t.jsx(ne,{}),className:"text-text-weak"})]})}),t.jsxs(S,{side:"right",sideOffset:8,className:"p-0",children:[t.jsxs("div",{className:"p-3 mb-1 space-y-1",children:[t.jsx(h,{variant:"medium",children:"Custom range"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(u,{variant:"outline",theme:"neutral",className:D("justify-start text-left font-normal items-center flex-1",!(n!=null&&n.from)&&"text-muted-foreground"),icon:t.jsx(x,{icon:t.jsx(F,{})}),children:n!=null&&n.from?M(n.from,"from"):"Start Date"}),t.jsx(h,{variant:"medium",children:"-"}),t.jsx(u,{variant:"outline",theme:"neutral",className:D("justify-start text-left font-normal items-center flex-1",!(n!=null&&n.to)&&"text-muted-foreground"),icon:t.jsx(x,{icon:t.jsx(F,{})}),children:n!=null&&n.to?M(n.to,"to"):"End Date"})]})]}),t.jsx(oe,{autoFocus:!0,mode:"range",selected:n,onSelect:J,required:s,disabled:K,startMonth:a,endMonth:o,numberOfMonths:2,className:"border-0 shadow-none",...j}),t.jsx(N,{className:"my-1"}),t.jsxs("div",{className:"flex justify-end gap-4 p-3",children:[t.jsx(u,{variant:"outline",theme:"neutral",size:"sm",className:"w-[70px]",onClick:()=>{T(!1)},children:"Cancel"}),t.jsx(u,{size:"sm",className:"w-[70px]",onClick:()=>{b(n),T(!1),O(!1)},children:"Save"})]})]})]})]})})]})};U.__docgenInfo={description:"",methods:[],displayName:"DateRangePicker",props:{value:{required:!1,tsType:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: DateRange | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},error:{required:!1,tsType:{name:"boolean"},description:""},dateFormat:{required:!1,tsType:{name:"union",raw:"string | [string, string]",elements:[{name:"string"},{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]}]},description:""}}};const Ve={title:"Xenith UI/Components/Date Range Picker",component:U,decorators:r=>t.jsx("div",{className:"py-10 w-[600px] h-[400px]  pb-40",children:t.jsx(r,{})}),tags:["autodocs"]},w={},v={args:{fromDate:new Date}};var _,Y,L;w.parameters={...w.parameters,docs:{...(_=w.parameters)==null?void 0:_.docs,source:{originalSource:"{}",...(L=(Y=w.parameters)==null?void 0:Y.docs)==null?void 0:L.source}}};var P,E,W;v.parameters={...v.parameters,docs:{...(P=v.parameters)==null?void 0:P.docs,source:{originalSource:`{
  args: {
    fromDate: new Date()
  }
}`,...(W=(E=v.parameters)==null?void 0:E.docs)==null?void 0:W.source}}};const Ge=["Default","WithFromDate"];export{w as Default,v as WithFromDate,Ge as __namedExportsOrder,Ve as default};
