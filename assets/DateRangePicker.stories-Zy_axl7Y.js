import{j as n}from"./jsx-runtime-DR9Q75dM.js";import{r as m}from"./index-DRjF_FHU.js";import{e as Me}from"./endOfDay-BZ5bvh5Y.js";import{t as te,s as Re}from"./differenceInCalendarDays-C3EGPyW5.js";import{s as ne,a as ae,f as d}from"./format-DeQ6fwDa.js";import{e as re,s as se,a as oe,i as Se}from"./Calendar-DbVYY7jP.js";import{e as ie}from"./endOfMonth-CBUZ-2Pf.js";import{c as j}from"./cn-C-5SdYIA.js";import{I as S}from"./Icon-Bs9G1Rwk.js";import{a as Y}from"./spinner-fxOeMmbK.js";import{F as ve}from"./chevron-right-BqZwpdvf.js";import{F as Ne}from"./check-rKbD1QKS.js";import{B as p}from"./Button-X8fnom3X.js";import{T as u}from"./Text-BYjIVLkz.js";import{D as A}from"./DateTimePicker-DbG3YSQW.js";import{P as z,a as Q,b as B}from"./Popover-jvvk1f8v.js";import{D as q}from"./Divider-CVEwzqm3.js";import"./styles-BNEhTmYy.js";import"./index-Bb4qSo10.js";import"./chevron-left-rLDlePxE.js";import"./index-HZDBD2ik.js";import"./chevron-down-DqISSPB-.js";import"./calendar-lcr2z1-P.js";import"./useClickOutside-BKEUG6_P.js";import"./search-CWRmq9WO.js";import"./close-CAN3cq4E.js";import"./stringCase-DaZl3p-i.js";import"./index-DuXoWBk8.js";import"./index-CxRLcT2J.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-CAHntWCK.js";import"./Heading-BbwmavmP.js";import"./Checkbox-C6NF-Wyv.js";import"./index-Bu1UD4WD.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";import"./index-DdILnG7L.js";import"./index-CWbDPhO_.js";import"./index-qtGI3euC.js";import"./index-CxZrjbHI.js";function me(e,t){const a=te(e,t==null?void 0:t.in),l=a.getMonth(),c=l-l%3;return a.setMonth(c,1),a.setHours(0,0,0,0),a}function le(e,t){const a=te(e,t==null?void 0:t.in),l=a.getMonth(),c=l-l%3+3;return a.setMonth(c,0),a.setHours(23,59,59,999),a}const Oe={Today:be,"This week":ke,"This month":Ce,"This quarter":qe,"This year":Ie,"Last week":Le,"Last month":Pe,"Last quarter":Fe,"Last year":We};function be(){const e=new Date,t=Re(e),a=Me(e);return{from:t,to:a}}function ke(){const e=new Date,t=ne(e),a=re(e);return{from:t,to:a}}function Ce(){const e=new Date,t=se(e),a=ie(e);return{from:t,to:a}}function qe(){const e=new Date,t=me(e),a=le(e);return{from:t,to:a}}function Ie(){const e=new Date,t=ae(e),a=oe(e);return{from:t,to:a}}function Le(){const e=new Date,t=ne(e),a=re(e);return t.setDate(t.getDate()-7),a.setDate(a.getDate()-7),{from:t,to:a}}function Pe(){const e=new Date,t=se(e),a=ie(e);return t.setMonth(t.getMonth()-1),a.setMonth(a.getMonth()-1),{from:t,to:a}}function Fe(){const e=new Date,t=me(e),a=le(e);return t.setMonth(t.getMonth()-3),a.setMonth(a.getMonth()-3),{from:t,to:a}}function We(){const e=new Date,t=ae(e),a=oe(e);return t.setFullYear(t.getFullYear()-1),a.setFullYear(a.getFullYear()-1),{from:t,to:a}}const ce=({label:e,startDate:t,endDate:a,startDateFormat:l="dd MMM",endDateFormat:c="dd MMM yyyy",selected:g,onClick:y})=>n.jsxs(p,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",onClick:()=>y&&y({from:t,to:a}),children:[n.jsx(u,{variant:"regular",children:e}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(u,{variant:"regular",className:"text-text-weak",children:[d(t,l)," - ",d(a,c)]}),g?n.jsx(S,{icon:n.jsx(Ne,{}),className:"text-text-accent"}):n.jsx("div",{className:"w-4 h-4"})]})]});ce.__docgenInfo={description:"",methods:[],displayName:"DateRangeTemplate",props:{label:{required:!0,tsType:{name:"string"},description:""},startDate:{required:!0,tsType:{name:"Date"},description:""},endDate:{required:!0,tsType:{name:"Date"},description:""},startDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM"',computed:!1}},endDateFormat:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"dd MMM yyyy"',computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(dateRange: DateRange) => void",signature:{arguments:[{type:{name:"DateRange"},name:"dateRange"}],return:{name:"void"}}},description:""}}};const I=()=>({from:new Date,to:new Date}),L=({value:e,onChange:t,required:a,fromDate:l,toDate:c,rangeTemplates:g=Oe,placeholder:y="Select Date Range",timePickerProps:P={},error:F,dateFormat:x,showTemplateInValue:de=!0})=>{const[v,W]=m.useState(!1),[s,N]=m.useState(e),[ue,E]=m.useState(!1),[o,O]=m.useState(I()),fe=Math.floor(Object.keys(g).length/2)-1,[b,pe]=m.useState(),[k,w]=m.useState(),C=r=>{r&&Se(r,k||new Date)&&w(r),pe(r)},[ge,he]=m.useState(320),h=m.useRef(),ye=m.useMemo(()=>Object.entries(g).map(([r,i])=>({label:r,range:i()})),[]),V=r=>!(s!=null&&s.from)||!(s!=null&&s.to)?!1:d(s.from,"yyyy-MM-dd-hh-mm-ss")===d(r.from,"yyyy-MM-dd-hh-mm-ss")&&d(s.to,"yyyy-MM-dd-hh-mm-ss")===d(r.to,"yyyy-MM-dd-hh-mm-ss"),xe=m.useMemo(()=>{const i=Object.entries(g).map(([f,De])=>({label:f,range:De()})).find(f=>V(f.range));return i?i==null?void 0:i.label:"Custom"},[s]),we=r=>x?Array.isArray(x)?x[r==="from"?0:1]:x:"dd MMM yyyy",T=(r,i)=>r?d(r,we(i)):"",Te=r=>{N(r),t==null||t(r),O(I())},je=r=>{N(r),t==null||t(r),E(!1),W(!1)},_=r=>{E(r),r||O(I())};return m.useEffect(()=>{N(e),O(e)},[e]),m.useEffect(()=>{C(o==null?void 0:o.from),w(o==null?void 0:o.to)},[o]),m.useLayoutEffect(()=>{var r;if(h){const i=(r=h.current)==null?void 0:r.getBoundingClientRect();he((i==null?void 0:i.width)||320)}},[h]),n.jsxs(z,{open:v,onOpenChange:W,children:[n.jsx(Q,{asChild:!0,children:de?n.jsx(p,{ref:h,variant:"outline",theme:"neutral",innerClassName:"justify-between w-full",className:j("flex text-left font-normal items-center px-3 gap-5 w-full justify-between bg-bg-default",!s&&"text-muted-foreground",{"border-border-critical":F}),icon:n.jsx(S,{icon:n.jsx(Y,{}),size:"lg",className:j("text-text-weak",{"rotate-180":!v})}),iconPosition:"right",children:s?n.jsxs(n.Fragment,{children:[n.jsx(u,{variant:"regular",children:xe}),n.jsx("div",{className:"flex items-center gap-2 ml-auto",children:n.jsxs(u,{variant:"regular",className:"text-text-weak",children:[T(s==null?void 0:s.from,"from")," - ",T(s==null?void 0:s.to,"to")]})})]}):y}):n.jsx(p,{ref:h,variant:"outline",theme:"neutral",innerClassName:"w-full",className:j("justify-start text-left font-normal items-center px-3 gap-5 w-full bg-bg-default",!s&&"text-muted-foreground",{"border-border-critical":F}),icon:n.jsx(S,{icon:n.jsx(Y,{}),size:"lg",className:j("text-text-weak",{"rotate-180":!v})}),iconPosition:"right",children:s?n.jsxs(n.Fragment,{children:[T(s.from,"from")," -"," ",T(s.to,"to")]}):"Select Date Range"})}),n.jsx(B,{className:"p-1",align:"start",style:{width:`${ge}px`},children:n.jsxs("div",{className:"flex flex-col w-full",children:[ye.map(({label:r,range:i},f)=>n.jsxs(m.Fragment,{children:[n.jsx(ce,{label:r,startDate:i.from,endDate:i.to,onClick:Te,selected:V(i)}),f===fe&&n.jsx(q,{className:"my-1"})]},f)),n.jsx(q,{className:"my-1"}),n.jsxs(z,{open:ue,onOpenChange:_,children:[n.jsx(Q,{asChild:!0,children:n.jsxs(p,{variant:"unstyled",size:"sm",className:"flex-1 p-2 hover:bg-bg-weaker rounded-radius-md",innerClassName:"flex justify-between flex-1",children:[n.jsx(u,{variant:"regular",children:"Custom Range"}),n.jsx(S,{icon:n.jsx(ve,{}),className:"text-text-weak"})]})}),n.jsxs(B,{side:"right",sideOffset:8,className:"p-0",children:[n.jsxs("div",{className:"p-3 flex gap-2",children:[n.jsxs("div",{className:"grid gap-1",children:[n.jsx(u,{variant:"medium",children:"From"}),n.jsx(A,{...P,withoutSaveButton:!0,autoFocus:!0,date:b,onChange:C,required:a,fromDate:l,toDate:c,className:"border-0 shadow-none"})]}),n.jsx("div",{className:"self-end mb-2",children:"-"}),n.jsxs("div",{className:"grid gap-1",children:[n.jsx(u,{variant:"medium",children:"To"}),n.jsx(A,{...P,withoutSaveButton:!0,autoFocus:!0,date:k,onChange:w,required:a,fromDate:b,toDate:c,className:"border-0 shadow-none"})]})]}),n.jsx(q,{className:"my-1"}),n.jsxs("div",{className:"flex justify-end gap-4 p-3",children:[n.jsx(p,{variant:"outline",theme:"neutral",size:"sm",className:"w-[70px]",onClick:()=>{C(o==null?void 0:o.from),w(o==null?void 0:o.to),_(!1)},children:"Cancel"}),n.jsx(p,{size:"sm",className:"w-[70px]",disabled:!(o!=null&&o.from)||!(o!=null&&o.to),onClick:()=>{je(o&&{from:b,to:k})},children:"Apply"})]})]})]})]})})]})};L.__docgenInfo={description:"",methods:[],displayName:"DateRangePicker",props:{value:{required:!1,tsType:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},description:""},showTemplateInValue:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select Date Range"',computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: DateRange | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"DateRange | undefined",elements:[{name:"DateRange"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},rangeTemplates:{required:!1,tsType:{name:"RANGE_TEMPLATES"},description:"",defaultValue:{value:`{
  Today: getTodayRange,
  "This week": getThisWeekRange,
  "This month": getThisMonthRange,
  "This quarter": getThisQuarterRange,
  "This year": getThisYearRange,
  "Last week": getLastWeekRange,
  "Last month": getLastMonthRange,
  "Last quarter": getLastQuarterRange,
  "Last year": getLastYearRange,
}`,computed:!1}},toDate:{required:!1,tsType:{name:"Date"},description:""},timePickerProps:{required:!1,tsType:{name:"Partial",elements:[{name:"ReactComponentPropsWithoutRef",raw:"React.ComponentPropsWithoutRef<typeof DateTimePicker>",elements:[{name:"DateTimePicker"}]}],raw:`Partial<
  React.ComponentPropsWithoutRef<typeof DateTimePicker>
>`},description:"",defaultValue:{value:"{}",computed:!1}},error:{required:!1,tsType:{name:"boolean"},description:""},dateFormat:{required:!1,tsType:{name:"union",raw:"string | [string, string]",elements:[{name:"string"},{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]}]},description:""}}};const Rt={title:"Xenith UI/Components/Date Range Picker",component:L,decorators:e=>n.jsx("div",{className:"py-10 w-[600px] h-[400px]  pb-40",children:n.jsx(e,{})}),tags:["autodocs"]},D={args:{onChange:e=>{var t,a;console.log("value",e),console.log("ISO string",{from:(t=e==null?void 0:e.from)==null?void 0:t.toISOString(),to:(a=e==null?void 0:e.to)==null?void 0:a.toISOString()})}}},M={args:{showTemplateInValue:!0,onChange:e=>{var t,a;console.log("value",e),console.log("ISO string",{from:(t=e==null?void 0:e.from)==null?void 0:t.toISOString(),to:(a=e==null?void 0:e.to)==null?void 0:a.toISOString()})}}},R={render:e=>{const[t,a]=m.useState({from:new Date,to:new Date});return n.jsx(L,{...e,value:t,onChange:l=>a(l)})}};var $,G,H;D.parameters={...D.parameters,docs:{...($=D.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(H=(G=D.parameters)==null?void 0:G.docs)==null?void 0:H.source}}};var U,X,J;M.parameters={...M.parameters,docs:{...(U=M.parameters)==null?void 0:U.docs,source:{originalSource:`{
  args: {
    showTemplateInValue: true,
    onChange: value => {
      console.log("value", value);
      console.log("ISO string", {
        from: value?.from?.toISOString(),
        to: value?.to?.toISOString()
      });
    }
  }
}`,...(J=(X=M.parameters)==null?void 0:X.docs)==null?void 0:J.source}}};var K,Z,ee;R.parameters={...R.parameters,docs:{...(K=R.parameters)==null?void 0:K.docs,source:{originalSource:`{
  render: args => {
    const [value, setValue] = useState<DateRange | undefined>({
      from: new Date(),
      to: new Date()
    });
    return <DateRangePicker {...args} value={value} onChange={v => setValue(v)} />;
  }
}`,...(ee=(Z=R.parameters)==null?void 0:Z.docs)==null?void 0:ee.source}}};const St=["Default","ShowTemplate","WithState"];export{D as Default,M as ShowTemplate,R as WithState,St as __namedExportsOrder,Rt as default};
