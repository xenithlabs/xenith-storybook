const p={},i={};function r(t,e){try{const s=(p[t]||(p[t]=new Intl.DateTimeFormat("en-GB",{timeZone:t,hour:"numeric",timeZoneName:"longOffset"}).format))(e).split("GMT")[1]||"";return s in i?i[s]:a(s,s.split(":"))}catch{if(t in i)return i[t];const n=t==null?void 0:t.match(O);return n?a(t,n.slice(1)):NaN}}const O=/([+-]\d\d):?(\d\d)?/;function a(t,e){const n=+e[0],s=+(e[1]||0);return i[t]=n>0?n*60+s:n*60-s}class o extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(r(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),m(this),u(this)):this.setTime(Date.now())}static tz(e,...n){return n.length?new o(...n,e):new o(Date.now(),e)}withTimeZone(e){return new o(+this,e)}getTimezoneOffset(){return-r(this.timeZone,this)}setTime(e){return Date.prototype.setTime.apply(this,arguments),u(this),+this}[Symbol.for("constructDateFrom")](e){return new o(+new Date(e),this.timeZone)}}const y=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!y.test(t))return;const e=t.replace(y,"$1UTC");o.prototype[e]&&(t.startsWith("get")?o.prototype[t]=function(){return this.internal[e]()}:(o.prototype[t]=function(){return Date.prototype[e].apply(this.internal,arguments),M(this),+this},o.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),u(this),+this}))});function u(t){t.internal.setTime(+t),t.internal.setUTCMinutes(t.internal.getUTCMinutes()-t.getTimezoneOffset())}function M(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),m(t)}function m(t){const e=r(t.timeZone,t),n=new Date(+t);n.setUTCHours(n.getUTCHours()-1);const s=-new Date(+t).getTimezoneOffset(),D=-new Date(+n).getTimezoneOffset(),T=s-D,C=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();T&&C&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+T);const f=s-e;f&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+f);const l=r(t.timeZone,t),g=-new Date(+t).getTimezoneOffset()-l,U=l!==e,h=g-f;if(U&&h){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+h);const w=r(t.timeZone,t),c=l-w;c&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+c),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+c))}}export{o as T,r as t};
