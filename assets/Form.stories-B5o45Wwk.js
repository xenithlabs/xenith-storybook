import{j as w}from"./jsx-runtime-DR9Q75dM.js";import{R as p,r as B}from"./index-DRjF_FHU.js";import{S as Kr}from"./index-HZDBD2ik.js";import{c as De}from"./cn-C-5SdYIA.js";import{L as Gr}from"./Label-DUDV6PD_.js";import{t as _r}from"./styles-BNEhTmYy.js";import{I as Fr,c as Xr,P as zr}from"./useClickOutside-BeKAHFKi.js";import"./index-_lyfCmBZ.js";import"./index-CxRLcT2J.js";import"./index-Bb4qSo10.js";import"./search-CWRmq9WO.js";import"./close-CAN3cq4E.js";import"./stringCase-DaZl3p-i.js";import"./spinner-fxOeMmbK.js";import"./chevron-down-DqISSPB-.js";import"./check-rKbD1QKS.js";import"./index-DuXoWBk8.js";import"./floating-ui.dom-BuxmzwbT.js";import"./Button-iG-w-ZO3.js";import"./Icon-Bs9G1Rwk.js";import"./index-CAHntWCK.js";import"./Heading-BbwmavmP.js";import"./Checkbox-CY4DEde6.js";import"./index-Bu1UD4WD.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";var fe=e=>e.type==="checkbox",ae=e=>e instanceof Date,U=e=>e==null;const br=e=>typeof e=="object";var R=e=>!U(e)&&!Array.isArray(e)&&br(e)&&!ae(e),xr=e=>R(e)&&e.target?fe(e.target)?e.target.checked:e.target.value:e,Jr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Vr=(e,s)=>e.has(Jr(s)),Qr=e=>{const s=e.constructor&&e.constructor.prototype;return R(s)&&s.hasOwnProperty("isPrototypeOf")},qe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function N(e){let s;const r=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(qe&&(e instanceof Blob||e instanceof FileList))&&(r||R(e)))if(s=r?[]:{},!r&&!Qr(e))s=e;else for(const i in e)e.hasOwnProperty(i)&&(s[i]=N(e[i]));else return e;return s}var ye=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,c=(e,s,r)=>{if(!s||!R(e))return r;const i=ye(s.split(/[,[\].]+?/)).reduce((a,o)=>U(a)?a:a[o],e);return D(i)||i===e?D(e[s])?r:e[s]:i},K=e=>typeof e=="boolean",We=e=>/^\w*$/.test(e),pr=e=>ye(e.replace(/["|']|\]/g,"").split(/\.|\[/)),V=(e,s,r)=>{let i=-1;const a=We(s)?[s]:pr(s),o=a.length,y=o-1;for(;++i<o;){const g=a[i];let A=r;if(i!==y){const S=e[g];A=R(S)||Array.isArray(S)?S:isNaN(+a[i+1])?{}:[]}if(g==="__proto__")return;e[g]=A,e=e[g]}return e};const xe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},J={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ar=p.createContext(null),Ee=()=>p.useContext(Ar),Yr=e=>{const{children:s,...r}=e;return p.createElement(Ar.Provider,{value:r},s)};var wr=(e,s,r,i=!0)=>{const a={defaultValues:s._defaultValues};for(const o in e)Object.defineProperty(a,o,{get:()=>{const y=o;return s._proxyFormState[y]!==$.all&&(s._proxyFormState[y]=!i||$.all),r&&(r[y]=!0),e[y]}});return a},j=e=>R(e)&&!Object.keys(e).length,Dr=(e,s,r,i)=>{r(e);const{name:a,...o}=e;return j(o)||Object.keys(o).length>=Object.keys(s).length||Object.keys(o).find(y=>s[y]===(!i||$.all))},Fe=e=>Array.isArray(e)?e:[e],Er=(e,s,r)=>!e||!s||e===s||Fe(e).some(i=>i&&(r?i===s:i.startsWith(s)||s.startsWith(i)));function $e(e){const s=p.useRef(e);s.current=e,p.useEffect(()=>{const r=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function Zr(e){const s=Ee(),{control:r=s.control,disabled:i,name:a,exact:o}=e||{},[y,g]=p.useState(r._formState),A=p.useRef(!0),S=p.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),v=p.useRef(a);return v.current=a,$e({disabled:i,next:h=>A.current&&Er(v.current,h.name,o)&&Dr(h,S.current,r._updateFormState)&&g({...r._formState,...h}),subject:r._subjects.state}),p.useEffect(()=>(A.current=!0,S.current.isValid&&r._updateValid(!0),()=>{A.current=!1}),[r]),wr(y,r,S.current,!1)}var G=e=>typeof e=="string",Sr=(e,s,r,i,a)=>G(e)?(i&&s.watch.add(e),c(r,e,a)):Array.isArray(e)?e.map(o=>(i&&s.watch.add(o),c(r,o))):(i&&(s.watchAll=!0),r);function et(e){const s=Ee(),{control:r=s.control,name:i,defaultValue:a,disabled:o,exact:y}=e||{},g=p.useRef(i);g.current=i,$e({disabled:o,subject:r._subjects.values,next:v=>{Er(g.current,v.name,y)&&S(N(Sr(g.current,r._names,v.values||r._formValues,!1,a)))}});const[A,S]=p.useState(r._getWatch(i,a));return p.useEffect(()=>r._removeUnmounted()),A}function rt(e){const s=Ee(),{name:r,disabled:i,control:a=s.control,shouldUnregister:o}=e,y=Vr(a._names.array,r),g=et({control:a,name:r,defaultValue:c(a._formValues,r,c(a._defaultValues,r,e.defaultValue)),exact:!0}),A=Zr({control:a,name:r}),S=p.useRef(a.register(r,{...e.rules,value:g,...K(e.disabled)?{disabled:e.disabled}:{}}));return p.useEffect(()=>{const v=a._options.shouldUnregister||o,h=(q,H)=>{const L=c(a._fields,q);L&&L._f&&(L._f.mount=H)};if(h(r,!0),v){const q=N(c(a._options.defaultValues,r));V(a._defaultValues,r,q),D(c(a._formValues,r))&&V(a._formValues,r,q)}return()=>{(y?v&&!a._state.action:v)?a.unregister(r):h(r,!1)}},[r,a,y,o]),p.useEffect(()=>{c(a._fields,r)&&a._updateDisabledField({disabled:i,fields:a._fields,name:r,value:c(a._fields,r)._f.value})},[i,r,a]),{field:{name:r,value:g,...K(i)||A.disabled?{disabled:A.disabled||i}:{},onChange:p.useCallback(v=>S.current.onChange({target:{value:xr(v),name:r},type:xe.CHANGE}),[r]),onBlur:p.useCallback(()=>S.current.onBlur({target:{value:c(a._formValues,r),name:r},type:xe.BLUR}),[r,a]),ref:v=>{const h=c(a._fields,r);h&&v&&(h._f.ref={focus:()=>v.focus(),select:()=>v.select(),setCustomValidity:q=>v.setCustomValidity(q),reportValidity:()=>v.reportValidity()})}},formState:A,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(A.errors,r)},isDirty:{enumerable:!0,get:()=>!!c(A.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!c(A.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!c(A.validatingFields,r)},error:{enumerable:!0,get:()=>c(A.errors,r)}})}}const tt=e=>e.render(rt(e));var st=(e,s,r,i,a)=>s?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:a||!0}}:{},ir=e=>({isOnSubmit:!e||e===$.onSubmit,isOnBlur:e===$.onBlur,isOnChange:e===$.onChange,isOnAll:e===$.all,isOnTouch:e===$.onTouched}),nr=(e,s,r)=>!r&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const de=(e,s,r,i)=>{for(const a of r||Object.keys(e)){const o=c(e,a);if(o){const{_f:y,...g}=o;if(y){if(y.refs&&y.refs[0]&&s(y.refs[0],a)&&!i)break;if(y.ref&&s(y.ref,y.name)&&!i)break;de(g,s)}else R(g)&&de(g,s)}}};var it=(e,s,r)=>{const i=ye(c(e,r));return V(i,"root",s[r]),V(e,r,i),e},He=e=>e.type==="file",Z=e=>typeof e=="function",Ve=e=>{if(!qe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},be=e=>G(e),Ke=e=>e.type==="radio",pe=e=>e instanceof RegExp;const ar={value:!1,isValid:!1},or={value:!0,isValid:!0};var kr=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?or:{value:e[0].value,isValid:!0}:or:ar}return ar};const lr={isValid:!1,value:null};var Cr=e=>Array.isArray(e)?e.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,lr):lr;function ur(e,s,r="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||K(e)&&!e)return{type:r,message:be(e)?e:"",ref:s}}var ne=e=>R(e)&&!pe(e)?e:{value:e,message:""},cr=async(e,s,r,i,a)=>{const{ref:o,refs:y,required:g,maxLength:A,minLength:S,min:v,max:h,pattern:q,validate:H,name:L,valueAsNumber:Le,mount:Q,disabled:Y}=e._f,F=c(s,L);if(!Q||Y)return{};const X=y?y[0]:o,z=_=>{i&&X.reportValidity&&(X.setCustomValidity(K(_)?"":_||""),X.reportValidity())},k={},te=Ke(o),me=fe(o),ee=te||me,se=(Le||He(o))&&D(o.value)&&D(F)||Ve(o)&&o.value===""||F===""||Array.isArray(F)&&!F.length,M=st.bind(null,L,r,k),ge=(_,b,C,T=J.maxLength,W=J.minLength)=>{const P=_?b:C;k[L]={type:_?T:W,message:P,ref:o,...M(_?T:W,P)}};if(a?!Array.isArray(F)||!F.length:g&&(!ee&&(se||U(F))||K(F)&&!F||me&&!kr(y).isValid||te&&!Cr(y).isValid)){const{value:_,message:b}=be(g)?{value:!!g,message:g}:ne(g);if(_&&(k[L]={type:J.required,message:b,ref:X,...M(J.required,b)},!r))return z(b),k}if(!se&&(!U(v)||!U(h))){let _,b;const C=ne(h),T=ne(v);if(!U(F)&&!isNaN(F)){const W=o.valueAsNumber||F&&+F;U(C.value)||(_=W>C.value),U(T.value)||(b=W<T.value)}else{const W=o.valueAsDate||new Date(F),P=ue=>new Date(new Date().toDateString()+" "+ue),oe=o.type=="time",le=o.type=="week";G(C.value)&&F&&(_=oe?P(F)>P(C.value):le?F>C.value:W>new Date(C.value)),G(T.value)&&F&&(b=oe?P(F)<P(T.value):le?F<T.value:W<new Date(T.value))}if((_||b)&&(ge(!!_,C.message,T.message,J.max,J.min),!r))return z(k[L].message),k}if((A||S)&&!se&&(G(F)||a&&Array.isArray(F))){const _=ne(A),b=ne(S),C=!U(_.value)&&F.length>+_.value,T=!U(b.value)&&F.length<+b.value;if((C||T)&&(ge(C,_.message,b.message),!r))return z(k[L].message),k}if(q&&!se&&G(F)){const{value:_,message:b}=ne(q);if(pe(_)&&!F.match(_)&&(k[L]={type:J.pattern,message:b,ref:o,...M(J.pattern,b)},!r))return z(b),k}if(H){if(Z(H)){const _=await H(F,s),b=ur(_,X);if(b&&(k[L]={...b,...M(J.validate,b.message)},!r))return z(b.message),k}else if(R(H)){let _={};for(const b in H){if(!j(_)&&!r)break;const C=ur(await H[b](F,s),X,b);C&&(_={...C,...M(b,C.message)},z(C.message),r&&(k[L]=_))}if(!j(_)&&(k[L]={ref:X,..._},!r))return k}}return z(!0),k};function nt(e,s){const r=s.slice(0,-1).length;let i=0;for(;i<r;)e=D(e)?i++:e[s[i++]];return e}function at(e){for(const s in e)if(e.hasOwnProperty(s)&&!D(e[s]))return!1;return!0}function I(e,s){const r=Array.isArray(s)?s:We(s)?[s]:pr(s),i=r.length===1?e:nt(e,r),a=r.length-1,o=r[a];return i&&delete i[o],a!==0&&(R(i)&&j(i)||Array.isArray(i)&&at(i))&&I(e,r.slice(0,-1)),e}var je=()=>{let e=[];return{get observers(){return e},next:a=>{for(const o of e)o.next&&o.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(o=>o!==a)}}),unsubscribe:()=>{e=[]}}},Ae=e=>U(e)||!br(e);function re(e,s){if(Ae(e)||Ae(s))return e===s;if(ae(e)&&ae(s))return e.getTime()===s.getTime();const r=Object.keys(e),i=Object.keys(s);if(r.length!==i.length)return!1;for(const a of r){const o=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const y=s[a];if(ae(o)&&ae(y)||R(o)&&R(y)||Array.isArray(o)&&Array.isArray(y)?!re(o,y):o!==y)return!1}}return!0}var Ir=e=>e.type==="select-multiple",ot=e=>Ke(e)||fe(e),Me=e=>Ve(e)&&e.isConnected,Rr=e=>{for(const s in e)if(Z(e[s]))return!0;return!1};function we(e,s={}){const r=Array.isArray(e);if(R(e)||r)for(const i in e)Array.isArray(e[i])||R(e[i])&&!Rr(e[i])?(s[i]=Array.isArray(e[i])?[]:{},we(e[i],s[i])):U(e[i])||(s[i]=!0);return s}function Lr(e,s,r){const i=Array.isArray(e);if(R(e)||i)for(const a in e)Array.isArray(e[a])||R(e[a])&&!Rr(e[a])?D(s)||Ae(r[a])?r[a]=Array.isArray(e[a])?we(e[a],[]):{...we(e[a])}:Lr(e[a],U(s)?{}:s[a],r[a]):r[a]=!re(e[a],s[a]);return r}var he=(e,s)=>Lr(e,s,we(s)),Tr=(e,{valueAsNumber:s,valueAsDate:r,setValueAs:i})=>D(e)?e:s?e===""?NaN:e&&+e:r&&G(e)?new Date(e):i?i(e):e;function Pe(e){const s=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):s.disabled))return He(s)?s.files:Ke(s)?Cr(e.refs).value:Ir(s)?[...s.selectedOptions].map(({value:r})=>r):fe(s)?kr(e.refs).value:Tr(D(s.value)?e.ref.value:s.value,e)}var lt=(e,s,r,i)=>{const a={};for(const o of e){const y=c(s,o);y&&V(a,o,y._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:i}},ce=e=>D(e)?e:pe(e)?e.source:R(e)?pe(e.value)?e.value.source:e.value:e,ut=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function dr(e,s,r){const i=c(e,r);if(i||We(r))return{error:i,name:r};const a=r.split(".");for(;a.length;){const o=a.join("."),y=c(s,o),g=c(e,o);if(y&&!Array.isArray(y)&&r!==o)return{name:r};if(g&&g.type)return{name:o,error:g};a.pop()}return{name:r}}var ct=(e,s,r,i,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(s||e):(r?i.isOnBlur:a.isOnBlur)?!e:(r?i.isOnChange:a.isOnChange)?e:!0,dt=(e,s)=>!ye(c(e,s)).length&&I(e,s);const ft={mode:$.onSubmit,reValidateMode:$.onChange,shouldFocusError:!0};function yt(e={}){let s={...ft,...e},r={submitCount:0,isDirty:!1,isLoading:Z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},a=R(s.defaultValues)||R(s.values)?N(s.defaultValues||s.values)||{}:{},o=s.shouldUnregister?{}:N(a),y={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},A,S=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:je(),array:je(),state:je()},q=ir(s.mode),H=ir(s.reValidateMode),L=s.criteriaMode===$.all,Le=t=>n=>{clearTimeout(S),S=setTimeout(t,n)},Q=async t=>{if(v.isValid||t){const n=s.resolver?j((await ee()).errors):await M(i,!0);n!==r.isValid&&h.state.next({isValid:n})}},Y=(t,n)=>{(v.isValidating||v.validatingFields)&&((t||Array.from(g.mount)).forEach(l=>{l&&(n?V(r.validatingFields,l,n):I(r.validatingFields,l))}),h.state.next({validatingFields:r.validatingFields,isValidating:!j(r.validatingFields)}))},F=(t,n=[],l,f,d=!0,u=!0)=>{if(f&&l){if(y.action=!0,u&&Array.isArray(c(i,t))){const m=l(c(i,t),f.argA,f.argB);d&&V(i,t,m)}if(u&&Array.isArray(c(r.errors,t))){const m=l(c(r.errors,t),f.argA,f.argB);d&&V(r.errors,t,m),dt(r.errors,t)}if(v.touchedFields&&u&&Array.isArray(c(r.touchedFields,t))){const m=l(c(r.touchedFields,t),f.argA,f.argB);d&&V(r.touchedFields,t,m)}v.dirtyFields&&(r.dirtyFields=he(a,o)),h.state.next({name:t,isDirty:_(t,n),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else V(o,t,n)},X=(t,n)=>{V(r.errors,t,n),h.state.next({errors:r.errors})},z=t=>{r.errors=t,h.state.next({errors:r.errors,isValid:!1})},k=(t,n,l,f)=>{const d=c(i,t);if(d){const u=c(o,t,D(l)?c(a,t):l);D(u)||f&&f.defaultChecked||n?V(o,t,n?u:Pe(d._f)):T(t,u),y.mount&&Q()}},te=(t,n,l,f,d)=>{let u=!1,m=!1;const x={name:t},E=!!(c(i,t)&&c(i,t)._f&&c(i,t)._f.disabled);if(!l||f){v.isDirty&&(m=r.isDirty,r.isDirty=x.isDirty=_(),u=m!==x.isDirty);const O=E||re(c(a,t),n);m=!!(!E&&c(r.dirtyFields,t)),O||E?I(r.dirtyFields,t):V(r.dirtyFields,t,!0),x.dirtyFields=r.dirtyFields,u=u||v.dirtyFields&&m!==!O}if(l){const O=c(r.touchedFields,t);O||(V(r.touchedFields,t,l),x.touchedFields=r.touchedFields,u=u||v.touchedFields&&O!==l)}return u&&d&&h.state.next(x),u?x:{}},me=(t,n,l,f)=>{const d=c(r.errors,t),u=v.isValid&&K(n)&&r.isValid!==n;if(e.delayError&&l?(A=Le(()=>X(t,l)),A(e.delayError)):(clearTimeout(S),A=null,l?V(r.errors,t,l):I(r.errors,t)),(l?!re(d,l):d)||!j(f)||u){const m={...f,...u&&K(n)?{isValid:n}:{},errors:r.errors,name:t};r={...r,...m},h.state.next(m)}},ee=async t=>{Y(t,!0);const n=await s.resolver(o,s.context,lt(t||g.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return Y(t),n},se=async t=>{const{errors:n}=await ee(t);if(t)for(const l of t){const f=c(n,l);f?V(r.errors,l,f):I(r.errors,l)}else r.errors=n;return n},M=async(t,n,l={valid:!0})=>{for(const f in t){const d=t[f];if(d){const{_f:u,...m}=d;if(u){const x=g.array.has(u.name);Y([f],!0);const E=await cr(d,o,L,s.shouldUseNativeValidation&&!n,x);if(Y([f]),E[u.name]&&(l.valid=!1,n))break;!n&&(c(E,u.name)?x?it(r.errors,E,u.name):V(r.errors,u.name,E[u.name]):I(r.errors,u.name))}m&&await M(m,n,l)}}return l.valid},ge=()=>{for(const t of g.unMount){const n=c(i,t);n&&(n._f.refs?n._f.refs.every(l=>!Me(l)):!Me(n._f.ref))&&Te(t)}g.unMount=new Set},_=(t,n)=>(t&&n&&V(o,t,n),!re(Xe(),a)),b=(t,n,l)=>Sr(t,g,{...y.mount?o:D(n)?a:G(t)?{[t]:n}:n},l,n),C=t=>ye(c(y.mount?o:a,t,e.shouldUnregister?c(a,t,[]):[])),T=(t,n,l={})=>{const f=c(i,t);let d=n;if(f){const u=f._f;u&&(!u.disabled&&V(o,t,Tr(n,u)),d=Ve(u.ref)&&U(n)?"":n,Ir(u.ref)?[...u.ref.options].forEach(m=>m.selected=d.includes(m.value)):u.refs?fe(u.ref)?u.refs.length>1?u.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(d)?!!d.find(x=>x===m.value):d===m.value)):u.refs[0]&&(u.refs[0].checked=!!d):u.refs.forEach(m=>m.checked=m.value===d):He(u.ref)?u.ref.value="":(u.ref.value=d,u.ref.type||h.values.next({name:t,values:{...o}})))}(l.shouldDirty||l.shouldTouch)&&te(t,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&ue(t)},W=(t,n,l)=>{for(const f in n){const d=n[f],u=`${t}.${f}`,m=c(i,u);(g.array.has(t)||!Ae(d)||m&&!m._f)&&!ae(d)?W(u,d,l):T(u,d,l)}},P=(t,n,l={})=>{const f=c(i,t),d=g.array.has(t),u=N(n);V(o,t,u),d?(h.array.next({name:t,values:{...o}}),(v.isDirty||v.dirtyFields)&&l.shouldDirty&&h.state.next({name:t,dirtyFields:he(a,o),isDirty:_(t,u)})):f&&!f._f&&!U(u)?W(t,u,l):T(t,u,l),nr(t,g)&&h.state.next({...r}),h.values.next({name:y.mount?t:void 0,values:{...o}})},oe=async t=>{y.mount=!0;const n=t.target;let l=n.name,f=!0;const d=c(i,l),u=()=>n.type?Pe(d._f):xr(t),m=x=>{f=Number.isNaN(x)||x===c(o,l,x)};if(d){let x,E;const O=u(),ie=t.type===xe.BLUR||t.type===xe.FOCUS_OUT,Wr=!ut(d._f)&&!s.resolver&&!c(r.errors,l)&&!d._f.deps||ct(ie,c(r.touchedFields,l),r.isSubmitted,H,q),Ne=nr(l,g,ie);V(o,l,O),ie?(d._f.onBlur&&d._f.onBlur(t),A&&A(0)):d._f.onChange&&d._f.onChange(t);const Oe=te(l,O,ie,!1),$r=!j(Oe)||Ne;if(!ie&&h.values.next({name:l,type:t.type,values:{...o}}),Wr)return v.isValid&&Q(),$r&&h.state.next({name:l,...Ne?{}:Oe});if(!ie&&Ne&&h.state.next({...r}),s.resolver){const{errors:tr}=await ee([l]);if(m(O),f){const Hr=dr(r.errors,i,l),sr=dr(tr,i,Hr.name||l);x=sr.error,l=sr.name,E=j(tr)}}else Y([l],!0),x=(await cr(d,o,L,s.shouldUseNativeValidation))[l],Y([l]),m(O),f&&(x?E=!1:v.isValid&&(E=await M(i,!0)));f&&(d._f.deps&&ue(d._f.deps),me(l,E,x,Oe))}},le=(t,n)=>{if(c(r.errors,n)&&t.focus)return t.focus(),1},ue=async(t,n={})=>{let l,f;const d=Fe(t);if(s.resolver){const u=await se(D(t)?t:d);l=j(u),f=t?!d.some(m=>c(u,m)):l}else t?(f=(await Promise.all(d.map(async u=>{const m=c(i,u);return await M(m&&m._f?{[u]:m}:m)}))).every(Boolean),!(!f&&!r.isValid)&&Q()):f=l=await M(i);return h.state.next({...!G(t)||v.isValid&&l!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:l}:{},errors:r.errors}),n.shouldFocus&&!f&&de(i,le,t?d:g.mount),f},Xe=t=>{const n={...y.mount?o:a};return D(t)?n:G(t)?c(n,t):t.map(l=>c(n,l))},ze=(t,n)=>({invalid:!!c((n||r).errors,t),isDirty:!!c((n||r).dirtyFields,t),error:c((n||r).errors,t),isValidating:!!c(r.validatingFields,t),isTouched:!!c((n||r).touchedFields,t)}),Mr=t=>{t&&Fe(t).forEach(n=>I(r.errors,n)),h.state.next({errors:t?r.errors:{}})},Je=(t,n,l)=>{const f=(c(i,t,{_f:{}})._f||{}).ref,d=c(r.errors,t)||{},{ref:u,message:m,type:x,...E}=d;V(r.errors,t,{...E,...n,ref:f}),h.state.next({name:t,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&f&&f.focus&&f.focus()},Pr=(t,n)=>Z(t)?h.values.subscribe({next:l=>t(b(void 0,n),l)}):b(t,n,!0),Te=(t,n={})=>{for(const l of t?Fe(t):g.mount)g.mount.delete(l),g.array.delete(l),n.keepValue||(I(i,l),I(o,l)),!n.keepError&&I(r.errors,l),!n.keepDirty&&I(r.dirtyFields,l),!n.keepTouched&&I(r.touchedFields,l),!n.keepIsValidating&&I(r.validatingFields,l),!s.shouldUnregister&&!n.keepDefaultValue&&I(a,l);h.values.next({values:{...o}}),h.state.next({...r,...n.keepDirty?{isDirty:_()}:{}}),!n.keepIsValid&&Q()},Qe=({disabled:t,name:n,field:l,fields:f,value:d})=>{if(K(t)&&y.mount||t){const u=t?void 0:D(d)?Pe(l?l._f:c(f,n)._f):d;V(o,n,u),te(n,u,!1,!1,!0)}},Ue=(t,n={})=>{let l=c(i,t);const f=K(n.disabled);return V(i,t,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:t}},name:t,mount:!0,...n}}),g.mount.add(t),l?Qe({field:l,disabled:n.disabled,name:t,value:n.value}):k(t,!0,n.value),{...f?{disabled:n.disabled}:{},...s.progressive?{required:!!n.required,min:ce(n.min),max:ce(n.max),minLength:ce(n.minLength),maxLength:ce(n.maxLength),pattern:ce(n.pattern)}:{},name:t,onChange:oe,onBlur:oe,ref:d=>{if(d){Ue(t,n),l=c(i,t);const u=D(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,m=ot(u),x=l._f.refs||[];if(m?x.find(E=>E===u):u===l._f.ref)return;V(i,t,{_f:{...l._f,...m?{refs:[...x.filter(Me),u,...Array.isArray(c(a,t))?[{}]:[]],ref:{type:u.type,name:t}}:{ref:u}}}),k(t,!1,void 0,u)}else l=c(i,t,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||n.shouldUnregister)&&!(Vr(g.array,t)&&y.action)&&g.unMount.add(t)}}},Ye=()=>s.shouldFocusError&&de(i,le,g.mount),Br=t=>{K(t)&&(h.state.next({disabled:t}),de(i,(n,l)=>{const f=c(i,l);f&&(n.disabled=f._f.disabled||t,Array.isArray(f._f.refs)&&f._f.refs.forEach(d=>{d.disabled=f._f.disabled||t}))},0,!1))},Ze=(t,n)=>async l=>{let f;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let d=N(o);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:u,values:m}=await ee();r.errors=u,d=m}else await M(i);if(I(r.errors,"root"),j(r.errors)){h.state.next({errors:{}});try{await t(d,l)}catch(u){f=u}}else n&&await n({...r.errors},l),Ye(),setTimeout(Ye);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:j(r.errors)&&!f,submitCount:r.submitCount+1,errors:r.errors}),f)throw f},qr=(t,n={})=>{c(i,t)&&(D(n.defaultValue)?P(t,N(c(a,t))):(P(t,n.defaultValue),V(a,t,N(n.defaultValue))),n.keepTouched||I(r.touchedFields,t),n.keepDirty||(I(r.dirtyFields,t),r.isDirty=n.defaultValue?_(t,N(c(a,t))):_()),n.keepError||(I(r.errors,t),v.isValid&&Q()),h.state.next({...r}))},er=(t,n={})=>{const l=t?N(t):a,f=N(l),d=j(t),u=d?a:f;if(n.keepDefaultValues||(a=l),!n.keepValues){if(n.keepDirtyValues)for(const m of g.mount)c(r.dirtyFields,m)?V(u,m,c(o,m)):P(m,c(u,m));else{if(qe&&D(t))for(const m of g.mount){const x=c(i,m);if(x&&x._f){const E=Array.isArray(x._f.refs)?x._f.refs[0]:x._f.ref;if(Ve(E)){const O=E.closest("form");if(O){O.reset();break}}}}i={}}o=e.shouldUnregister?n.keepDefaultValues?N(a):{}:N(u),h.array.next({values:{...u}}),h.values.next({values:{...u}})}g={mount:n.keepDirtyValues?g.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},y.mount=!v.isValid||!!n.keepIsValid||!!n.keepDirtyValues,y.watch=!!e.shouldUnregister,h.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:d?!1:n.keepDirty?r.isDirty:!!(n.keepDefaultValues&&!re(t,a)),isSubmitted:n.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:d?[]:n.keepDirtyValues?n.keepDefaultValues&&o?he(a,o):r.dirtyFields:n.keepDefaultValues&&t?he(a,t):n.keepDirty?r.dirtyFields:{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitSuccessful:n.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},rr=(t,n)=>er(Z(t)?t(o):t,n);return{control:{register:Ue,unregister:Te,getFieldState:ze,handleSubmit:Ze,setError:Je,_executeSchema:ee,_getWatch:b,_getDirty:_,_updateValid:Q,_removeUnmounted:ge,_updateFieldArray:F,_updateDisabledField:Qe,_getFieldArray:C,_reset:er,_resetDefaultValues:()=>Z(s.defaultValues)&&s.defaultValues().then(t=>{rr(t,s.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:t=>{r={...r,...t}},_disableForm:Br,_subjects:h,_proxyFormState:v,_setErrors:z,get _fields(){return i},get _formValues(){return o},get _state(){return y},set _state(t){y=t},get _defaultValues(){return a},get _names(){return g},set _names(t){g=t},get _formState(){return r},set _formState(t){r=t},get _options(){return s},set _options(t){s={...s,...t}}},trigger:ue,register:Ue,handleSubmit:Ze,watch:Pr,setValue:P,getValues:Xe,reset:rr,resetField:qr,clearErrors:Mr,unregister:Te,setError:Je,setFocus:(t,n={})=>{const l=c(i,t),f=l&&l._f;if(f){const d=f.refs?f.refs[0]:f.ref;d.focus&&(d.focus(),n.shouldSelect&&d.select())}},getFieldState:ze}}function Ur(e={}){const s=p.useRef(),r=p.useRef(),[i,a]=p.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...yt(e),formState:i});const o=s.current.control;return o._options=e,$e({subject:o._subjects.state,next:y=>{Dr(y,o._proxyFormState,o._updateFormState,!0)&&a({...o._formState})}}),p.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),p.useEffect(()=>{if(o._proxyFormState.isDirty){const y=o._getDirty();y!==i.isDirty&&o._subjects.state.next({isDirty:y})}},[o,i.isDirty]),p.useEffect(()=>{e.values&&!re(e.values,r.current)?(o._reset(e.values,o._options.resetOptions),r.current=e.values,a(y=>({...y}))):o._resetDefaultValues()},[e.values,o]),p.useEffect(()=>{e.errors&&o._setErrors(e.errors)},[e.errors,o]),p.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),p.useEffect(()=>{e.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[e.shouldUnregister,o]),s.current.formState=wr(i,o),s.current}const Be=Yr,Nr=B.createContext({}),Ge=({...e})=>w.jsx(Nr.Provider,{value:{name:e.name},children:w.jsx(tt,{...e})}),Se=()=>{const e=B.useContext(Nr),s=B.useContext(Or),{getFieldState:r,formState:i}=Ee(),a=r(e.name,i);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=s;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...a}},Or=B.createContext({}),ke=B.forwardRef(({className:e,...s},r)=>{const i=B.useId();return w.jsx(Or.Provider,{value:{id:i},children:w.jsx("div",{ref:r,className:De("space-y-1",e),...s})})});ke.displayName="FormItem";const Ce=B.forwardRef(({className:e,...s},r)=>{const{formItemId:i}=Se();return w.jsx(Gr,{ref:r,className:De(e),htmlFor:i,...s})});Ce.displayName="FormLabel";const Ie=B.forwardRef(({...e},s)=>{const{error:r,formItemId:i,formDescriptionId:a,formMessageId:o}=Se();return w.jsx(Kr,{ref:s,id:i,"aria-describedby":r?`${a} ${o}`:`${a}`,error:r,"aria-invalid":!!r,...e})});Ie.displayName="FormControl";const jr=B.forwardRef(({className:e,...s},r)=>{const{formDescriptionId:i}=Se();return w.jsx("p",{ref:r,id:i,className:De(_r({variant:"tiny"})," text-text-weak",e),...s})});jr.displayName="FormDescription";const Re=B.forwardRef(({className:e,children:s,...r},i)=>{const{error:a,formMessageId:o}=Se(),y=a?String(a==null?void 0:a.message):s;return y?w.jsx("div",{ref:i,id:o,className:De(_r({variant:"tiny"}),{"text-critical":a,"text-text-weak":!a},e),...r,children:y}):null});Re.displayName="FormMessage";ke.__docgenInfo={description:"",methods:[],displayName:"FormItem"};Ce.__docgenInfo={description:"",methods:[],displayName:"FormLabel"};Ie.__docgenInfo={description:"",methods:[],displayName:"FormControl"};jr.__docgenInfo={description:"",methods:[],displayName:"FormDescription"};Re.__docgenInfo={description:"",methods:[],displayName:"FormMessage"};Ge.__docgenInfo={description:"",methods:[],displayName:"FormField"};const Wt={title:"Xenith UI/Components/Form",component:Be,parameters:{docs:{description:{component:"Form component for handling user inputs."}}},args:{},render:e=>{const s=Ur();return B.useEffect(()=>{s.setError("username",{message:"This is an error message"})},[s]),w.jsx(Be,{...e,...s,children:w.jsx(Ge,{control:s.control,name:"username",render:({field:r})=>w.jsxs(ke,{children:[w.jsx(Ce,{htmlFor:"username",required:!0,children:"Username"}),w.jsx(Ie,{children:w.jsx(Fr,{placeholder:"shadcn",...r})}),w.jsx(Re,{})]})})})}},ve={args:{}},_e={render:e=>{const s=Ur();return B.useEffect(()=>{s.setError("username",{message:"This is an error message"})},[s]),w.jsx("div",{className:"grid w-[180px]",children:w.jsx(Be,{...e,...s,children:w.jsx(Ge,{control:s.control,name:"username",render:({field:r})=>w.jsxs(ke,{children:[w.jsx(Ce,{required:!0,children:"Username"}),w.jsx(Ie,{children:w.jsx(Fr,{...r,placeholder:"Enter A number",leftComponent:w.jsx(Xr,{as:zr,onChange:i=>console.log(i)})})}),w.jsx(Re,{})]})})})})}};var fr,yr,mr;ve.parameters={...ve.parameters,docs:{...(fr=ve.parameters)==null?void 0:fr.docs,source:{originalSource:`{
  args: {}
}`,...(mr=(yr=ve.parameters)==null?void 0:yr.docs)==null?void 0:mr.source}}};var gr,hr,vr;_e.parameters={..._e.parameters,docs:{...(gr=_e.parameters)==null?void 0:gr.docs,source:{originalSource:`{
  render: args => {
    const form = useForm();
    useEffect(() => {
      form.setError("username", {
        message: "This is an error message"
      });
    }, [form]);
    return <div className="grid w-[180px]">
        <Form {...args} {...form}>
          <FormField control={form.control} name="username" render={({
          field
        }) => <FormItem>
                <FormLabel required>Username</FormLabel>
                <FormControl>
                  <Input {...field} placeholder="Enter A number" leftComponent={<InputSelectAddon as={PhoneSelect} onChange={v => console.log(v as string)} />} />
                </FormControl>
                <FormMessage />
              </FormItem>} />
        </Form>
      </div>;
  }
}`,...(vr=(hr=_e.parameters)==null?void 0:hr.docs)==null?void 0:vr.source}}};const $t=["DefaultForm","PhoneInput"];export{ve as DefaultForm,_e as PhoneInput,$t as __namedExportsOrder,Wt as default};
