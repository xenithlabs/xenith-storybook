import{j as s}from"./jsx-runtime-DR9Q75dM.js";import{r as t}from"./index-DRjF_FHU.js";import{D as I,a as V,b as U,$ as A}from"./DropdownMenu-XER5NlNu.js";import{c as N}from"./cn-8RyR4BqC.js";import{F as _}from"./chevron-right-D4FvqfWr.js";import{F as q}from"./check-C0C6JGvp.js";import{F as G}from"./clock-DRhx3Wks.js";import{u as H,g as j,S as J}from"./useClickOutside-VApjb8yH.js";import{f as Q}from"./Table-Be_XEotW.js";import{T as w}from"./Text-C8HBwI4b.js";import{I as v}from"./Icon-CTnhpE1d.js";import{T as W,a as X,b as Y,c as Z}from"./Tooltip-D2ba4dcD.js";import{B as K}from"./Button-C-jt4Opy.js";import{D as P}from"./Divider-CIm89-oy.js";const ee=(u,n,o)=>{if(!n)return!0;const i=n.toLowerCase();return o.some(c=>{const r=u[c];return typeof r=="string"?r.toLowerCase().includes(i):!1})},k=t.forwardRef(({open:u=!1,onOpenChange:n,value:o,onChange:i,contentProps:c,className:r,placeholder:f,...B})=>{const[b,z]=t.useState(u),[D,C]=t.useState(o),[g,S]=t.useState(),[p,F]=t.useState(""),$=t.useRef(null),{basicOptions:a,allTimezoneOptions:m}=H(),O=e=>{z(e),n==null||n(e)},R=e=>{C(j(e)),S(e),i&&i(j(e))},L=e=>{const l=a.includes(e)?e.name:e.zone,d=e.zone!=="UTC"?`(${e.utc})`:"";return`${l} ${d}`},M=t.useCallback(e=>{if(!e)return s.jsx(w,{children:f||"Select timezone"});const l=a.includes(e)?e.name:e.zone,d=e.zone!=="UTC"?`(${e.utc})`:"";return s.jsxs("div",{className:"flex overflow-hidden gap-2 items-center",children:[s.jsx(v,{icon:s.jsx(G,{})}),s.jsx(w,{className:"overflow-hidden",children:s.jsx(Q,{text:`${l}Â ${d}`,suffixLength:d.length+1})})]})},[a,f]),y=t.useCallback((e,l)=>{const d=a.includes(e)?e.name:e.zone,h=e.zone!=="UTC"?e.utc:"";return s.jsxs("div",{className:N("flex relative gap-2 justify-between items-center p-2 pr-8 hover:bg-accent-weak group-hover:bg-accent-weak",{}),children:[s.jsx(w,{className:"text-text-default",children:d}),h&&s.jsx(w,{className:"text-text-weak",children:h}),l&&s.jsx(v,{icon:s.jsx(q,{}),className:"absolute right-2 text-text-accent"})]})},[a]),x=t.useMemo(()=>p?m.filter(e=>ee(e,p,["name","zone","utc"])):m,[m,p]),E=t.useCallback(e=>{if(!a.includes(e)||!x.some(T=>!a.includes(T)))return!1;const h=x.filter(T=>a.includes(T));return h.indexOf(e)===h.length-1},[x,a]);return t.useEffect(()=>{o&&(C(o),S(m.find(e=>j(e)===o)))},[o,m]),t.useEffect(()=>{b||F("")},[b]),t.useEffect(()=>{z(u)},[u]),t.useEffect(()=>{var e;(e=$.current)==null||e.focus()},[$]),s.jsxs(I,{...B,open:b,onOpenChange:O,children:[s.jsx(W,{children:s.jsxs(X,{children:[s.jsx(Y,{asChild:!0,children:s.jsx(V,{asChild:!0,children:s.jsx(K,{variant:"nude",theme:"neutral",iconPosition:"right",icon:s.jsx(v,{icon:s.jsx(_,{})}),className:N("overflow-hidden justify-between px-2 cursor-pointer hover:bg-accent-weak hover:text-text-accent",r),innerClassName:"overflow-hidden",children:M(g)})})}),g&&s.jsx(Z,{children:L(g)})]})}),s.jsxs(U,{side:"right",align:"start",...c,className:N("max-h-[350px] w-[320px] p-0 overflow-hidden flex flex-col text-text-default",c==null?void 0:c.className),onCloseAutoFocus:e=>e.preventDefault(),children:[s.jsx("div",{tabIndex:-1,style:{pointerEvents:"auto"},children:s.jsx(se,{value:p,onChange:F,onEnterKeyDown:()=>{const e=Array.from(x.values())[0];e&&(R(e),O(!1))}})}),s.jsx("div",{className:"flex overflow-auto flex-col py-1",children:x.map((e,l)=>s.jsxs(t.Fragment,{children:[s.jsx(A,{className:"cursor-default focus:outline-none",onClick:()=>R(e),children:y(e,D===j(e))}),E(e)&&s.jsx(P,{className:"m-1 w-[calc(100%-8px)]"})]},l))})]})]})}),se=({value:u,onChange:n,onEnterKeyDown:o})=>{const i=t.useRef(null),c=r=>{const f=r.target.value.length;r.target.setSelectionRange(f,f)};return t.useEffect(()=>{var r;(r=i.current)==null||r.focus()},[i]),s.jsx(J,{ref:i,autoFocus:!0,onClear:()=>n(""),value:u,onChange:r=>{n(r.target.value)},onKeyDown:r=>{r.code==="Enter"&&(o==null||o()),r.stopPropagation()},onFocus:c,containerClassName:"border-0 rounded-b-none border-b border-border-default focus-within:border-border-default shadow-none shrink-0"})};k.displayName="TimezoneDropdownMenu";k.__docgenInfo={description:"",methods:[],displayName:"TimezoneDropdownMenu",props:{open:{defaultValue:{value:"false",computed:!1},required:!1}}};export{k as T};
