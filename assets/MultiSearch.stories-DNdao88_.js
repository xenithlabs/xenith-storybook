import{j as e}from"./jsx-runtime-DR9Q75dM.js";import{r as l}from"./index-DRjF_FHU.js";import{D as he,a as fe,b as xe,f as $}from"./DropdownMenu-XER5NlNu.js";import{c as g}from"./cn-8RyR4BqC.js";import{t as ee}from"./stringCase-DaZl3p-i.js";import{T as b,a as A}from"./Tag-ilI0NFZm.js";import{F as Se}from"./close-D2djoYoT.js";import{P as ge,a as je,b as ve}from"./Popover-A4hNnO1p.js";import{d as Ce,I as te,b as we}from"./useClickOutside-BS0O2wyX.js";import{T as F}from"./Truncate-4o_s824j.js";import{B as W}from"./Button-BfTE6Gaa.js";import{I}from"./Icon-CTnhpE1d.js";import{T as S}from"./Text-C8HBwI4b.js";import{B as R}from"./Badge-CQf0SPqP.js";import{F as z}from"./search-5X7N_xNn.js";import{S as P}from"./search-ai-H4BYauaj.js";import"./index-DuXoWBk8.js";import"./index-CxRLcT2J.js";import"./index-CYnergnF.js";import"./index-ab-r6Yn4.js";import"./index-qtGI3euC.js";import"./index-DdILnG7L.js";import"./index-Bq6ilrdN.js";import"./index-CxZrjbHI.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-KY2xTor3.js";import"./index-BhXpUKZt.js";import"./chevron-right-D4FvqfWr.js";import"./check-C0C6JGvp.js";import"./styles-x1yxmyQd.js";import"./index-Bb4qSo10.js";import"./mini-FlV67GHA.js";import"./spinner-ojW7ALd7.js";import"./chevron-down-CyV3wpL8.js";import"./clock-DRhx3Wks.js";import"./index-CAHntWCK.js";import"./index-HZDBD2ik.js";import"./Heading-DjlBwQyS.js";import"./Checkbox-LSeb53hr.js";import"./index-Bu1UD4WD.js";import"./Tooltip-D2ba4dcD.js";import"./index-BXQDTo2X.js";import"./CopyButton-_NYvsG3t.js";import"./copy-De8jvVXM.js";function J(a,n){let s;const r=function(...i){clearTimeout(s),s=setTimeout(()=>{a.apply(this,i),s=void 0},n)};return r.cancel=function(){clearTimeout(s),s=void 0},r.flush=function(...i){r.cancel(),a.apply(this,i)},r.pending=function(){return s!==void 0},r}function ye(a){const n=l.useRef(a);n.current=a,l.useEffect(()=>()=>{n.current()},[])}function Ne(a,n=500){const s=l.useRef();ye(()=>{s.current&&s.current.cancel()});const r=l.useMemo(()=>{const i=J(a,n),c=(...u)=>i(...u);return c.cancel=()=>{i.cancel()},c.isPending=()=>!!s.current,c.flush=()=>i.flush(),c},[a,n]);return l.useEffect(()=>{s.current=J(a,n)},[a,n]),r}const Te=()=>typeof window>"u"?!1:navigator.userAgent.toLowerCase().includes("mac"),C={Shift:"Shift",Ctrl:"Ctrl",Alt:"Alt",Cmd:"Cmd"},Me=a=>Object.values(C).includes(a);function be(a,n){const s=l.useCallback(r=>{const i=Array.isArray(a)?a:[a],c=Te();i.map(d=>d.split("+").map(m=>m.trim()).filter(Boolean)).some(d=>d.every(m=>{if(Me(m)){if(!r.getModifierState)return!1;switch(m){case C.Cmd:return c&&r.getModifierState("Meta")||!c&&r.getModifierState("Control");case C.Ctrl:return r.getModifierState("Control");case C.Alt:return r.getModifierState("Alt");case C.Shift:return r.getModifierState("Shift");default:return!1}}return r.key===m}))&&n()},[a,n]);l.useEffect(()=>(document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}),[s])}const _=l.forwardRef(({className:a,value:n,onChange:s,columnOptions:r,column:i,defaultColumn:c,onColumnChange:u,leftComponent:p,inputProps:d,selectProps:m,...w},ae)=>{const y=l.useRef(null),O=l.useRef(null),[N,q]=l.useState(""),[o,K]=l.useState(n||[]),[ne,E]=l.useState(i||c),[j,k]=l.useState(!1),se=t=>{requestAnimationFrame(()=>{!t&&document.activeElement!==y.current&&k(!1)})},ie=l.useMemo(()=>r&&typeof r[0]=="string"?r.map(t=>({value:t,label:t&&ee(t)})):r,[r]),le=()=>{var t,h;(h=O.current)==null||h.scrollTo({left:(t=O.current)==null?void 0:t.scrollWidth})},v=t=>{K(t),s==null||s(t)},ce=t=>{v([...o,t]),q("")},V=t=>{v(o.filter((h,x)=>x!==t))},L=()=>{v([])},oe=t=>{t.key==="Enter"&&N.trim()!==""&&ce(N.trim()),t.key==="Backspace"&&N.trim()===""&&V(o.length-1)},ue=t=>{var x;const h=(x=t.clipboardData)==null?void 0:x.getData("text/plain");if(h){const de=/\r\n|\r|\n/,pe=h.split(de).map(D=>D.trim()).filter(D=>D!=="");v([...o,...pe])}t.preventDefault()},me=t=>{E(t),u==null||u(t)};return l.useEffect(()=>{K(n||[])},[n]),l.useEffect(()=>{E(i!==void 0?i:c)},[i,c]),l.useEffect(()=>{j&&le()},[o,j]),be("Escape",()=>{var t;k(!1),(t=y.current)==null||t.blur()}),e.jsxs(ge,{open:j,onOpenChange:se,children:[e.jsxs("div",{ref:ae,className:g("flex h-10 border divide-x w-[620px] bg-bg-default border-border-default divide-border-default rounded-radius-md",a),...w,children:[p&&e.jsx("div",{className:"w-[44px] shrink-0 flex items-center justify-center ",children:p}),e.jsx(Ce,{options:ie,isOptionSearchable:!1,placeholder:"Select Column",noBorder:!0,noBorderHeightAdjusted:!0,...m,className:g("w-40 shrink-0",m==null?void 0:m.className),value:ne,onChange:me}),e.jsxs("div",{className:"flex overflow-hidden flex-1 gap-1 items-center pr-3",children:[e.jsxs("div",{ref:O,onClick:()=>{var t;(t=y.current)==null||t.focus()},className:"flex overflow-auto flex-1 gap-2 px-2 cursor-text",style:{scrollbarWidth:"thin"},children:[o&&o.length>0&&e.jsx(e.Fragment,{children:j?e.jsx("div",{className:"flex gap-2 items-center",children:o==null?void 0:o.map((t,h)=>e.jsx(b,{className:"max-w-[106px]",rightComponent:e.jsx(A,{onClose:()=>{V(h)}}),children:e.jsx(F,{fluid:!0,maxWidth:74,middleTruncate:!0,withTooltip:!0,middleTruncateEndLength:6,children:t})},`${t}-${h}`))}):e.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[o==null?void 0:o.slice(0,3).map((t,h)=>e.jsx(b,{className:"max-w-[88px]",rightComponent:e.jsx(A,{onClose:x=>{x.stopPropagation(),x.preventDefault(),V(h)}}),children:e.jsx(F,{fluid:!0,maxWidth:56,middleTruncate:!0,withTooltip:!0,middleTruncateEndLength:4,children:t})},`${t}-${h}`)),(o==null?void 0:o.length)>3&&e.jsxs(b,{className:"whitespace-nowrap",children:["+",o.length-3," more"]})]})}),e.jsx(te,{ref:y,placeholder:o.length>0?" ":"Multi Search",...d,containerClassName:g(d==null?void 0:d.containerClassName,"border-none h-[38px] px-0",{"min-w-[160px]":j}),value:N,onChange:t=>{q(t.target.value)},onClear:()=>{L()},onKeyDown:oe,onFocus:()=>{k(!0)},onPaste:ue})]}),o.length>0&&e.jsx(W,{variant:"nude",theme:"neutral",size:"xs",icon:e.jsx(I,{icon:e.jsx(Se,{}),size:"lg",className:"text-text-weaker"}),iconOnly:!0,onClick:L})]})]}),e.jsx(je,{className:"w-0 h-0",tabIndex:-1}),e.jsx(Ie,{value:o,onValueChange:v})]})});_.displayName="MultiSearchInput";const Ie=({value:a,onValueChange:n})=>{const s=i=>{n(a.filter((c,u)=>u!==i))},r=()=>{n([])};return e.jsxs(ve,{side:"bottom",align:"start",sideOffset:-6,className:"px-1 py-3 space-y-2 w-[620px]",onOpenAutoFocus:i=>{i.preventDefault()},children:[e.jsxs("div",{className:"px-2 h-[23px] flex justify-between items-center",children:[e.jsx(S,{variant:"semiBold",className:"uppercase text-text-weaker",children:"Searching For"}),e.jsx(W,{variant:"link",size:"xs",className:"max-w-[47px]",onClick:r,children:"Clear all"})]}),e.jsx("div",{className:"max-h-[256px] overflow-auto flex flex-wrap gap-2",children:a.map((i,c)=>e.jsx(b,{rightComponent:e.jsx(A,{onClose:()=>s(c)}),className:"max-w-full",children:e.jsx(F,{fluid:!0,minWidth:0,maxWidth:"max-w-full",children:i})},c))}),e.jsxs("div",{className:"flex justify-between pt-2 pr-3 pl-2 border-t border-border-default",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(R,{theme:"neutral",variant:"outline",children:"Esc"}),e.jsx(S,{className:"text-text-weaker",children:"to close"})]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(S,{children:"Press"}),e.jsx(R,{theme:"neutral",variant:"outline",children:"Shift ⇧"}),e.jsx(S,{children:"+"}),e.jsx(R,{theme:"neutral",variant:"outline",children:"Enter ↵"}),e.jsx(S,{className:"text-text-weaker",children:"to add new search parameter"})]})]})]})};_.__docgenInfo={description:"",methods:[],displayName:"MultiSearchInput"};const f={Basic:"basic",Multi:"multi"},B=({className:a,containerClassName:n,basicSearchProps:s,multiSearchProps:r,searchType:i=f.Basic,onSearchTypeChange:c})=>{const[u,p]=l.useState(i||f.Basic),d=w=>{p(w),c==null||c(w)};l.useEffect(()=>{p==null||p(i)},[i]);const m=()=>{switch(u){case f.Basic:return e.jsx(re,{...s,className:g(a,s==null?void 0:s.className),leftComponent:e.jsx(we,{className:"border-r-0 px-2.5",children:e.jsx(U,{value:u,onChange:d})})});case f.Multi:return e.jsx(_,{...r,leftComponent:e.jsx(U,{value:u,onChange:d})});default:return null}};return e.jsx("div",{className:g("h-10",n),children:m()})},U=({value:a,onChange:n})=>e.jsxs(he,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(W,{variant:"outline",theme:"neutral",size:"xs",className:"gap-0 px-0 h-6 min-w-6",icon:e.jsx(I,{icon:a===f.Basic?e.jsx(z,{}):e.jsx(P,{}),className:"text-text-accent"})})}),e.jsxs(xe,{className:"w-[176px]",side:"bottom",align:"start",alignOffset:-11,sideOffset:14,children:[e.jsxs($,{onSelect:()=>{n(f.Basic)},className:"flex gap-2 text-text-weak",children:[e.jsx(I,{icon:e.jsx(z,{})}),e.jsx(S,{variant:"medium",children:"Basic Search"})]}),e.jsxs($,{onSelect:()=>{n(f.Multi)},className:"flex gap-2 text-text-weak",children:[e.jsx(I,{icon:e.jsx(P,{})}),e.jsx(S,{variant:"medium",children:"Multi Search"})]})]})]}),re=l.forwardRef(({delay:a=500,value:n,onChange:s,...r},i)=>{const[c,u]=l.useState(n),p=Ne(s||(()=>{}),a),d=m=>{u(m.target.value),p(m)};return l.useEffect(()=>{u(n)},[n]),e.jsx(te,{ref:i,type:"text",clearable:!0,...r,value:c,onChange:d,containerClassName:g("w-[620px]",r.containerClassName),placeholder:r.placeholder?r.rawPlaceholder?r.placeholder:ee(r.placeholder):"Search"})});re.displayName="BasicSearchInput";B.__docgenInfo={description:"",methods:[],displayName:"MultiSearch",props:{className:{required:!1,tsType:{name:"string"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},basicSearchProps:{required:!1,tsType:{name:"Omit",elements:[{name:"BasicSearchProps"},{name:"literal",value:'"leftComponent"'}],raw:'Omit<BasicSearchProps, "leftComponent">'},description:""},multiSearchProps:{required:!1,tsType:{name:"Omit",elements:[{name:"MultiSearchInputProps"},{name:"literal",value:'"leftComponent"'}],raw:'Omit<MultiSearchInputProps, "leftComponent">'},description:""},searchType:{required:!1,tsType:{name:"SearchType"},description:"",defaultValue:{value:'"basic"',computed:!1}},onSearchTypeChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(searchType: SearchType) => void",signature:{arguments:[{type:{name:"SearchType"},name:"searchType"}],return:{name:"void"}}},description:""}}};const jt={title:"Xenith UI/Components/MultiSearch",component:B,tags:["autodocs"]},T={args:{multiSearchProps:{columnOptions:["id","name","email"],defaultColumn:"id"}},render:a=>e.jsx("div",{className:"w-[800px] h-[400px]",children:e.jsx(B,{...a})})},M={args:{multiSearchProps:{columnOptions:["id","name","email"],defaultColumn:"id"}},render:a=>{const[n,s]=l.useState(""),[r,i]=l.useState([]),[c,u]=l.useState(""),[p,d]=l.useState(f.Basic);return e.jsxs("div",{className:"w-[800px] h-[400px]",children:[e.jsx(B,{...a,basicSearchProps:{value:n,onChange:m=>s(m.target.value),onClear:()=>s(""),...a.basicSearchProps},multiSearchProps:{value:r,onChange:i,column:c,onColumnChange:u,...a.multiSearchProps},searchType:p,onSearchTypeChange:d}),e.jsx("pre",{children:JSON.stringify({search:n,multiSearchValue:r,multiSearchColumn:c,searchType:p},null,2)})]})}};var H,X,G;T.parameters={...T.parameters,docs:{...(H=T.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    multiSearchProps: {
      columnOptions: ["id", "name", "email"],
      defaultColumn: "id"
    }
  },
  render: args => <div className="w-[800px] h-[400px]">
      <MultiSearch {...args} />
    </div>
}`,...(G=(X=T.parameters)==null?void 0:X.docs)==null?void 0:G.source}}};var Q,Y,Z;M.parameters={...M.parameters,docs:{...(Q=M.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {
    multiSearchProps: {
      columnOptions: ["id", "name", "email"],
      defaultColumn: "id"
    }
  },
  render: args => {
    const [search, setSearch] = useState<string>("");
    const [multiSearchValue, setMultiSearchValue] = useState<string[]>([]);
    const [multiSearchColumn, setMultiSearchColumn] = useState<string>("");
    const [searchType, setSearchType] = useState<SearchType>(SearchType.Basic);
    return <div className="w-[800px] h-[400px]">
        <MultiSearch {...args} basicSearchProps={{
        value: search,
        onChange: e => setSearch(e.target.value),
        onClear: () => setSearch(""),
        ...args.basicSearchProps
      }} multiSearchProps={{
        value: multiSearchValue,
        onChange: setMultiSearchValue,
        column: multiSearchColumn,
        onColumnChange: setMultiSearchColumn,
        ...args.multiSearchProps
      }} searchType={searchType} onSearchTypeChange={setSearchType} />

        <pre>
          {JSON.stringify({
          search,
          multiSearchValue,
          multiSearchColumn,
          searchType
        }, null, 2)}
        </pre>
      </div>;
  }
}`,...(Z=(Y=M.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};const vt=["Default","WithControlledValue"];export{T as Default,M as WithControlledValue,vt as __namedExportsOrder,jt as default};
