import{j as s}from"./jsx-runtime-DR9Q75dM.js";import{r}from"./index-DRjF_FHU.js";import{D as V,a as q,b as A,$ as U}from"./DropdownMenu-XER5NlNu.js";import{I as g}from"./Icon-CTnhpE1d.js";import{c as N}from"./cn-8RyR4BqC.js";import{F as _}from"./chevron-right-D4FvqfWr.js";import{F as G}from"./check-C0C6JGvp.js";import{F as H}from"./clock-DRhx3Wks.js";import{u as J,g as j,S as Q}from"./useClickOutside-BHWP5pBS.js";import{f as W}from"./Table-_w2Zo3e7.js";import{T as B}from"./Text-C8HBwI4b.js";import{T as X,a as Y,b as Z,c as K}from"./Tooltip-D2ba4dcD.js";import{B as P}from"./Button-CHcYOyT5.js";import{D as ee}from"./Divider-CIm89-oy.js";const se=(c,o,n)=>{if(!o)return!0;const i=o.toLowerCase();return n.some(t=>{const d=c[t];return typeof d=="string"?d.toLowerCase().includes(i):!1})},R=r.forwardRef(({open:c=!1,onOpenChange:o,value:n,onChange:i,contentProps:t,className:d,placeholder:p,withBrowserTimezoneOption:D=!0,...L})=>{const[w,z]=r.useState(c),[k,v]=r.useState(n),[T,C]=r.useState(),[h,S]=r.useState(""),$=r.useRef(null),{basicOptions:a,allTimezoneOptions:f}=J(D),F=e=>{z(e),o==null||o(e)},O=e=>{v(j(e)),C(e),i&&i(j(e))},E=e=>{const l=a.includes(e)?e.name:e.zone,u=e.zone!=="UTC"?`(${e.utc})`:"";return`${l} ${u}`},M=r.useCallback(e=>{if(!e)return s.jsx("span",{children:p||"Select timezone"});const l=a.includes(e)?e.name:e.zone,u=e.zone!=="UTC"?`(${e.utc})`:"";return s.jsxs("div",{className:"flex overflow-hidden gap-2 items-center",children:[s.jsx(g,{icon:s.jsx(H,{})}),s.jsx("div",{className:"overflow-hidden",children:s.jsx(W,{text:`${l}Â ${u}`,suffixLength:u.length+1})})]})},[a,p]),y=r.useCallback((e,l)=>{const u=a.includes(e)?e.name:e.zone,x=e.zone!=="UTC"?e.utc:"";return s.jsxs("div",{className:N("flex relative gap-2 justify-between items-center p-2 pr-8 hover:bg-accent-weak group-hover:bg-accent-weak",{}),children:[s.jsx(B,{className:"text-text-default",children:u}),x&&s.jsx(B,{className:"text-text-weak",children:x}),l&&s.jsx(g,{icon:s.jsx(G,{}),className:"absolute right-2 text-text-accent"})]})},[a]),m=r.useMemo(()=>h?f.filter(e=>se(e,h,["name","zone","utc"])):f,[f,h]),I=r.useCallback(e=>{if(!a.includes(e)||!m.some(b=>!a.includes(b)))return!1;const x=m.filter(b=>a.includes(b));return x.indexOf(e)===x.length-1},[m,a]);return r.useEffect(()=>{n&&(v(n),C(f.find(e=>j(e)===n)))},[n,f]),r.useEffect(()=>{w||S("")},[w]),r.useEffect(()=>{z(c)},[c]),r.useEffect(()=>{var e;(e=$.current)==null||e.focus()},[$]),s.jsxs(V,{...L,open:w,onOpenChange:F,children:[s.jsx(X,{children:s.jsxs(Y,{children:[s.jsx(Z,{asChild:!0,children:s.jsx(q,{asChild:!0,children:s.jsx(P,{variant:"nude",theme:"neutral",iconPosition:"right",icon:s.jsx(g,{icon:s.jsx(_,{})}),className:N("overflow-hidden justify-between px-2 cursor-pointer",d),innerClassName:"overflow-hidden",children:M(T)})})}),T&&s.jsx(K,{children:E(T)})]})}),s.jsxs(A,{side:"right",align:"start",...t,className:N("max-h-[350px] w-[320px] p-0 overflow-hidden flex flex-col text-text-default",t==null?void 0:t.className),onCloseAutoFocus:e=>e.preventDefault(),children:[s.jsx("div",{tabIndex:-1,style:{pointerEvents:"auto"},children:s.jsx(te,{value:h,onChange:S,onEnterKeyDown:()=>{const e=Array.from(m.values())[0];e&&(O(e),F(!1))}})}),s.jsx("div",{className:"flex overflow-auto flex-col py-1",children:m.map((e,l)=>s.jsxs(r.Fragment,{children:[s.jsx(U,{className:"cursor-default focus:outline-none",onClick:()=>O(e),children:y(e,k===j(e))}),I(e)&&s.jsx(ee,{className:"m-1 w-[calc(100%-8px)]"})]},l))})]})]})}),te=({value:c,onChange:o,onEnterKeyDown:n})=>{const i=r.useRef(null);return r.useEffect(()=>{var t;(t=i.current)==null||t.focus()},[i]),r.useEffect(()=>{const t=i.current;if(!t)return;const d=t.selectionStart,p=t.selectionEnd;requestAnimationFrame(()=>{t.setSelectionRange(d??0,p??0)})},[c]),s.jsx(Q,{ref:i,autoFocus:!0,onClear:()=>o(""),value:c,onChange:t=>{o(t.target.value)},onKeyDown:t=>{t.code==="Enter"&&(n==null||n()),t.stopPropagation()},containerClassName:"border-0 rounded-b-none border-b border-border-default focus-within:border-border-default shadow-none shrink-0"})};R.displayName="TimezoneDropdownMenu";R.__docgenInfo={description:"",methods:[],displayName:"TimezoneDropdownMenu",props:{open:{defaultValue:{value:"false",computed:!1},required:!1},withBrowserTimezoneOption:{defaultValue:{value:"true",computed:!1},required:!1}}};export{R as T};
