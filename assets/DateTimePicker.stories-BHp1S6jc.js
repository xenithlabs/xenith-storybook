import{j as t}from"./jsx-runtime-BhBAkL08.js";import{r as s}from"./index-caxmlYbZ.js";import{c as F}from"./cn-C-5SdYIA.js";import{F as E}from"./calendar-DWhiacmf.js";import{t as S}from"./constructFrom-rJN6zrQ_.js";import{P as U,a as L,b as B}from"./Popover-Dr_kQcGi.js";import{B as y}from"./Button-3dGPhkPQ.js";import{I as W}from"./Icon-7BdkfswG.js";import{f as z}from"./format-C_zMm074.js";import{C as X}from"./Calendar-DM-hT0Hq.js";import{I as v}from"./useClickOutside-IBXRFGDd.js";import{T as u}from"./Text-D-wIA97j.js";import{D as A}from"./Divider-rb-Rmumz.js";import{s as G}from"./differenceInCalendarDays-akuTVAtC.js";import"./index-d7ziAqdJ.js";import"./index-DIE_uK0V.js";import"./index-CoQPK225.js";import"./index-D0ZzT1CX.js";import"./index-9ELtA30B.js";import"./index-CYGPaFfr.js";import"./floating-ui.dom-BuxmzwbT.js";import"./index-BPrjlVTu.js";import"./index-D1_gb_Tp.js";import"./index-D09aQd82.js";import"./index-Bb4qSo10.js";import"./styles-BNEhTmYy.js";import"./spinner-ByTSIKau.js";import"./chevron-down-mN_p2z2a.js";import"./chevron-left-BzZ3Cg5H.js";import"./chevron-right-C3e6g37q.js";import"./search-l0nYC1Ts.js";import"./close-CejhmAMe.js";import"./stringCase-DaZl3p-i.js";import"./check-CDvVW5im.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-DBF0kSry.js";import"./index-C1NPOm8g.js";import"./Heading-CSQHx7IS.js";import"./Checkbox-BUc_Pm-N.js";import"./index-BnmSys5K.js";function J(e,n){const r=S(e);return r.setHours(n),r}function K(e,n){const r=S(e);return r.setMinutes(n),r}function Q(e,n){const r=S(e);return r.setSeconds(n),r}const j=({date:e,fromDate:n,toDate:r,onChange:g,error:O,timeError:h,timeMessage:q,popoverProps:H,...R})=>{const[D,w]=s.useState(!1),[a,N]=s.useState(e?new Date(e):void 0),[o,l]=s.useState((e==null?void 0:e.getHours().toString())??"00"),[m,p]=s.useState((e==null?void 0:e.getMinutes().toString())??"00"),[c,d]=s.useState((e==null?void 0:e.getSeconds().toString())??"00"),_=s.useMemo(()=>{if(n&&r)return{before:n,after:r};if(n)return{before:n};if(r)return{after:r}},[n,r]);return s.useEffect(()=>{N(e?new Date(e):void 0),l((e==null?void 0:e.getHours().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),p((e==null?void 0:e.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00"),d((e==null?void 0:e.getSeconds().toLocaleString("en-US",{minimumIntegerDigits:2}))??"00")},[e==null?void 0:e.getTime(),D]),s.useEffect(()=>{if(!a)return;if(Number(o)<0){l("00");return}if(Number(o)>23){l("23");return}if(Number(m)<0){p("00");return}if(Number(m)>59){p("59");return}if(Number(c)<0){d("00");return}if(Number(c)>59){d("59");return}const i=J(K(Q(a,Number(c)),Number(m)),Number(o));N(i)},[o,m,c,a==null?void 0:a.getTime()]),t.jsxs(U,{open:D,onOpenChange:w,children:[t.jsx(L,{asChild:!0,children:t.jsx(y,{variant:"outline",theme:"neutral",className:F("justify-start text-left font-normal items-center",!a&&"text-muted-foreground",{"border-border-critical":O}),icon:t.jsx(W,{icon:t.jsx(E,{})}),children:e?z(e,"dd MMM yyy HH:mm:ss"):t.jsx("div",{className:"text-text-weaker",children:R.placeholder??"Pick a date"})})}),t.jsx(B,{className:"w-auto p-0",...H,children:t.jsxs("div",{className:"grid p-6",children:[t.jsxs("div",{className:"flex divide-x",children:[t.jsx(X,{mode:"single",disabled:_,startMonth:n,endMonth:r,selected:a,onSelect:N,autoFocus:!0,className:"p-0 pt-1 pr-6 border-0 shadow-none"}),t.jsxs("div",{className:"pl-6",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx(v,{type:"number",value:o,onChange:i=>l(i.target.value),min:0,max:23,containerClassName:"w-[57px]",className:"text-center appearance-none",placeholder:"00",error:h}),t.jsx(u,{variant:"tiny",className:"text-text-weak",children:"Hour"})]}),t.jsx(u,{className:"flex items-center h-10",children:":"}),t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx(v,{type:"number",value:m,onChange:i=>p(i.target.value),min:0,max:59,containerClassName:"w-[57px]",className:"text-center appearance-none",placeholder:"00",error:h}),t.jsx(u,{variant:"tiny",className:"text-text-weak",children:"Minute"})]}),t.jsx(u,{className:"flex items-center h-10",children:":"}),t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx(v,{type:"number",value:c,onChange:i=>d(i.target.value),min:0,max:59,containerClassName:"w-[57px]",className:"text-center appearance-none",placeholder:"00",error:h}),t.jsx(u,{variant:"tiny",className:"text-text-weak",children:"Second"})]})]}),q]})]}),t.jsx(A,{className:"mt-6 mb-4"}),t.jsx("div",{className:"flex justify-end gap-4",children:t.jsx(y,{size:"sm",className:"w-[70px]",onClick:()=>{g==null||g(a),w(!1)},children:"Save"})})]})})]})};j.__docgenInfo={description:"",methods:[],displayName:"DateTimePicker",props:{date:{required:!0,tsType:{name:"union",raw:"Date | undefined",elements:[{name:"Date"},{name:"undefined"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(date?: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""},fromDate:{required:!1,tsType:{name:"Date"},description:""},toDate:{required:!1,tsType:{name:"Date"},description:""},error:{required:!1,tsType:{name:"boolean"},description:""},timeError:{required:!1,tsType:{name:"boolean"},description:""},timeMessage:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},popoverProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof PopoverContent>",elements:[{name:"PopoverContent"}]},description:""}},composes:["Omit"]};const Re={title:"Xenith UI/Components/Date Time Picker",component:j,decorators:e=>t.jsx("div",{className:"py-10 w-[300px] h-[400px]  pb-40",children:t.jsx(e,{})}),args:{date:new Date,onChange:e=>console.log(e)},tags:["autodocs"]},f={render:()=>{const[e,n]=s.useState(G(new Date).toISOString());return t.jsx(j,{date:e?new Date(e):void 0,onChange:r=>{n(r==null?void 0:r.toISOString())}})}},x={args:{fromDate:new Date}};var b,C,T;f.parameters={...f.parameters,docs:{...(b=f.parameters)==null?void 0:b.docs,source:{originalSource:`{
  render: () => {
    const [date, setDate] = useState<string | undefined>(startOfDay(new Date()).toISOString());
    return <DateTimePicker date={date ? new Date(date) : undefined} onChange={(date: Date | undefined) => {
      setDate(date?.toISOString());
    }} />;
  }
}`,...(T=(C=f.parameters)==null?void 0:C.docs)==null?void 0:T.source}}};var I,M,k;x.parameters={...x.parameters,docs:{...(I=x.parameters)==null?void 0:I.docs,source:{originalSource:`{
  args: {
    fromDate: new Date()
  }
}`,...(k=(M=x.parameters)==null?void 0:M.docs)==null?void 0:k.source}}};const _e=["Default","WithFromDate"];export{f as Default,x as WithFromDate,_e as __namedExportsOrder,Re as default};
