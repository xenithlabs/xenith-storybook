import{j as l}from"./jsx-runtime-DR9Q75dM.js";import{c as F}from"./cn-8RyR4BqC.js";import{F as S}from"./clock-C-cyK6yc.js";import{r as m}from"./index-DRjF_FHU.js";import{t as g,c as N,n as h,d as b,m as j,a as Y}from"./differenceInCalendarDays-C3EGPyW5.js";import{b as A,a as H,e as L,d as R}from"./endOfMonth-CBUZ-2Pf.js";import{e as E}from"./endOfDay-BZ5bvh5Y.js";import{T as $}from"./Text-1Zc-I06A.js";import{I as q}from"./Icon-CTnhpE1d.js";function M(r,t,e){const{years:s=0,months:n=0,weeks:a=0,days:u=0,hours:c=0,minutes:o=0,seconds:d=0}=t,i=g(r,e==null?void 0:e.in),f=n||s?A(i,n+s*12):i,y=u||a?H(f,u+a*7):f,I=o+c*60,T=(d+I*60)*1e3;return N(r,+y+T)}function x(r,t){const e=+g(r)-+g(t);return e<0?-1:e>0?1:e}function V(r,t,e){const[s,n]=h(e==null?void 0:e.in,r,t);return s.getFullYear()-n.getFullYear()}function k(r,t,e){const[s,n]=h(e==null?void 0:e.in,r,t),a=C(s,n),u=Math.abs(b(s,n));s.setDate(s.getDate()-a*u);const c=+(C(s,n)===-a),o=a*(u-c);return o===0?0:o}function C(r,t){const e=r.getFullYear()-t.getFullYear()||r.getMonth()-t.getMonth()||r.getDate()-t.getDate()||r.getHours()-t.getHours()||r.getMinutes()-t.getMinutes()||r.getSeconds()-t.getSeconds()||r.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function v(r){return t=>{const s=(r?Math[r]:Math.trunc)(t);return s===0?0:s}}function p(r,t,e){const[s,n]=h(e==null?void 0:e.in,r,t),a=(+s-+n)/j;return v(e==null?void 0:e.roundingMethod)(a)}function D(r,t){return+g(r)-+g(t)}function O(r,t,e){const s=D(r,t)/Y;return v(e==null?void 0:e.roundingMethod)(s)}function W(r,t){const e=g(r,t==null?void 0:t.in);return+E(e,t)==+L(e,t)}function z(r,t,e){const[s,n,a]=h(e==null?void 0:e.in,r,r,t),u=x(n,a),c=Math.abs(R(n,a));if(c<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-u*c);let o=x(n,a)===-u;W(s)&&c===1&&x(s,a)===1&&(o=!1);const d=u*(c-+o);return d===0?0:d}function P(r,t,e){const s=D(r,t)/1e3;return v(e==null?void 0:e.roundingMethod)(s)}function B(r,t,e){const[s,n]=h(e==null?void 0:e.in,r,t),a=x(s,n),u=Math.abs(V(s,n));s.setFullYear(1584),n.setFullYear(1584);const c=x(s,n)===-a,o=a*(u-+c);return o===0?0:o}function G(r,t){const[e,s]=h(r,t.start,t.end);return{start:e,end:s}}function J(r,t){const{start:e,end:s}=G(t==null?void 0:t.in,r),n={},a=B(s,e);a&&(n.years=a);const u=M(e,{years:n.years}),c=z(s,u);c&&(n.months=c);const o=M(u,{months:n.months}),d=k(s,o);d&&(n.days=d);const i=M(o,{days:n.days}),f=p(s,i);f&&(n.hours=f);const y=M(i,{hours:n.hours}),I=O(s,y);I&&(n.minutes=I);const _=M(y,{minutes:n.minutes}),T=P(s,_);return T&&(n.seconds=T),n}const w=m.createContext({}),K=({initialDuration:r=1e4,step:t=1e3,onCountdownEnd:e=()=>{},children:s})=>{const n=m.useRef(),[a,u]=m.useState(r),c=()=>{u(0),n.current&&clearInterval(n.current),n.current=null},o=()=>{n.current&&clearInterval(n.current),n.current=setInterval(()=>{if(a<=0){c(),e();return}u(f=>f-t)},t)},d=()=>{c(),u(r),o()};m.useEffect(()=>(d(),()=>{c()}),[r]),m.useEffect(()=>{a<=0&&c()},[a]);const i=J({start:0,end:a});return l.jsx(w.Provider,{value:{hours:i.hours||0,minutes:i.minutes||0,seconds:i.seconds||0},children:s})},Q=({className:r,icon:t=l.jsx(q,{className:"text-text-warning",icon:l.jsx(S,{})}),...e})=>{const{hours:s,minutes:n,seconds:a}=m.useContext(w),u=String(s).padStart(2,"0"),c=String(n).padStart(2,"0"),o=String(a).padStart(2,"0"),d=s>0?`${u}:${c}:${o}`:`${c}:${o}`;return l.jsxs("div",{...e,className:F("text-text-warning flex items-center gap-1",r),children:[l.jsx("span",{className:"relative top-[2px]",children:t}),l.jsx($,{variant:"semiBold",children:d})]})};K.__docgenInfo={description:"",methods:[],displayName:"Countdown",props:{initialDuration:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10000",computed:!1}},onCountdownEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1000",computed:!1}}},composes:["PropsWithChildren"]};Q.__docgenInfo={description:"",methods:[],displayName:"CountdownText",props:{icon:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:'<Icon className="text-text-warning" icon={<ClockIcon />} />',computed:!1}}},composes:["HTMLAttributes"]};export{K as C,Q as a};
